<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <title>BottyOtty Admin Panel</title>
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <link
      rel="icon"
      type="image/png"
      href="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAADUlEQVR42mNk+M9QDwADhgGAWjR9awAAAABJRU5ErkJggg=="
    />

    <script src="https://cdn.tailwindcss.com"></script>
    <script
      crossorigin
      src="https://unpkg.com/react@18/umd/react.development.js"
    ></script>
    <script
      crossorigin
      src="https://unpkg.com/react-dom@18/umd/react-dom.development.js"
    ></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>

    <!-- Professional Typography -->
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&display=swap"
      rel="stylesheet"
    />

    <style>
      /* ========================================
       üé® PROFESSIONAL DESIGN SYSTEM
       Bold/Vibrant + Clean/Minimal
       ======================================== */

      :root {
        /* Bold Vibrant Colors */
        --primary: #6366f1; /* Electric Indigo */
        --primary-light: #818cf8;
        --primary-dark: #4f46e5;

        --secondary: #ec4899; /* Vibrant Pink */
        --secondary-light: #f472b6;
        --secondary-dark: #db2777;

        --accent: #06b6d4; /* Cyan Accent */
        --accent-light: #22d3ee;
        --accent-dark: #0891b2;

        --success: #10b981; /* Emerald */
        --warning: #f59e0b; /* Amber */
        --danger: #ef4444; /* Red */

        /* Clean Neutral Base */
        --bg-primary: #0f0f23; /* Deep Space */
        --bg-secondary: #1a1a3e; /* Midnight Blue */
        --bg-tertiary: #252554; /* Slate Purple */

        --surface: rgba(255, 255, 255, 0.03);
        --surface-hover: rgba(255, 255, 255, 0.06);
        --surface-active: rgba(255, 255, 255, 0.09);

        --text-primary: #ffffff;
        --text-secondary: rgba(255, 255, 255, 0.7);
        --text-tertiary: rgba(255, 255, 255, 0.4);

        --border: rgba(255, 255, 255, 0.08);
        --border-focus: rgba(99, 102, 241, 0.4);

        /* Sophisticated Shadows */
        --shadow-sm: 0 1px 2px 0 rgba(0, 0, 0, 0.3);
        --shadow-md:
          0 4px 6px -1px rgba(0, 0, 0, 0.4), 0 2px 4px -1px rgba(0, 0, 0, 0.3);
        --shadow-lg:
          0 10px 15px -3px rgba(0, 0, 0, 0.5), 0 4px 6px -2px rgba(0, 0, 0, 0.3);
        --shadow-xl:
          0 20px 25px -5px rgba(0, 0, 0, 0.6),
          0 10px 10px -5px rgba(0, 0, 0, 0.3);
        --shadow-glow: 0 0 20px rgba(99, 102, 241, 0.3);

        /* Spacing Scale */
        --space-xs: 0.5rem;
        --space-sm: 0.75rem;
        --space-md: 1rem;
        --space-lg: 1.5rem;
        --space-xl: 2rem;
        --space-2xl: 3rem;

        /* Layout Variables (dynamically updated) */
        --layout-spacing: 32px;
        --card-border-radius: 16px;
        --card-padding: 32px;
        --card-gap: 24px;
      }

      * {
        margin: 0;
        padding: 0;
        box-sizing: border-box;
      }

      body {
        /* Rich, Dynamic Background */
        background: linear-gradient(
          135deg,
          #0f0f23 0%,
          #1a1a3e 25%,
          #2d1b4e 50%,
          #1a1a3e 75%,
          #0f0f23 100%
        );
        background-size: 200% 200%;
        animation: gradientShift 15s ease infinite;
        font-family:
          "Inter",
          -apple-system,
          BlinkMacSystemFont,
          "Segoe UI",
          Roboto,
          sans-serif;
        color: var(--text-primary);
        line-height: 1.6;
        -webkit-font-smoothing: antialiased;
        -moz-osx-font-smoothing: grayscale;
        min-height: 100vh;
      }

      @keyframes gradientShift {
        0%,
        100% {
          background-position: 0% 50%;
        }
        50% {
          background-position: 100% 50%;
        }
      }

      /* ========================================
       üéØ GLASS MORPHISM - Refined & Subtle
       ======================================== */

      .glass {
        background: linear-gradient(
          135deg,
          rgba(255, 255, 255, 0.05) 0%,
          rgba(255, 255, 255, 0.02) 100%
        );
        backdrop-filter: blur(20px) saturate(180%);
        border: 1px solid var(--border);
        box-shadow: var(--shadow-lg);
      }

      /* ========================================
       üì¶ CARDS - Clean with Vibrant Accents
       ======================================== */

      .section-card {
        background: linear-gradient(
          135deg,
          rgba(255, 255, 255, 0.04) 0%,
          rgba(255, 255, 255, 0.02) 100%
        );
        backdrop-filter: blur(20px) saturate(180%);
        border: 1px solid var(--border);
        border-radius: 20px;
        padding: var(--space-xl);
        margin-bottom: var(--space-lg);
        transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
        box-shadow: var(--shadow-md);
        position: relative;
        overflow: hidden;
      }

      .section-card::before {
        content: "";
        position: absolute;
        top: 0;
        left: 0;
        right: 0;
        height: 3px;
        background: linear-gradient(
          90deg,
          var(--primary) 0%,
          var(--secondary) 50%,
          var(--accent) 100%
        );
        opacity: 0;
        transition: opacity 0.3s ease;
      }

      .section-card:hover {
        background: linear-gradient(
          135deg,
          rgba(255, 255, 255, 0.06) 0%,
          rgba(255, 255, 255, 0.03) 100%
        );
        border-color: rgba(99, 102, 241, 0.3);
        transform: translateY(-2px);
        box-shadow: var(--shadow-xl), var(--shadow-glow);
      }

      .section-card:hover::before {
        opacity: 1;
      }

      /* ========================================
       üîò BUTTONS - Modern & Sophisticated
       ======================================== */

      .save-button {
        background: linear-gradient(
          135deg,
          var(--primary) 0%,
          var(--primary-dark) 100%
        );
        border: none;
        box-shadow:
          var(--shadow-md),
          0 0 0 0 rgba(99, 102, 241, 0.5);
        transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
        position: relative;
        overflow: hidden;
      }

      .save-button::before {
        content: "";
        position: absolute;
        top: 50%;
        left: 50%;
        width: 0;
        height: 0;
        border-radius: 50%;
        background: rgba(255, 255, 255, 0.2);
        transform: translate(-50%, -50%);
        transition:
          width 0.6s,
          height 0.6s;
      }

      .save-button:hover::before {
        width: 300px;
        height: 300px;
      }

      .save-button:hover {
        transform: translateY(-2px);
        box-shadow:
          var(--shadow-lg),
          0 0 30px rgba(99, 102, 241, 0.5);
      }

      .save-button:active {
        transform: translateY(0);
      }

      .delete-button {
        background: linear-gradient(135deg, var(--danger) 0%, #dc2626 100%);
        border: none;
        box-shadow:
          var(--shadow-md),
          0 0 0 0 rgba(239, 68, 68, 0.5);
        transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
        position: relative;
        overflow: hidden;
      }

      .delete-button::before {
        content: "";
        position: absolute;
        top: 50%;
        left: 50%;
        width: 0;
        height: 0;
        border-radius: 50%;
        background: rgba(255, 255, 255, 0.2);
        transform: translate(-50%, -50%);
        transition:
          width 0.6s,
          height 0.6s;
      }

      .delete-button:hover::before {
        width: 300px;
        height: 300px;
      }

      .delete-button:hover {
        transform: translateY(-2px);
        box-shadow:
          var(--shadow-lg),
          0 0 30px rgba(239, 68, 68, 0.5);
      }

      .delete-button:active {
        transform: translateY(0);
      }

      /* ========================================
       üìù INPUTS & FORM ELEMENTS
       ======================================== */

      input[type="text"],
      input[type="email"],
      input[type="number"],
      input[type="password"],
      select,
      textarea {
        background: var(--surface);
        border: 1px solid var(--border);
        color: var(--text-primary);
        border-radius: 12px;
        padding: 0.75rem 1rem;
        transition: all 0.2s cubic-bezier(0.4, 0, 0.2, 1);
        font-family: "Inter", sans-serif;
      }

      input[type="text"]:focus,
      input[type="email"]:focus,
      input[type="number"]:focus,
      input[type="password"]:focus,
      select:focus,
      textarea:focus {
        outline: none;
        background: var(--surface-hover);
        border-color: var(--primary);
        box-shadow:
          0 0 0 3px var(--border-focus),
          var(--shadow-md);
      }

      input[type="color"] {
        width: 60px;
        height: 44px;
        border: 2px solid var(--border);
        border-radius: 12px;
        cursor: pointer;
        transition: all 0.2s ease;
      }

      input[type="color"]:hover {
        border-color: var(--primary);
        box-shadow: 0 0 0 3px var(--border-focus);
      }

      /* ========================================
       üìã LIST ITEMS
       ======================================== */

      .user-item {
        background: var(--surface);
        border: 1px solid var(--border);
        border-radius: 12px;
        padding: 1rem 1.25rem;
        margin-bottom: var(--space-sm);
        display: flex;
        align-items: center;
        justify-content: space-between;
        transition: all 0.2s cubic-bezier(0.4, 0, 0.2, 1);
      }

      .user-item:hover {
        background: var(--surface-hover);
        border-color: var(--primary-light);
        transform: translateX(4px);
        box-shadow: var(--shadow-md);
      }

      /* ========================================
       üîî NOTIFICATIONS - Bold & Visible
       ======================================== */

      .notification {
        position: fixed;
        top: 24px;
        right: 24px;
        padding: 1rem 1.5rem;
        border-radius: 16px;
        color: white;
        font-weight: 600;
        z-index: 1000;
        animation: slideInNotification 0.4s cubic-bezier(0.4, 0, 0.2, 1);
        box-shadow: var(--shadow-xl);
        backdrop-filter: blur(10px);
        border: 1px solid rgba(255, 255, 255, 0.2);
      }

      .notification.success {
        background: linear-gradient(135deg, var(--success) 0%, #059669 100%);
        box-shadow:
          var(--shadow-xl),
          0 0 30px rgba(16, 185, 129, 0.4);
      }

      .notification.error {
        background: linear-gradient(135deg, var(--danger) 0%, #dc2626 100%);
        box-shadow:
          var(--shadow-xl),
          0 0 30px rgba(239, 68, 68, 0.4);
      }

      @keyframes slideInNotification {
        from {
          transform: translateX(400px);
          opacity: 0;
        }
        to {
          transform: translateX(0);
          opacity: 1;
        }
      }

      @keyframes slideOut {
        from {
          transform: translateX(0);
          opacity: 1;
        }
        to {
          transform: translateX(400px);
          opacity: 0;
        }
      }

      .toast-notification {
        position: fixed;
        bottom: 24px;
        right: 24px;
        background: linear-gradient(
          135deg,
          rgba(99, 102, 241, 0.95) 0%,
          rgba(79, 70, 229, 0.95) 100%
        );
        color: white;
        backdrop-filter: blur(20px);
        padding: 1rem 1.5rem;
        border-radius: 16px;
        box-shadow:
          var(--shadow-xl),
          0 0 30px rgba(99, 102, 241, 0.4);
        z-index: 100;
        animation: slideInNotification 0.4s cubic-bezier(0.4, 0, 0.2, 1);
        max-width: 400px;
        border: 1px solid rgba(255, 255, 255, 0.2);
      }

      .toast-notification.fade-out {
        animation: slideOut 0.3s ease-out forwards;
      }

      .refresh-overlay {
        position: fixed;
        top: 0;
        left: 0;
        right: 0;
        bottom: 0;
        background: rgba(0, 0, 0, 0.2);
        backdrop-filter: blur(4px);
        z-index: 90;
        animation: fadeIn 0.2s ease-out;
        pointer-events: none;
      }

      .content-wrapper {
        animation: fadeInContent 0.4s cubic-bezier(0.4, 0, 0.2, 1);
      }

      @keyframes fadeIn {
        from {
          opacity: 0;
        }
        to {
          opacity: 1;
        }
      }

      @keyframes fadeInContent {
        from {
          opacity: 0;
          transform: translateY(20px);
        }
        to {
          opacity: 1;
          transform: translateY(0);
        }
      }

      /* ========================================
       ‚ú® ADDITIONAL POLISH
       ======================================== */

      /* Smooth Scrollbar */
      ::-webkit-scrollbar {
        width: 12px;
      }

      ::-webkit-scrollbar-track {
        background: rgba(0, 0, 0, 0.2);
      }

      ::-webkit-scrollbar-thumb {
        background: linear-gradient(
          180deg,
          var(--primary) 0%,
          var(--secondary) 100%
        );
        border-radius: 6px;
        border: 2px solid rgba(0, 0, 0, 0.2);
      }

      ::-webkit-scrollbar-thumb:hover {
        background: linear-gradient(
          180deg,
          var(--primary-light) 0%,
          var(--secondary-light) 100%
        );
      }

      /* Selection */
      ::selection {
        background: var(--primary);
        color: white;
      }

      /* ========================================
       üé® CUSTOMIZATION PANEL
       ======================================== */

      #customizationPanel {
        position: fixed;
        top: 0;
        right: 0;
        width: 420px;
        height: 100vh;
        background: rgba(15, 15, 35, 0.98);
        backdrop-filter: blur(20px);
        border-left: 2px solid var(--border);
        z-index: 9999;
        box-shadow: -4px 0 20px rgba(0, 0, 0, 0.5);
        transition: transform 0.4s ease;
        overflow-y: auto;
      }

      #customizationPanel.minimized {
        transform: translateX(100%);
      }

      #customizeToggleBtn {
        position: fixed;
        top: 20px;
        right: 20px;
        width: 60px;
        height: 60px;
        background: linear-gradient(
          135deg,
          var(--primary) 0%,
          var(--primary-dark) 100%
        );
        border: none;
        border-radius: 50%;
        cursor: pointer;
        z-index: 10000;
        display: flex;
        align-items: center;
        justify-content: center;
        font-size: 28px;
        box-shadow: 0 4px 20px rgba(99, 102, 241, 0.4);
        transition: all 0.3s ease;
      }

      #customizeToggleBtn:hover {
        transform: scale(1.1);
        box-shadow: 0 6px 30px rgba(99, 102, 241, 0.6);
      }

      #customizationPanel:not(.minimized) ~ #customizeToggleBtn {
        right: 440px;
      }

      .customize-inner {
        padding: 30px 24px;
      }

      .customize-header {
        margin-bottom: 30px;
      }

      .customize-header h1 {
        font-size: 22px;
        font-weight: 700;
        background: linear-gradient(
          135deg,
          var(--primary) 0%,
          var(--secondary) 100%
        );
        -webkit-background-clip: text;
        -webkit-text-fill-color: transparent;
        margin-bottom: 16px;
      }

      .user-mode-toggle {
        display: flex;
        gap: 10px;
        align-items: center;
        background: var(--surface);
        padding: 12px 16px;
        border-radius: 12px;
        border: 1px solid var(--border);
      }

      .user-mode-toggle label {
        font-size: 14px;
        font-weight: 500;
        color: var(--text-secondary);
      }

      .toggle-switch {
        position: relative;
        width: 50px;
        height: 26px;
        background: var(--surface);
        border-radius: 13px;
        border: 1px solid var(--border);
        cursor: pointer;
        transition: all 0.3s ease;
      }

      .toggle-switch.active {
        background: linear-gradient(
          135deg,
          var(--primary) 0%,
          var(--primary-dark) 100%
        );
        border-color: var(--primary);
      }

      .toggle-slider {
        position: absolute;
        top: 2px;
        left: 2px;
        width: 20px;
        height: 20px;
        background: white;
        border-radius: 50%;
        transition: all 0.3s ease;
        box-shadow: 0 2px 4px rgba(0, 0, 0, 0.3);
      }

      .toggle-switch.active .toggle-slider {
        transform: translateX(24px);
      }

      .mode-label {
        font-size: 14px;
        font-weight: 600;
        color: var(--primary);
      }

      .customize-section {
        background: var(--surface);
        border: 1px solid var(--border);
        border-radius: 16px;
        padding: 20px;
        margin-bottom: 20px;
      }

      .customize-section h2 {
        font-size: 18px;
        font-weight: 600;
        margin-bottom: 16px;
        color: var(--text-primary);
        display: flex;
        align-items: center;
        gap: 8px;
      }

      .preset-grid {
        display: grid;
        grid-template-columns: 1fr;
        gap: 12px;
      }

      .preset-btn {
        background: var(--surface);
        border: 2px solid var(--border);
        border-radius: 12px;
        padding: 16px;
        cursor: pointer;
        transition: all 0.3s ease;
        text-align: left;
      }

      .preset-btn:hover {
        border-color: var(--primary);
        background: rgba(99, 102, 241, 0.1);
        transform: translateX(4px);
        box-shadow: var(--shadow-lg);
      }

      .preset-btn.active {
        border-color: var(--primary);
        background: linear-gradient(
          135deg,
          rgba(99, 102, 241, 0.2) 0%,
          rgba(236, 72, 153, 0.2) 100%
        );
        box-shadow: 0 0 20px rgba(99, 102, 241, 0.3);
      }

      .preset-name {
        font-weight: 600;
        font-size: 15px;
        color: var(--text-primary);
        margin-bottom: 4px;
      }

      .preset-desc {
        font-size: 12px;
        color: var(--text-secondary);
      }

      .color-preview {
        display: flex;
        gap: 6px;
        margin-top: 10px;
      }

      .color-dot {
        width: 24px;
        height: 24px;
        border-radius: 6px;
        border: 2px solid var(--border);
      }

      .saved-indicator {
        position: fixed;
        bottom: 30px;
        left: 30px;
        background: linear-gradient(135deg, #10b981 0%, #059669 100%);
        color: white;
        padding: 16px 24px;
        border-radius: 12px;
        box-shadow: 0 8px 24px rgba(16, 185, 129, 0.4);
        font-weight: 600;
        opacity: 0;
        transform: translateY(20px);
        transition: all 0.3s ease;
        pointer-events: none;
        z-index: 10001;
      }

      .saved-indicator.show {
        opacity: 1;
        transform: translateY(0);
      }

      @media (max-width: 1400px) {
        #customizationPanel {
          width: 360px;
        }

        #customizationPanel:not(.minimized) ~ #customizeToggleBtn {
          right: 380px;
        }
      }

      /* ========================================
       üìê LAYOUT STYLES
       ======================================== */

      /* Apply layout variables to containers */
      #root > div {
        padding: var(--layout-spacing);
      }

      /* Minimalist Clean Layout */
      body.layout-minimalist .section-card,
      body.layout-minimalist .glass {
        border-radius: var(--card-border-radius);
        padding: var(--card-padding);
        margin-bottom: var(--card-gap);
      }

      body.layout-minimalist .mb-4,
      body.layout-minimalist .mb-6 {
        margin-bottom: var(--card-gap) !important;
      }

      /* Bold Card-Based Layout */
      body.layout-bold-card .section-card,
      body.layout-bold-card .glass {
        border-radius: var(--card-border-radius);
        padding: var(--card-padding);
        margin-bottom: var(--card-gap);
        box-shadow: 0 8px 24px rgba(0, 0, 0, 0.3);
        border: 2px solid var(--border);
      }

      body.layout-bold-card .mb-4,
      body.layout-bold-card .mb-6 {
        margin-bottom: var(--card-gap) !important;
      }

      /* Dashboard Grid Layout */
      body.layout-dashboard-grid .section-card,
      body.layout-dashboard-grid .glass {
        border-radius: var(--card-border-radius);
        padding: var(--card-padding);
        margin-bottom: var(--card-gap);
      }

      body.layout-dashboard-grid .mb-4,
      body.layout-dashboard-grid .mb-6 {
        margin-bottom: var(--card-gap) !important;
      }

      body.layout-dashboard-grid #root > div {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(400px, 1fr));
        gap: var(--card-gap);
      }

      /* List View Clean Layout */
      body.layout-list-view .section-card,
      body.layout-list-view .glass {
        border-radius: var(--card-border-radius);
        padding: var(--card-padding);
        margin-bottom: var(--card-gap);
      }

      body.layout-list-view .mb-4,
      body.layout-list-view .mb-6 {
        margin-bottom: var(--card-gap) !important;
      }

      body.layout-list-view .section-card {
        display: flex;
        flex-direction: column;
        gap: calc(var(--card-gap) / 2);
      }

      /* ========================================
         üß≠ SIDEBAR NAVIGATION
         ======================================== */

      #sidebarNav {
        position: fixed;
        top: 0;
        left: 0;
        height: 100vh;
        background: rgba(15, 15, 35, 0.98);
        backdrop-filter: blur(20px);
        border-right: 2px solid rgba(255, 255, 255, 0.1);
        z-index: 9998;
        box-shadow: 4px 0 20px rgba(0, 0, 0, 0.5);
        transition: all 0.4s ease;
        overflow-y: auto;
        overflow-x: hidden;
      }

      #sidebarNav:not(.collapsed) { width: 280px; }
      #sidebarNav.collapsed { width: 70px; }

      #sidebarNav.collapsed .nav-item-label,
      #sidebarNav.collapsed .sidebar-header-text,
      #sidebarNav.collapsed .sidebar-footer-text {
        opacity: 0;
        width: 0;
        overflow: hidden;
      }

      .sidebar-inner {
        padding: 20px 0;
        display: flex;
        flex-direction: column;
        height: 100%;
      }

      .sidebar-header {
        padding: 0 20px 20px 20px;
        border-bottom: 1px solid rgba(255, 255, 255, 0.1);
        margin-bottom: 20px;
      }

      .sidebar-header-content {
        display: flex;
        align-items: center;
        gap: 12px;
      }

      .sidebar-logo {
        font-size: 32px;
        flex-shrink: 0;
      }

      .sidebar-header-text {
        transition: all 0.4s ease;
        white-space: nowrap;
      }

      .sidebar-header-text h2 {
        font-size: 20px;
        font-weight: 700;
        background: linear-gradient(135deg, #667eea 0%, #ec4899 100%);
        -webkit-background-clip: text;
        -webkit-text-fill-color: transparent;
        margin: 0;
      }

      .sidebar-header-text p {
        font-size: 11px;
        color: rgba(255, 255, 255, 0.5);
        margin: 2px 0 0 0;
      }

      .sidebar-nav-items {
        flex: 1;
        padding: 0 12px;
      }

      .nav-item {
        display: flex;
        align-items: center;
        gap: 12px;
        padding: 14px 16px;
        margin-bottom: 8px;
        border-radius: 12px;
        text-decoration: none;
        color: rgba(255, 255, 255, 0.7);
        transition: all 0.3s ease;
        position: relative;
        cursor: pointer;
        border: 1px solid transparent;
      }

      .nav-item:hover {
        background: rgba(255, 255, 255, 0.1);
        color: white;
        transform: translateX(4px);
      }

      .nav-item.active {
        background: linear-gradient(135deg, rgba(102, 126, 234, 0.3) 0%, rgba(236, 72, 153, 0.3) 100%);
        color: white;
        border-color: rgba(102, 126, 234, 0.5);
        box-shadow: 0 0 20px rgba(102, 126, 234, 0.2);
      }

      .nav-item-icon {
        font-size: 22px;
        flex-shrink: 0;
        width: 24px;
        text-align: center;
      }

      .nav-item-label {
        font-weight: 600;
        font-size: 15px;
        white-space: nowrap;
        transition: all 0.4s ease;
      }

      .sidebar-footer {
        padding: 20px;
        border-top: 1px solid rgba(255, 255, 255, 0.1);
        margin-top: auto;
      }

      .sidebar-toggle-btn {
        width: 100%;
        padding: 12px;
        background: rgba(255, 255, 255, 0.05);
        border: 1px solid rgba(255, 255, 255, 0.1);
        border-radius: 10px;
        color: rgba(255, 255, 255, 0.7);
        cursor: pointer;
        transition: all 0.3s ease;
        display: flex;
        align-items: center;
        justify-content: center;
        gap: 8px;
        font-size: 14px;
        font-weight: 600;
      }

      .sidebar-toggle-btn:hover {
        background: rgba(255, 255, 255, 0.1);
        color: white;
      }

      .sidebar-footer-text {
        transition: all 0.4s ease;
        white-space: nowrap;
      }

      /* Adjust main content when sidebar is expanded */
      body:not(.sidebar-collapsed) #root {
        margin-left: 280px;
        transition: margin-left 0.4s ease;
      }

      body.sidebar-collapsed #root {
        margin-left: 70px;
        transition: margin-left 0.4s ease;
      }

      /* Responsive behavior */
      @media (max-width: 1024px) {
        #sidebarNav:not(.collapsed) { width: 280px; }
        body:not(.sidebar-collapsed) #root { margin-left: 0; }
        body.sidebar-collapsed #root { margin-left: 0; }
        #sidebarNav.collapsed { transform: translateX(-100%); }
      }
    </style>
  </head>
  <body>
    <!-- Sidebar Navigation -->
    <div id="sidebarNav" class="">
      <div class="sidebar-inner">
        <div class="sidebar-header">
          <div class="sidebar-header-content">
            <div class="sidebar-logo">ü§ñ</div>
            <div class="sidebar-header-text">
              <h2>BottyOtty</h2>
              <p>Task Manager</p>
            </div>
          </div>
        </div>

        <div class="sidebar-nav-items">
          <!-- Dashboard - Mark as active on Dashboard page -->
          <a href="BottyOtty Dashboard v18.html" class="nav-item">
            <span class="nav-item-icon">üìä</span>
            <span class="nav-item-label">Dashboard</span>
          </a>

          <!-- Admin Panel - Mark as active on Admin page -->
          <a href="Admin Panel v18.html" class="nav-item active">
            <span class="nav-item-icon">‚öôÔ∏è</span>
            <span class="nav-item-label">Admin Panel</span>
          </a>

          <!-- Quick Launch - Mark as active on Quick Launch page -->
          <a href="Quick Launch v18.html" class="nav-item">
            <span class="nav-item-icon">üöÄ</span>
            <span class="nav-item-label">Quick Launch</span>
          </a>

          <!-- Reports - Mark as active on Reports page -->
          <a href="BottyOtty Reports v18.html" class="nav-item">
            <span class="nav-item-icon">üìà</span>
            <span class="nav-item-label">Reports</span>
          </a>

          <!-- Help - Mark as active on Help page -->
          <a href="BottyOtty Help & User Guide v18.html" class="nav-item">
            <span class="nav-item-icon">‚ùì</span>
            <span class="nav-item-label">Help Guide</span>
          </a>
        </div>

        <div class="sidebar-footer">
          <button onclick="toggleSidebar()" class="sidebar-toggle-btn">
            <span id="sidebarToggleIcon">‚Üê</span>
            <span class="sidebar-footer-text" id="sidebarToggleText">Collapse</span>
          </button>
        </div>
      </div>
    </div>

    <!-- Customization Toggle Button -->
    <button id="customizeToggleBtn" onclick="toggleCustomizationPanel()">
      ‚öôÔ∏è
    </button>

    <!-- Customization Panel -->
    <div id="customizationPanel" class="minimized">
      <div class="customize-inner">
        <div class="customize-header">
          <h1>üé® Customization</h1>
          <div class="user-mode-toggle">
            <label>View as:</label>
            <div
              class="toggle-switch"
              id="userModeToggle"
              onclick="toggleUserMode()"
            >
              <div class="toggle-slider"></div>
            </div>
            <span class="mode-label" id="modeLabel">Admin</span>
          </div>
        </div>

        <!-- Theme Presets -->
        <div class="customize-section">
          <h2>üé® Theme Presets</h2>
          <div class="preset-grid">
            <div class="preset-btn active" onclick="applyTheme('dark-mode')">
              <div class="preset-name">Dark Mode</div>
              <div class="preset-desc">Professional navy & orange</div>
              <div class="color-preview">
                <div class="color-dot" style="background: #324973"></div>
                <div class="color-dot" style="background: #f37b28"></div>
                <div class="color-dot" style="background: #001541"></div>
              </div>
            </div>

            <div class="preset-btn" onclick="applyTheme('light-clean')">
              <div class="preset-name">Light & Clean</div>
              <div class="preset-desc">White background, navy text</div>
              <div class="color-preview">
                <div class="color-dot" style="background: #ffffff"></div>
                <div class="color-dot" style="background: #324973"></div>
                <div class="color-dot" style="background: #ff8b01"></div>
              </div>
            </div>

            <div class="preset-btn" onclick="applyTheme('warm-welcoming')">
              <div class="preset-name">Warm & Welcoming</div>
              <div class="preset-desc">Light orange tints</div>
              <div class="color-preview">
                <div class="color-dot" style="background: #fff5eb"></div>
                <div class="color-dot" style="background: #ffbc6c"></div>
                <div class="color-dot" style="background: #324973"></div>
              </div>
            </div>

            <div class="preset-btn" onclick="applyTheme('premium-dark')">
              <div class="preset-name">Premium Dark</div>
              <div class="preset-desc">Dark navy with glows</div>
              <div class="color-preview">
                <div class="color-dot" style="background: #001541"></div>
                <div class="color-dot" style="background: #ff8b01"></div>
                <div class="color-dot" style="background: #566685"></div>
              </div>
            </div>
          </div>
        </div>

        <!-- Layout Options -->
        <div class="customize-section">
          <h2>üìê Layout Options</h2>
          <div class="preset-grid">
            <div class="preset-btn active" onclick="applyLayout('minimalist')">
              <div class="preset-name">Minimalist Clean</div>
              <div class="preset-desc">Spacious & simple</div>
            </div>

            <div class="preset-btn" onclick="applyLayout('bold-card')">
              <div class="preset-name">Bold Card-Based</div>
              <div class="preset-desc">Strong visual cards</div>
            </div>

            <div class="preset-btn" onclick="applyLayout('dashboard-grid')">
              <div class="preset-name">Dashboard Grid</div>
              <div class="preset-desc">Organized grid layout</div>
            </div>

            <div class="preset-btn" onclick="applyLayout('list-view')">
              <div class="preset-name">List View Clean</div>
              <div class="preset-desc">Compact list format</div>
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- Saved Indicator -->
    <div class="saved-indicator" id="savedIndicator">‚úì Preferences Saved</div>

    <div id="root"></div>

    <!-- Customization System JavaScript -->
    <script>
      // Theme configurations
      const THEMES = {
        "dark-mode": {
          name: "Dark Mode",
          primary: "#324973",
          primaryLight: "#566685",
          primaryDark: "#001541",
          secondary: "#ec4899",
          secondaryLight: "#f472b6",
          secondaryDark: "#db2777",
          accent: "#f37b28",
          accentLight: "#ffbc6c",
          accentDark: "#ff8b01",
          success: "#10b981",
          warning: "#f59e0b",
          danger: "#ef4444",
          bgPrimary: "#0f0f23",
          bgSecondary: "#1a1a3e",
          bgTertiary: "#252554",
          surface: "rgba(255, 255, 255, 0.03)",
          surfaceHover: "rgba(255, 255, 255, 0.06)",
          surfaceActive: "rgba(255, 255, 255, 0.09)",
          textPrimary: "#ffffff",
          textSecondary: "rgba(255, 255, 255, 0.7)",
          textTertiary: "rgba(255, 255, 255, 0.4)",
          border: "rgba(255, 255, 255, 0.08)",
          borderFocus: "rgba(99, 102, 241, 0.4)",
        },
        "light-clean": {
          name: "Light & Clean",
          primary: "#324973",
          primaryLight: "#566685",
          primaryDark: "#001541",
          secondary: "#f37b28",
          secondaryLight: "#ffbc6c",
          secondaryDark: "#ff8b01",
          accent: "#ff8b01",
          accentLight: "#ffbc6c",
          accentDark: "#f37b28",
          success: "#10b981",
          warning: "#f59e0b",
          danger: "#ef4444",
          bgPrimary: "#ffffff",
          bgSecondary: "#f8f9fa",
          bgTertiary: "#e9ecef",
          surface: "rgba(50, 73, 115, 0.05)",
          surfaceHover: "rgba(50, 73, 115, 0.08)",
          surfaceActive: "rgba(50, 73, 115, 0.12)",
          textPrimary: "#000000", // Changed to pure black for better contrast
          textSecondary: "#001541", // Changed to darker navy
          textTertiary: "#324973", // Darker for readability
          border: "rgba(50, 73, 115, 0.2)",
          borderFocus: "rgba(255, 139, 1, 0.5)",
        },
        "warm-welcoming": {
          name: "Warm & Welcoming",
          primary: "#324973",
          primaryLight: "#566685",
          primaryDark: "#001541",
          secondary: "#f37b28",
          secondaryLight: "#ff8b01",
          secondaryDark: "#cc6622",
          accent: "#f37b28",
          accentLight: "#ff8b01",
          accentDark: "#cc6622",
          success: "#10b981",
          warning: "#f59e0b",
          danger: "#ef4444",
          bgPrimary: "#fff5eb",
          bgSecondary: "#ffe5c7",
          bgTertiary: "#ffd9a3",
          surface: "rgba(255, 139, 1, 0.08)",
          surfaceHover: "rgba(255, 139, 1, 0.12)",
          surfaceActive: "rgba(255, 139, 1, 0.16)",
          textPrimary: "#000000", // Changed to pure black
          textSecondary: "#001541", // Much darker for contrast
          textTertiary: "#324973", // Darker
          border: "rgba(243, 123, 40, 0.25)",
          borderFocus: "rgba(243, 123, 40, 0.5)",
        },
        "premium-dark": {
          name: "Premium Dark",
          primary: "#001541",
          primaryLight: "#324973",
          primaryDark: "#000a1f",
          secondary: "#ff8b01",
          secondaryLight: "#ffbc6c",
          secondaryDark: "#f37b28",
          accent: "#ff8b01",
          accentLight: "#ffbc6c",
          accentDark: "#f37b28",
          success: "#10b981",
          warning: "#f59e0b",
          danger: "#ef4444",
          bgPrimary: "#000a1f",
          bgSecondary: "#001541",
          bgTertiary: "#001d5a",
          surface: "rgba(255, 139, 1, 0.08)", // Increased for visibility
          surfaceHover: "rgba(255, 139, 1, 0.12)",
          surfaceActive: "rgba(255, 139, 1, 0.16)",
          textPrimary: "#ffffff",
          textSecondary: "rgba(255, 255, 255, 0.85)", // Increased from 0.7 for better readability
          textTertiary: "rgba(255, 255, 255, 0.65)", // Increased from #566685
          border: "rgba(255, 139, 1, 0.2)",
          borderFocus: "rgba(255, 139, 1, 0.5)",
        },
      };

      // Layout configurations - Made MORE distinct for visual clarity
      const LAYOUTS = {
        minimalist: {
          name: "Minimalist Clean",
          spacing: "spacious",
          cardStyle: "minimal",
          borderRadius: "24px", // Increased from 16px
          cardPadding: "48px", // Increased from 32px - VERY spacious
          gap: "32px", // Increased from 24px
        },
        "bold-card": {
          name: "Bold Card-Based",
          spacing: "comfortable",
          cardStyle: "bold",
          borderRadius: "20px", // Kept distinct
          cardPadding: "32px", // Kept moderate
          gap: "24px", // Comfortable spacing
        },
        "dashboard-grid": {
          name: "Dashboard Grid",
          spacing: "compact",
          cardStyle: "grid",
          borderRadius: "12px", // Sharp corners for grid feel
          cardPadding: "20px", // Compact
          gap: "16px", // Tight grid spacing
        },
        "list-view": {
          name: "List View Clean",
          spacing: "tight",
          cardStyle: "list",
          borderRadius: "6px", // Decreased from 8px - very sharp
          cardPadding: "12px", // Decreased from 16px - tight list
          gap: "8px", // Decreased from 12px - minimal gaps
        },
      };

      // State management
      let currentTheme = "dark-mode";
      let currentLayout = "minimalist";
      let isUserMode = false;
      let adminSettings = { theme: "dark-mode", layout: "minimalist" };
      let userSettings = { theme: null, layout: null };

      // Initialize
      function initCustomization() {
        loadSettings();
        const effectiveTheme =
          isUserMode && userSettings.theme
            ? userSettings.theme
            : adminSettings.theme;
        const effectiveLayout =
          isUserMode && userSettings.layout
            ? userSettings.layout
            : adminSettings.layout;
        applyTheme(effectiveTheme, false);
        applyLayout(effectiveLayout, false);
      }

      // Toggle customization panel
      function toggleCustomizationPanel() {
        const panel = document.getElementById("customizationPanel");
        const btn = document.getElementById("customizeToggleBtn");
        panel.classList.toggle("minimized");
        btn.textContent = panel.classList.contains("minimized") ? "‚öôÔ∏è" : "‚úï";
      }

      // Apply theme
      function applyTheme(themeId, save = true) {
        const theme = THEMES[themeId];
        if (!theme) return;

        const root = document.documentElement;

        // Update all CSS variables
        Object.keys(theme).forEach((key) => {
          if (key !== "name") {
            const cssVarName =
              "--" + key.replace(/([A-Z])/g, "-$1").toLowerCase();
            root.style.setProperty(cssVarName, theme[key]);
          }
        });

        // Update body background for light themes
        if (themeId === "light-clean" || themeId === "warm-welcoming") {
          document.body.style.background = theme.bgPrimary;
        } else {
          document.body.style.background = `linear-gradient(135deg, ${theme.bgPrimary} 0%, ${theme.bgSecondary} 25%, ${theme.bgTertiary} 50%, ${theme.bgSecondary} 75%, ${theme.bgPrimary} 100%)`;
          document.body.style.backgroundSize = "200% 200%";
        }

        // Update active button
        document
          .querySelectorAll(".preset-btn")
          .forEach((btn) => btn.classList.remove("active"));
        event?.target?.closest(".preset-btn")?.classList.add("active");

        currentTheme = themeId;

        if (save) {
          saveSettings();
          showSavedIndicator();
        }
      }

      // Apply layout
      function applyLayout(layoutId, save = true) {
        const layout = LAYOUTS[layoutId];
        if (!layout) return;

        const root = document.documentElement;

        // Update layout CSS variables
        root.style.setProperty(
          "--layout-spacing",
          layout.spacing === "spacious"
            ? "32px"
            : layout.spacing === "comfortable"
              ? "24px"
              : layout.spacing === "compact"
                ? "16px"
                : "12px",
        );
        root.style.setProperty("--card-border-radius", layout.borderRadius);
        root.style.setProperty("--card-padding", layout.cardPadding);
        root.style.setProperty("--card-gap", layout.gap);

        // Update body class for layout-specific styles
        document.body.className = document.body.className.replace(
          /layout-\w+/g,
          "",
        );
        document.body.classList.add(`layout-${layoutId}`);

        // Update active button in layout section
        const layoutBtns = document.querySelectorAll(
          '.customize-section:has(h2:contains("Layout")) .preset-btn',
        );
        if (layoutBtns.length === 0) {
          // Fallback: get all preset buttons and find the ones in the layout section
          const allSections = document.querySelectorAll(".customize-section");
          allSections.forEach((section) => {
            const heading = section.querySelector("h2");
            if (heading && heading.textContent.includes("Layout")) {
              section
                .querySelectorAll(".preset-btn")
                .forEach((btn) => btn.classList.remove("active"));
              const clickedBtn = event?.target?.closest(".preset-btn");
              if (clickedBtn) clickedBtn.classList.add("active");
            }
          });
        }

        currentLayout = layoutId;

        if (save) {
          saveSettings();
          showSavedIndicator();
        }
      }

      // Toggle user mode
      function toggleUserMode() {
        isUserMode = !isUserMode;
        const toggle = document.getElementById("userModeToggle");
        const label = document.getElementById("modeLabel");

        toggle.classList.toggle("active");
        label.textContent = isUserMode ? "User" : "Admin";

        // Apply appropriate settings
        const effectiveTheme =
          isUserMode && userSettings.theme
            ? userSettings.theme
            : adminSettings.theme;
        const effectiveLayout =
          isUserMode && userSettings.layout
            ? userSettings.layout
            : adminSettings.layout;
        applyTheme(effectiveTheme, false);
        applyLayout(effectiveLayout, false);
      }

      // Save settings
      function saveSettings() {
        if (isUserMode) {
          userSettings.theme = currentTheme;
          userSettings.layout = currentLayout;
          localStorage.setItem(
            "bottyotty_user_settings",
            JSON.stringify(userSettings),
          );
        } else {
          adminSettings.theme = currentTheme;
          adminSettings.layout = currentLayout;
          localStorage.setItem(
            "bottyotty_admin_settings",
            JSON.stringify(adminSettings),
          );
        }
      }

      // Load settings
      function loadSettings() {
        const savedAdmin = localStorage.getItem("bottyotty_admin_settings");
        const savedUser = localStorage.getItem("bottyotty_user_settings");

        if (savedAdmin) {
          try {
            const parsed = JSON.parse(savedAdmin);
            adminSettings = {
              theme: parsed.theme || "dark-mode",
              layout: parsed.layout || "minimalist",
            };
          } catch (e) {
            console.error("Failed to parse admin settings", e);
          }
        }

        if (savedUser) {
          try {
            const parsed = JSON.parse(savedUser);
            userSettings = {
              theme: parsed.theme || null,
              layout: parsed.layout || null,
            };
          } catch (e) {
            console.error("Failed to parse user settings", e);
          }
        }
      }

      // Show saved indicator
      function showSavedIndicator() {
        const indicator = document.getElementById("savedIndicator");
        indicator.classList.add("show");
        setTimeout(() => {
          indicator.classList.remove("show");
        }, 2000);
      }

      // Initialize on page load
      if (document.readyState === "loading") {
        document.addEventListener("DOMContentLoaded", initCustomization);
      } else {
        initCustomization();
      }
    </script>

    <script type="text/babel">
      const { useState, useEffect } = React;

      // Accordion Component for clean collapsible sections
      function Accordion({ title, children, defaultOpen = false, icon = "" }) {
        const [isOpen, setIsOpen] = useState(defaultOpen);

        return (
          <div className="section-card mb-4">
            <button
              onClick={() => setIsOpen(!isOpen)}
              className="w-full flex items-center justify-between text-left"
            >
              <h3 className="text-xl font-bold text-white flex items-center gap-2">
                {icon && <span>{icon}</span>}
                <span>{title}</span>
              </h3>
              <span
                className="text-2xl text-white transition-transform duration-200"
                style={{
                  transform: isOpen ? "rotate(180deg)" : "rotate(0deg)",
                }}
              >
                ‚ñº
              </span>
            </button>
            {isOpen && (
              <div className="mt-4 pt-4 border-t border-white border-opacity-20">
                {children}
              </div>
            )}
          </div>
        );
      }

      // Configuration
      const BOT_CONFIG = {
        apiUrl: "http://localhost:5000",
        apiKey: "", // Leave empty if not using API key auth yet
      };

      const STORAGE_KEY_CONFIG = "bottyotty-admin-config";

      // Team members for permission configuration
      const TEAM_MEMBERS = [
        { name: "Dakota", discordId: "220326831524544513" },
        { name: "Preston", discordId: "1060679174945259520" },
        { name: "Dahlya", discordId: "367146081248608257" },
        { name: "Araceli", discordId: "343265486919958529" },
        { name: "Terry", discordId: "528700749555957771" },
        { name: "Cole", discordId: "1317654177412939799" },
        { name: "Devin", discordId: "680757425514479662" },
        { name: "Tony", discordId: "1351211310796242977" },
        { name: "Chase", discordId: "1297804315041333354" },
        { name: "Megan", discordId: "928725439059464222" },
        { name: "Adam", discordId: "353922166250799106" },
        { name: "Amanda", discordId: "1203398569575452745" },
        { name: "Ash", discordId: "289212918615244801" },
        { name: "Caleb", discordId: "423987581483483146" },
        { name: "Charles", discordId: "262990512506667009" },
        { name: "Dylan", discordId: "1229532562200723556" },
        { name: "Edward", discordId: "1277407641479548928" },
        { name: "Fernando", discordId: "1242209699135230012" },
        { name: "Hector", discordId: "1102917622443540511" },
        { name: "Isiac", discordId: "1167611497812340813" },
        { name: "Jeff", discordId: "1239615123765596291" },
        { name: "Joey", discordId: "1228184859772588042" },
        { name: "Jose", discordId: "1060679251235442719" },
        { name: "Matt Kiger", discordId: "792234508736135178" },
        { name: "Lauren", discordId: "931331954220101632" },
        { name: "Logan", discordId: "934632146134519820" },
        { name: "Nathaniel", discordId: "765857167290662913" },
        { name: "Presley", discordId: "1189283572100645005" },
        { name: "Rachel", discordId: "1363874133410189443" },
        { name: "Rafael", discordId: "1354099291177750690" },
        { name: "Raymond", discordId: "1281670710271410279" },
        { name: "Ric", discordId: "1363551896530587760" },
        { name: "Ryan M", discordId: "326967402606624769" },
        { name: "Ryan P", discordId: "1422223702040383529" },
        { name: "Sam", discordId: "883800050524905552" },
        { name: "Sean", discordId: "1385598726361583616" },
        { name: "Summer", discordId: "908784314056052748" },
        { name: "Trevor", discordId: "1127672956051525755" },
        { name: "Tyler", discordId: "1119490397626974280" },
      ];

      // Default user configuration
      const DEFAULT_USER_CONFIG = {
        visibleTabs: [
          "incoming",
          "my-tasks",
          "assigned-out",
          "pool",
          "team",
          "mentions",
          "future-tasks",
          "calendar",
        ],
        canViewTeamActivity: false,
        isAdmin: false,
        campfireChannel: null,
        photoTasksChannel: null,
        // Delete permissions
        canDeleteOwnTasks: true, // Everyone can delete their own tasks
        canDeletePoolTasks: false, // Only managers/leads can delete pool tasks
        canDeleteOthersTasks: false, // Only specific users can delete other's tasks
        canDeleteAllTasks: false, // Only super admins can delete anything
        // Trash & Completed visibility
        canViewAllTrash: false, // Only admins see everyone's deleted tasks
        canViewAllCompleted: false, // Only admins see everyone's completed tasks
        // Quick Launch (Bulk Import)
        canBulkImport: false, // Only certain users can access Quick Launch
        canDeletePresets: false, // Can delete column mapping presets in Quick Launch
        // Reports & Analytics
        canViewAnalytics: false, // Can access Reports & Analytics page
        canViewTransferMetrics: false, // Can view transfer accept/deny metrics
        canViewStatusMetrics: false, // Can view swamped/busy status trends
        canViewEscalations: false, // Can view escalation reports
        canViewTeamReports: false, // Can view individual team member reports
        canViewPerformanceMetrics: false, // Can view performance metrics (completion time, response time)
        canViewPoolAnalytics: false, // Can view pool task analytics (claim rates, wait times)
        canViewSkillPriority: false, // Can view skill matching and priority distribution
        canViewTrends: false, // Can view trends and patterns (overdue, help, assignments)
        canExportReports: false, // Can export reports to CSV/PDF
      };

      function App() {
        // State
        const [activeSection, setActiveSection] = useState("appearance");
        const [sidebarSearch, setSidebarSearch] = useState("");
        const [notification, setNotification] = useState(null);
        const [loading, setLoading] = useState(false);
        const [toastMessage, setToastMessage] = useState(null);
        const [isRefreshing, setIsRefreshing] = useState(false);

        // Sidebar state
        const [sidebarCollapsed, setSidebarCollapsed] = useState(() => {
          const saved = localStorage.getItem('bottyotty-sidebar-collapsed');
          return saved === 'true';
        });

        // Appearance Settings
        const [gradientStart, setGradientStart] = useState("#667eea");
        const [gradientEnd, setGradientEnd] = useState("#764ba2");
        const [darkMode, setDarkMode] = useState(false);
        const [textBrightness, setTextBrightness] = useState("200"); // gray-200 default
        const [headingColor, setHeadingColor] = useState("#ffffff"); // white default
        const [labelColor, setLabelColor] = useState("#d1d5db"); // gray-300 default
        const [categoryColors, setCategoryColors] = useState({
          Design: { bg: "#fce7f3", text: "#be185d", border: "#ec4899" },
          Development: { bg: "#dbeafe", text: "#1e40af", border: "#3b82f6" },
          "Bug Fix": { bg: "#fee2e2", text: "#991b1b", border: "#ef4444" },
          Feature: { bg: "#d1fae5", text: "#065f46", border: "#10b981" },
          Documentation: { bg: "#e0e7ff", text: "#3730a3", border: "#6366f1" },
          Meeting: { bg: "#fef3c7", text: "#92400e", border: "#f59e0b" },
          General: { bg: "#f3f4f6", text: "#374151", border: "#9ca3af" },
        });

        // Bot Config Settings
        const [autoSync, setAutoSync] = useState(true);
        const [syncInterval, setSyncInterval] = useState(30);
        const [apiUrl, setApiUrl] = useState(
          "https://bottyotty-production.up.railway.app",
        );

        // Users & Permissions
        const [authorizedUsers, setAuthorizedUsers] = useState([]);
        const [campfireUsers, setCampfireUsers] = useState([]);
        const [newUserId, setNewUserId] = useState("");
        const [newUserName, setNewUserName] = useState("");

        // Channels
        const [poolChannels, setPoolChannels] = useState([]);
        const [personalChannels, setPersonalChannels] = useState([]);
        const [newChannelName, setNewChannelName] = useState("");
        const [newChannelId, setNewChannelId] = useState("");

        // Custom Reactions
        const [reactionAssignments, setReactionAssignments] = useState([]);
        const [newReactionEmoji, setNewReactionEmoji] = useState("");
        const [newReactionUser, setNewReactionUser] = useState("");
        const [newReactionUserId, setNewReactionUserId] = useState("");
        const [newReactionChannelId, setNewReactionChannelId] = useState("");

        // Categories
        const [categories, setCategories] = useState([
          "Design",
          "Development",
          "Bug Fix",
          "Feature",
          "Documentation",
          "Meeting",
          "General",
        ]);
        const [newCategory, setNewCategory] = useState("");

        // Quick Filters
        const [quickFilters, setQuickFilters] = useState([
          { id: "all", label: "ALL", enabled: true },
          { id: "today", label: "TODAY", enabled: true },
          { id: "tomorrow", label: "TOMORROW", enabled: true },
          { id: "this-week", label: "THIS WEEK", enabled: true },
          { id: "overdue", label: "OVERDUE", enabled: true },
        ]);

        // Team Management (Dynamic team members)
        const [teamMembers, setTeamMembers] = useState(() => {
          // Try to load from localStorage first
          const saved = localStorage.getItem("bottyotty-team-members");
          if (saved) {
            try {
              return JSON.parse(saved);
            } catch (e) {
              console.error("Failed to load team members:", e);
            }
          }
          // Fall back to hardcoded TEAM_MEMBERS
          return [...TEAM_MEMBERS];
        });
        const [newMemberName, setNewMemberName] = useState("");
        const [newMemberDiscordId, setNewMemberDiscordId] = useState("");

        // Advanced Permissions
        const [selectedPermissionUser, setSelectedPermissionUser] = useState(
          teamMembers[0]?.name || "",
        );
        const [userConfigs, setUserConfigs] = useState(() => {
          // Initialize with default config for each team member
          const configs = {};
          teamMembers.forEach((member) => {
            configs[member.name] = { ...DEFAULT_USER_CONFIG };
          });
          return configs;
        });

        // General Template (for applying to all users)
        const [generalTemplate, setGeneralTemplate] = useState(() => {
          const saved = localStorage.getItem("bottyotty-permission-template");
          if (saved) {
            try {
              return JSON.parse(saved);
            } catch (e) {
              console.error("Failed to load permission template:", e);
            }
          }
          return { ...DEFAULT_USER_CONFIG };
        });

        // Bot Messages Management
        const [botMessages, setBotMessages] = useState({
          transferRequest:
            "üîÑ Transfer Request: Task #{taskNumber}\n**{from}** wants to transfer this task to you",
          transferAccepted:
            "‚úÖ Transfer Accepted: Task #{taskNumber}\n**{to}** accepted the task transfer",
          transferDenied:
            "‚ùå Transfer Denied: Task #{taskNumber}\n**{to}** denied the task transfer",
          managerEscalation:
            "‚è∞ Task Escalation Alert\nTask #{taskNumber} needs attention\nAssigned to: {assignee}\nHours since update: {hours}",
          poolRelease:
            "üì§ Task Released to Pool: #{taskNumber}\nTask automatically released due to {reason}",
          helpOffered:
            "ü§ù Help Offered: Task #{taskNumber}\n**{offeredBy}** is requesting help",
          helpAccepted:
            "‚úÖ Help Accepted: Task #{taskNumber}\n**{acceptedBy}** is helping with this task",
          swampedAlert:
            "üÜò Team Member Needs Help\n**{userName}** marked themselves as SWAMPED",
        });
        const [editingMessage, setEditingMessage] = useState(null);
        const [newMessageKey, setNewMessageKey] = useState("");
        const [newMessageValue, setNewMessageValue] = useState("");

        // Departments & Roles
        const [departments, setDepartments] = useState([
          "Office",
          "Pest",
          "Marketing",
          "Management",
        ]);
        const [roles, setRoles] = useState([
          "User",
          "Phone Sales",
          "Technician",
          "Manager",
          "Admin",
        ]);
        const [newDepartment, setNewDepartment] = useState("");
        const [newRole, setNewRole] = useState("");
        const [departmentPermissions, setDepartmentPermissions] = useState({});
        const [selectedDepartment, setSelectedDepartment] = useState("Office");

        // Skills Management
        const [availableSkills, setAvailableSkills] = useState([
          "Design",
          "Development",
          "Bug Fix",
          "Feature",
          "Documentation",
          "Meeting",
          "General",
        ]);
        const [skillCategoryLinks, setSkillCategoryLinks] = useState({
          Design: ["Design"],
          Development: ["Development", "Feature", "Bug Fix"],
          "Bug Fix": ["Bug Fix", "Development"],
          Feature: ["Feature", "Development"],
          Documentation: ["Documentation"],
          Meeting: ["Meeting", "General"],
          General: ["General"],
        });

        // Inactivity/Alert Settings
        const [inactivitySettings, setInactivitySettings] = useState({
          regularUser: {
            firstAlert: 24,
            managerEscalation: 48,
            poolRelease: 72,
          },
          admin: {
            firstAlert: 48,
            managerEscalation: 96,
            poolRelease: 144,
          },
          enabled: true,
          checkInterval: 30, // minutes
        });

        // Priority Time Limits
        const [priorityTimeLimits, setPriorityTimeLimits] = useState({
          urgent: { hours: 4, escalateAfter: 6 },
          high: { hours: 24, escalateAfter: 36 },
          medium: { hours: 72, escalateAfter: 96 },
          low: { hours: 168, escalateAfter: 240 }, // 7 days, 10 days
        });

        // Log Visibility Settings
        const [logVisibilitySettings, setLogVisibilitySettings] = useState({
          whoCanViewLogs: "admins", // 'admins', 'managers', 'everyone'
          showTaskCreationLogs: true,
          showTaskCompletionLogs: true,
          showTaskTransferLogs: true,
          showTaskEscalationLogs: true,
          logRetentionDays: 90,
        });

        // Multi-step Task Settings
        const [multiStepTaskSettings, setMultiStepTaskSettings] = useState({
          enabled: true,
          allowedPriorities: ["low", "medium"], // Only low and medium can be multi-step
          requireNotes: true, // Require notes when passing to next person
          notifyNextPerson: true,
          allowSkipSteps: false,
          maxSteps: 5,
        });

        // Discord ID Configuration
        const [discordConfig, setDiscordConfig] = useState({
          threads: {},
          channels: {},
          users: {},
        });

        // Dashboard Features (Custom Pages)
        const [customPages, setCustomPages] = useState([]);
        const [newPageName, setNewPageName] = useState("");
        const [newPageDescription, setNewPageDescription] = useState("");
        const [newPageRules, setNewPageRules] = useState("");

        // Sidebar toggle effect
        useEffect(() => {
          const sidebar = document.getElementById('sidebarNav');
          const icon = document.getElementById('sidebarToggleIcon');
          const text = document.getElementById('sidebarToggleText');

          if (sidebarCollapsed) {
            document.body.classList.add('sidebar-collapsed');
            if (sidebar) sidebar.classList.add('collapsed');
            if (icon) icon.textContent = '‚Üí';
            if (text) text.textContent = 'Expand';
          } else {
            document.body.classList.remove('sidebar-collapsed');
            if (sidebar) sidebar.classList.remove('collapsed');
            if (icon) icon.textContent = '‚Üê';
            if (text) text.textContent = 'Collapse';
          }
          localStorage.setItem('bottyotty-sidebar-collapsed', sidebarCollapsed);
        }, [sidebarCollapsed]);

        // Sidebar toggle function - make it globally accessible
        useEffect(() => {
          window.toggleSidebar = () => {
            setSidebarCollapsed(prev => !prev);
          };
        }, []);

        // Load saved config on mount
        useEffect(() => {
          // Load admin config (appearance, bot settings, etc.)
          const saved = localStorage.getItem(STORAGE_KEY_CONFIG);
          if (saved) {
            const config = JSON.parse(saved);

            // Handle new nested format OR old flat format (backwards compatible)
            const appearance = config.appearance || config;
            const botConfig = config.botConfig || config;

            if (appearance.gradientStart)
              setGradientStart(appearance.gradientStart);
            if (appearance.gradientEnd) setGradientEnd(appearance.gradientEnd);
            if (appearance.darkMode !== undefined)
              setDarkMode(appearance.darkMode);
            if (appearance.textBrightness)
              setTextBrightness(appearance.textBrightness);
            if (appearance.headingColor)
              setHeadingColor(appearance.headingColor);
            if (appearance.labelColor) setLabelColor(appearance.labelColor);
            if (appearance.categoryColors)
              setCategoryColors(appearance.categoryColors);
            if (botConfig.autoSync !== undefined)
              setAutoSync(botConfig.autoSync);
            if (botConfig.syncInterval) setSyncInterval(botConfig.syncInterval);
            if (botConfig.apiUrl) setApiUrl(botConfig.apiUrl);
            if (botConfig.messages) setBotMessages(botConfig.messages);
            if (config.categories) setCategories(config.categories);
            if (config.quickFilters) setQuickFilters(config.quickFilters);

            // Load users, channels, reactions from saved config
            if (config.users) {
              if (config.users.authorized)
                setAuthorizedUsers(config.users.authorized);
              if (config.users.campfire)
                setCampfireUsers(config.users.campfire);
            }
            if (config.channels) {
              if (config.channels.pools) setPoolChannels(config.channels.pools);
              if (config.channels.personal)
                setPersonalChannels(config.channels.personal);
            }
            if (config.reactions) {
              setReactionAssignments(config.reactions);
            }

            // Load new features
            if (config.departments) setDepartments(config.departments);
            if (config.roles) setRoles(config.roles);
            if (config.departmentPermissions)
              setDepartmentPermissions(config.departmentPermissions);
            if (config.skills) setAvailableSkills(config.skills);
            if (config.skillCategoryLinks)
              setSkillCategoryLinks(config.skillCategoryLinks);
            if (config.inactivitySettings)
              setInactivitySettings(config.inactivitySettings);
            if (config.customPages) setCustomPages(config.customPages);
            if (config.priorityTimeLimits)
              setPriorityTimeLimits(config.priorityTimeLimits);
            if (config.logVisibilitySettings)
              setLogVisibilitySettings(config.logVisibilitySettings);
            if (config.multiStepTaskSettings)
              setMultiStepTaskSettings(config.multiStepTaskSettings);
            if (config.discordConfig) setDiscordConfig(config.discordConfig);
          }

          // Load user permissions from Dashboard's localStorage key
          const userPerms = localStorage.getItem("bottyotty-user-permissions");
          if (userPerms) {
            try {
              const parsed = JSON.parse(userPerms);
              // Merge loaded permissions with defaults for all team members
              const merged = {};
              TEAM_MEMBERS.forEach((member) => {
                // CRITICAL: Merge defaults FIRST, then saved config on top
                // This ensures new permission fields are present
                const savedConfig = parsed[member.name] || {};
                merged[member.name] = {
                  ...DEFAULT_USER_CONFIG, // Start with all defaults
                  ...savedConfig, // Then apply saved values
                };
              });
              setUserConfigs(merged);
              console.log(
                "‚úÖ Loaded user permissions from Dashboard storage:",
                merged,
              );
            } catch (e) {
              console.error("Failed to parse user permissions:", e);
            }
          }

          // Load from API if available
          loadFromAPI();
        }, []);

        // Reload user config when selected user changes (ensures fresh data)
        useEffect(() => {
          const userPerms = localStorage.getItem("bottyotty-user-permissions");
          if (userPerms) {
            try {
              const parsed = JSON.parse(userPerms);
              const merged = {};
              TEAM_MEMBERS.forEach((member) => {
                // CRITICAL: Merge defaults FIRST, then saved config on top
                const savedConfig = parsed[member.name] || {};
                merged[member.name] = {
                  ...DEFAULT_USER_CONFIG, // Start with all defaults
                  ...savedConfig, // Then apply saved values
                };
              });
              setUserConfigs(merged);
              console.log(
                `üîÑ Reloaded permissions when switching to: ${selectedPermissionUser}`,
                merged[selectedPermissionUser],
              );
            } catch (e) {
              console.error("Failed to reload user permissions:", e);
            }
          }
        }, [selectedPermissionUser]);

        // Update background gradient in real-time
        useEffect(() => {
          if (darkMode) {
            document.body.style.background =
              "linear-gradient(135deg, #1f2937 0%, #111827 100%)";
          } else {
            document.body.style.background = `linear-gradient(135deg, ${gradientStart} 0%, ${gradientEnd} 100%)`;
          }
        }, [gradientStart, gradientEnd, darkMode]);

        // Load data from API
        const loadFromAPI = async () => {
          if (!BOT_CONFIG.apiUrl) return;

          try {
            const headers = {};
            if (BOT_CONFIG.apiKey) {
              headers["X-API-Key"] = BOT_CONFIG.apiKey;
            }

            // Try to load settings from API (these endpoints don't exist yet, but will in main v.16.1.py)
            const responses = await Promise.all([
              fetch(`${BOT_CONFIG.apiUrl}/api/settings/users`, {
                headers,
              }).catch(() => null),
              fetch(`${BOT_CONFIG.apiUrl}/api/settings/channels`, {
                headers,
              }).catch(() => null),
              fetch(`${BOT_CONFIG.apiUrl}/api/settings/reactions`, {
                headers,
              }).catch(() => null),
              fetch(`${BOT_CONFIG.apiUrl}/api/categories`, { headers }).catch(
                () => null,
              ),
            ]);

            if (responses[0]?.ok) {
              const users = await responses[0].json();
              setAuthorizedUsers(users.authorized || []);
              setCampfireUsers(users.campfire || []);
            }

            if (responses[1]?.ok) {
              const channels = await responses[1].json();
              setPoolChannels(channels.pools || []);
              setPersonalChannels(channels.personal || []);
            }

            if (responses[2]?.ok) {
              const reactions = await responses[2].json();
              setReactionAssignments(reactions || []);
            }

            if (responses[3]?.ok) {
              const cats = await responses[3].json();
              if (cats.length > 0) setCategories(cats);
            }
          } catch (error) {
            console.log("API not available yet - using local storage only");
          }
        };

        // Save configuration
        const saveConfig = () => {
          const config = {
            appearance: {
              gradientStart,
              gradientEnd,
              darkMode,
              textBrightness,
              headingColor,
              labelColor,
              categoryColors,
            },
            botConfig: {
              autoSync,
              syncInterval,
              apiUrl,
              messages: botMessages,
            },
            users: {
              authorized: authorizedUsers,
              campfire: campfireUsers,
            },
            channels: {
              pools: poolChannels,
              personal: personalChannels,
            },
            reactions: reactionAssignments,
            categories,
            quickFilters,
            userConfigs,
            departments,
            roles,
            departmentPermissions,
            skills: availableSkills,
            skillCategoryLinks,
            inactivitySettings,
            customPages,
            priorityTimeLimits,
            logVisibilitySettings,
            multiStepTaskSettings,
            discordConfig,
          };

          localStorage.setItem(STORAGE_KEY_CONFIG, JSON.stringify(config));
          showNotification("Configuration saved successfully!", "success");
          showToast("Configuration saved!");
        };

        // Save user permissions to Dashboard's storage (separate from general config)
        const saveUserPermissions = () => {
          try {
            // CRITICAL: Log what we're about to save
            console.log("üíæ About to save userConfigs:", userConfigs);
            console.log(
              "üíæ Specifically saving for",
              selectedPermissionUser,
              ":",
              userConfigs[selectedPermissionUser],
            );

            // Save to Dashboard's localStorage key
            localStorage.setItem(
              "bottyotty-user-permissions",
              JSON.stringify(userConfigs),
            );

            // Verify it was saved
            const verification = localStorage.getItem(
              "bottyotty-user-permissions",
            );
            console.log(
              "‚úÖ Verification - What was actually saved:",
              JSON.parse(verification),
            );

            // Show summary
            const userPerms = userConfigs[selectedPermissionUser];
            const permSummary =
              `${selectedPermissionUser}'s Permissions Saved!\n\n` +
              `Admin Panel Access: ${userPerms?.isAdmin ? "‚úÖ YES" : "‚ùå NO"}\n` +
              `Quick Launch Access: ${userPerms?.canBulkImport ? "‚úÖ YES" : "‚ùå NO"}\n` +
              `Team Activity View: ${userPerms?.canViewTeamActivity ? "‚úÖ YES" : "‚ùå NO"}\n\n` +
              `canBulkImport value: ${userPerms?.canBulkImport}\n\n` +
              `Go back to Dashboard - permissions will reload automatically!`;

            showNotification(
              `‚úÖ Permissions saved for ${selectedPermissionUser}!`,
              "success",
            );
            showToast(`Permissions saved for ${selectedPermissionUser}`);
            alert(permSummary);
          } catch (e) {
            console.error("Failed to save user permissions:", e);
            showNotification("Failed to save user permissions", "error");
          }
        };

        // Save general template
        const saveGeneralTemplate = () => {
          try {
            localStorage.setItem(
              "bottyotty-permission-template",
              JSON.stringify(generalTemplate),
            );
            showNotification("General template saved!", "success");
            showToast("Permission template saved!");
          } catch (e) {
            console.error("Failed to save template:", e);
            showNotification("Failed to save template", "error");
          }
        };

        // Apply template to all users
        const applyTemplateToAll = () => {
          if (
            !confirm(
              "Apply this template to ALL team members? This will overwrite their current permissions.",
            )
          ) {
            return;
          }

          const newConfigs = {};
          teamMembers.forEach((member) => {
            newConfigs[member.name] = { ...generalTemplate };
          });
          setUserConfigs(newConfigs);
          localStorage.setItem(
            "bottyotty-user-permissions",
            JSON.stringify(newConfigs),
          );
          showNotification(
            `‚úÖ Template applied to all ${teamMembers.length} team members!`,
            "success",
          );
          showToast(`Template applied to ${teamMembers.length} team members`);
        };

        // Apply template to specific user
        const applyTemplateToUser = (userName) => {
          if (
            !confirm(
              `Apply template to ${userName}? This will overwrite their current permissions.`,
            )
          ) {
            return;
          }

          setUserConfigs({
            ...userConfigs,
            [userName]: { ...generalTemplate },
          });
          showNotification(`‚úÖ Template applied to ${userName}!`, "success");
          showToast(`Template applied to ${userName}`);
        };

        // Save to API
        const saveToAPI = async () => {
          if (!apiUrl) {
            showNotification("API URL not configured", "error");
            return;
          }

          setLoading(true);
          try {
            const headers = {
              "Content-Type": "application/json",
            };
            if (BOT_CONFIG.apiKey) {
              headers["X-API-Key"] = BOT_CONFIG.apiKey;
            }

            // Save complete admin config to the new endpoint
            const fullConfig = {
              appearance: {
                gradientStart,
                gradientEnd,
                darkMode,
                textBrightness,
                headingColor,
                labelColor,
                categoryColors,
              },
              botConfig: {
                autoSync,
                syncInterval,
                apiUrl,
                messages: botMessages,
              },
              users: {
                authorized: authorizedUsers,
                campfire: campfireUsers,
              },
              channels: {
                pools: poolChannels,
                personal: personalChannels,
              },
              reactions: reactionAssignments,
              categories,
              quickFilters,
              userConfigs,
              departments,
              roles,
              departmentPermissions,
              skills: availableSkills,
              skillCategoryLinks,
              inactivitySettings,
              customPages,
              priorityTimeLimits,
              logVisibilitySettings,
              multiStepTaskSettings,
              discordConfig,
            };

            // POST to admin-config endpoint
            const response = await fetch(`${apiUrl}/api/admin-config`, {
              method: "POST",
              headers,
              body: JSON.stringify(fullConfig),
            });

            if (!response.ok) {
              throw new Error(
                `HTTP ${response.status}: ${response.statusText}`,
              );
            }

            showNotification(
              "‚úÖ Configuration synced to bot successfully!",
              "success",
            );
            showToast("Bot synced! All devices will now load this config.");
          } catch (error) {
            console.error("Failed to sync to bot:", error);
            showNotification(
              "‚ùå Failed to sync to bot: " + error.message,
              "error",
            );
          } finally {
            setLoading(false);
          }
        };

        // Notification helper
        const showNotification = (message, type = "success") => {
          setNotification({ message, type });
          setTimeout(() => setNotification(null), 3000);
        };

        // Toast notification helper
        const showToast = (message, showRefresh = true) => {
          setToastMessage(message);

          // Show subtle refresh animation if requested
          if (showRefresh) {
            setIsRefreshing(true);
            setTimeout(() => {
              setIsRefreshing(false);
            }, 400);
          }

          // Auto-hide toast after 3 seconds
          setTimeout(() => {
            setToastMessage(null);
          }, 3000);
        };

        // User management
        const addAuthorizedUser = () => {
          if (!newUserId.trim()) {
            showNotification("Please enter a user ID", "error");
            return;
          }

          const user = {
            id: newUserId.trim(),
            name: newUserName.trim() || "User",
            permission: "pin_reaction",
          };

          setAuthorizedUsers([...authorizedUsers, user]);
          setNewUserId("");
          setNewUserName("");
          showNotification("User added", "success");
        };

        const removeAuthorizedUser = (userId) => {
          setAuthorizedUsers(authorizedUsers.filter((u) => u.id !== userId));
          showNotification("User removed", "success");
        };

        const addCampfireUser = () => {
          if (!newUserId.trim()) {
            showNotification("Please enter a user ID", "error");
            return;
          }

          const user = {
            id: newUserId.trim(),
            name: newUserName.trim() || "User",
          };

          setCampfireUsers([...campfireUsers, user]);
          setNewUserId("");
          setNewUserName("");
          showNotification("Campfire user added", "success");
        };

        const removeCampfireUser = (userId) => {
          setCampfireUsers(campfireUsers.filter((u) => u.id !== userId));
          showNotification("User removed", "success");
        };

        // Channel management
        const addPoolChannel = () => {
          if (!newChannelName.trim() || !newChannelId.trim()) {
            showNotification("Please enter channel name and ID", "error");
            return;
          }

          const channel = {
            name: newChannelName.trim(),
            id: newChannelId.trim(),
          };

          setPoolChannels([...poolChannels, channel]);
          setNewChannelName("");
          setNewChannelId("");
          showNotification("Pool channel added", "success");
        };

        const removePoolChannel = (channelId) => {
          setPoolChannels(poolChannels.filter((c) => c.id !== channelId));
          showNotification("Channel removed", "success");
        };

        const addPersonalChannel = () => {
          if (!newChannelName.trim() || !newChannelId.trim()) {
            showNotification("Please enter channel name and ID", "error");
            return;
          }

          const channel = {
            name: newChannelName.trim(),
            id: newChannelId.trim(),
          };

          setPersonalChannels([...personalChannels, channel]);
          setNewChannelName("");
          setNewChannelId("");
          showNotification("Personal channel added", "success");
        };

        const removePersonalChannel = (channelId) => {
          setPersonalChannels(
            personalChannels.filter((c) => c.id !== channelId),
          );
          showNotification("Channel removed", "success");
        };

        // Reaction management
        const addReactionAssignment = () => {
          if (!newReactionEmoji || !newReactionUser || !newReactionUserId) {
            showNotification("Please select emoji and user", "error");
            return;
          }

          const reaction = {
            emoji: newReactionEmoji.trim(),
            user: newReactionUser.trim(),
            userId: newReactionUserId.trim(),
            channelId: newReactionChannelId.trim() || null, // Optional - null means default channel
            description: `${newReactionEmoji} ‚Üí ${newReactionUser}'s tasks`,
          };

          setReactionAssignments([...reactionAssignments, reaction]);
          setNewReactionEmoji("");
          setNewReactionUser("");
          setNewReactionUserId("");
          setNewReactionChannelId("");
          showNotification(
            `‚úÖ Reaction ${newReactionEmoji} ‚Üí ${newReactionUser} added!`,
            "success",
          );
        };

        const removeReactionAssignment = (emoji) => {
          setReactionAssignments(
            reactionAssignments.filter((r) => r.emoji !== emoji),
          );
          showNotification("Reaction removed", "success");
        };

        // Category management
        const addCategory = () => {
          if (!newCategory.trim()) {
            showNotification("Please enter a category name", "error");
            return;
          }

          if (categories.includes(newCategory.trim())) {
            showNotification("Category already exists", "error");
            return;
          }

          setCategories([...categories, newCategory.trim()]);
          setCategoryColors({
            ...categoryColors,
            [newCategory.trim()]: {
              bg: "#f3f4f6",
              text: "#374151",
              border: "#9ca3af",
            },
          });
          setNewCategory("");
          showNotification("Category added", "success");
        };

        const removeCategory = (category) => {
          setCategories(categories.filter((c) => c !== category));
          const newColors = { ...categoryColors };
          delete newColors[category];
          setCategoryColors(newColors);
          showNotification("Category removed", "success");
        };

        // Team member management
        const addTeamMember = () => {
          if (!newMemberName || !newMemberDiscordId) {
            showNotification("Please enter both name and Discord ID", "error");
            return;
          }

          // Check if member already exists
          if (teamMembers.some((m) => m.discordId === newMemberDiscordId)) {
            showNotification(
              "Team member with this Discord ID already exists",
              "error",
            );
            return;
          }

          const newMember = {
            name: newMemberName.trim(),
            discordId: newMemberDiscordId.trim(),
          };

          const updated = [...teamMembers, newMember];
          setTeamMembers(updated);
          localStorage.setItem(
            "bottyotty-team-members",
            JSON.stringify(updated),
          );

          // Initialize user config for new member
          setUserConfigs({
            ...userConfigs,
            [newMember.name]: { ...DEFAULT_USER_CONFIG },
          });

          setNewMemberName("");
          setNewMemberDiscordId("");
          showNotification(`‚úÖ ${newMember.name} added to team!`, "success");
        };

        const removeTeamMember = (discordId) => {
          const member = teamMembers.find((m) => m.discordId === discordId);
          if (!member) return;

          if (
            !confirm(
              `Remove ${member.name} from the team?\n\nThis will:\n- Remove them from all dropdowns\n- Delete their permissions\n- Remove their reaction assignments\n\nThis cannot be undone.`,
            )
          ) {
            return;
          }

          const updated = teamMembers.filter((m) => m.discordId !== discordId);
          setTeamMembers(updated);
          localStorage.setItem(
            "bottyotty-team-members",
            JSON.stringify(updated),
          );

          // Remove from user configs
          const newUserConfigs = { ...userConfigs };
          delete newUserConfigs[member.name];
          setUserConfigs(newUserConfigs);

          // Remove their reactions
          setReactionAssignments(
            reactionAssignments.filter((r) => r.userId !== discordId),
          );

          showNotification(`${member.name} removed from team`, "success");
        };

        const updateCategoryColor = (category, colorType, value) => {
          setCategoryColors({
            ...categoryColors,
            [category]: {
              ...categoryColors[category],
              [colorType]: value,
            },
          });
        };

        // Export configuration
        const exportConfig = () => {
          const fullConfig = {
            appearance: {
              gradientStart,
              gradientEnd,
              darkMode,
              textBrightness,
              headingColor,
              labelColor,
              categoryColors,
            },
            botConfig: { autoSync, syncInterval, apiUrl },
            users: { authorized: authorizedUsers, campfire: campfireUsers },
            channels: { pools: poolChannels, personal: personalChannels },
            reactions: reactionAssignments,
            categories,
            quickFilters,
          };

          const blob = new Blob([JSON.stringify(fullConfig, null, 2)], {
            type: "application/json",
          });
          const url = URL.createObjectURL(blob);
          const a = document.createElement("a");
          a.href = url;
          a.download = `bottyotty-admin-config-${new Date().toISOString().split("T")[0]}.json`;
          a.click();
          showNotification("Configuration exported", "success");
        };

        // Import configuration
        const importConfig = (event) => {
          const file = event.target.files[0];
          if (!file) return;

          const reader = new FileReader();
          reader.onload = (e) => {
            try {
              const config = JSON.parse(e.target.result);

              if (config.appearance) {
                setGradientStart(config.appearance.gradientStart || "#667eea");
                setGradientEnd(config.appearance.gradientEnd || "#764ba2");
                setDarkMode(config.appearance.darkMode || false);
                setTextBrightness(config.appearance.textBrightness || "200");
                setHeadingColor(config.appearance.headingColor || "#ffffff");
                setLabelColor(config.appearance.labelColor || "#d1d5db");
                setCategoryColors(config.appearance.categoryColors || {});
              }

              if (config.botConfig) {
                setAutoSync(config.botConfig.autoSync);
                setSyncInterval(config.botConfig.syncInterval);
                setApiUrl(config.botConfig.apiUrl);
              }

              if (config.users) {
                setAuthorizedUsers(config.users.authorized || []);
                setCampfireUsers(config.users.campfire || []);
              }

              if (config.channels) {
                setPoolChannels(config.channels.pools || []);
                setPersonalChannels(config.channels.personal || []);
              }

              if (config.reactions) {
                setReactionAssignments(config.reactions);
              }

              if (config.categories) {
                setCategories(config.categories);
              }

              if (config.quickFilters) {
                setQuickFilters(config.quickFilters);
              }

              if (config.userConfigs) {
                setUserConfigs(config.userConfigs);
              }

              showNotification(
                "Configuration imported successfully",
                "success",
              );
            } catch (error) {
              showNotification("Failed to import configuration", "error");
            }
          };
          reader.readAsText(file);
        };

        return (
          <div className="min-h-screen p-4 md:p-8">
            {/* Notification */}
            {notification && (
              <div className={`notification ${notification.type}`}>
                {notification.message}
              </div>
            )}

            {/* Header */}
            <div className="glass rounded-2xl p-6 mb-6">
              <div className="flex flex-col md:flex-row items-center justify-between gap-4">
                <div>
                  <h1 className="text-4xl font-bold text-white mb-2">
                    ‚öôÔ∏è BottyOtty Admin Panel
                  </h1>
                  <p className="text-white text-opacity-80">
                    Customize your task management experience
                  </p>
                </div>

                <div className="flex gap-3">
                  <a
                    href="BottyOtty Dashboard v18.html"
                    className="px-4 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded-lg font-medium transition-all"
                  >
                    üìã Back to Dashboard
                  </a>
                  <a
                    href="Quick Launch v18.html"
                    className="px-4 py-2 bg-purple-600 hover:bg-purple-700 text-white rounded-lg font-medium transition-all"
                  >
                    üöÄ Quick Launch
                  </a>
                  <button
                    onClick={saveToAPI}
                    disabled={loading}
                    className="px-5 py-2 bg-gradient-to-r from-green-500 to-emerald-600 hover:from-green-600 hover:to-emerald-700 text-white rounded-lg font-bold transition-all disabled:opacity-50 shadow-lg"
                  >
                    {loading ? "‚è≥ Syncing..." : "üöÄ Sync to Bot"}
                  </button>
                  <button
                    onClick={exportConfig}
                    className="px-4 py-2 bg-purple-600 hover:bg-purple-700 text-white rounded-lg transition-all"
                  >
                    üíæ Export Config
                  </button>
                  <label className="px-4 py-2 bg-indigo-600 hover:bg-indigo-700 text-white rounded-lg cursor-pointer transition-all">
                    üìÇ Import Config
                    <input
                      type="file"
                      accept=".json"
                      onChange={importConfig}
                      className="hidden"
                    />
                  </label>
                </div>
              </div>
            </div>

            {/* Main Content - Sidebar + Content Grid */}
            <div className="grid grid-cols-[280px_1fr] gap-6">
              {/* Sidebar Navigation */}
              <div className="glass rounded-2xl p-4 h-fit sticky top-6">
                <h3 className="text-lg font-bold text-white mb-3 px-2">
                  ‚öôÔ∏è Settings
                </h3>

                {/* Search Input */}
                <div className="mb-4 px-2">
                  <input
                    type="text"
                    placeholder="Search settings..."
                    value={sidebarSearch}
                    onChange={(e) => setSidebarSearch(e.target.value)}
                    className="w-full px-3 py-2 bg-white bg-opacity-10 border border-white border-opacity-20 rounded-lg text-white placeholder-gray-400 text-sm focus:outline-none focus:border-blue-500 focus:bg-opacity-15 transition-all"
                  />
                </div>

                <nav className="space-y-1">
                  {[
                    {
                      id: "appearance",
                      label: "Appearance",
                      icon: "üé®",
                      keywords: ["theme", "color", "style", "dark mode"],
                    },
                    {
                      id: "bot-config",
                      label: "Bot Config",
                      icon: "üîÑ",
                      keywords: ["sync", "api", "settings"],
                    },
                    {
                      id: "discord-config",
                      label: "Discord IDs",
                      icon: "üÜî",
                      keywords: ["ids", "channels", "users", "threads"],
                    },
                    {
                      id: "team-management",
                      label: "Team Management",
                      icon: "üë•",
                      keywords: ["members", "team", "people", "staff"],
                    },
                    {
                      id: "users-permissions",
                      label: "Permissions",
                      icon: "üîê",
                      keywords: ["access", "rights", "security", "roles"],
                    },
                    {
                      id: "skills-management",
                      label: "Skills",
                      icon: "üéØ",
                      keywords: ["abilities", "expertise", "talents"],
                    },
                    {
                      id: "priority-settings",
                      label: "Priority & Time",
                      icon: "‚ö°",
                      keywords: ["urgent", "deadlines", "time limits"],
                    },
                    {
                      id: "inactivity-settings",
                      label: "Inactivity",
                      icon: "‚è∞",
                      keywords: ["alerts", "timeout", "escalation"],
                    },
                    {
                      id: "multi-step-tasks",
                      label: "Multi-Step",
                      icon: "üîó",
                      keywords: ["sequential", "workflow", "steps"],
                    },
                    {
                      id: "log-settings",
                      label: "Logs",
                      icon: "üìã",
                      keywords: ["history", "tracking", "records"],
                    },
                    {
                      id: "dashboard-features",
                      label: "Dashboard",
                      icon: "üéõÔ∏è",
                      keywords: ["pages", "custom", "views"],
                    },
                    {
                      id: "channels",
                      label: "Channels",
                      icon: "üì∫",
                      keywords: ["pool", "personal", "discord channels"],
                    },
                    {
                      id: "reactions",
                      label: "Reactions",
                      icon: "‚≠ê",
                      keywords: ["emoji", "assignment", "custom"],
                    },
                    {
                      id: "categories",
                      label: "Categories",
                      icon: "üè∑Ô∏è",
                      keywords: ["tags", "labels", "types"],
                    },
                    {
                      id: "filters",
                      label: "Quick Filters",
                      icon: "üéØ",
                      keywords: ["search", "find", "sorting"],
                    },
                  ]
                    .filter((section) => {
                      if (!sidebarSearch.trim()) return true;
                      const searchLower = sidebarSearch.toLowerCase();
                      return (
                        section.label.toLowerCase().includes(searchLower) ||
                        section.id.toLowerCase().includes(searchLower) ||
                        section.keywords.some((keyword) =>
                          keyword.includes(searchLower),
                        )
                      );
                    })
                    .map((section) => (
                      <button
                        key={section.id}
                        onClick={() => {
                          setActiveSection(section.id);
                          setSidebarSearch(""); // Clear search after selection
                        }}
                        className={`w-full text-left px-3 py-2.5 rounded-lg font-medium transition-all flex items-center gap-3 ${
                          activeSection === section.id
                            ? "bg-gradient-to-r from-blue-600 to-purple-600 text-white shadow-lg"
                            : "text-gray-300 hover:bg-white hover:bg-opacity-10 hover:text-white"
                        }`}
                      >
                        <span className="text-xl">{section.icon}</span>
                        <span className="text-sm">{section.label}</span>
                      </button>
                    ))}
                  {sidebarSearch.trim() &&
                    [
                      {
                        id: "appearance",
                        label: "Appearance",
                        icon: "üé®",
                        keywords: ["theme", "color", "style", "dark mode"],
                      },
                      {
                        id: "bot-config",
                        label: "Bot Config",
                        icon: "üîÑ",
                        keywords: ["sync", "api", "settings"],
                      },
                      {
                        id: "discord-config",
                        label: "Discord IDs",
                        icon: "üÜî",
                        keywords: ["ids", "channels", "users", "threads"],
                      },
                      {
                        id: "team-management",
                        label: "Team Management",
                        icon: "üë•",
                        keywords: ["members", "team", "people", "staff"],
                      },
                      {
                        id: "users-permissions",
                        label: "Permissions",
                        icon: "üîê",
                        keywords: ["access", "rights", "security", "roles"],
                      },
                      {
                        id: "skills-management",
                        label: "Skills",
                        icon: "üéØ",
                        keywords: ["abilities", "expertise", "talents"],
                      },
                      {
                        id: "priority-settings",
                        label: "Priority & Time",
                        icon: "‚ö°",
                        keywords: ["urgent", "deadlines", "time limits"],
                      },
                      {
                        id: "inactivity-settings",
                        label: "Inactivity",
                        icon: "‚è∞",
                        keywords: ["alerts", "timeout", "escalation"],
                      },
                      {
                        id: "multi-step-tasks",
                        label: "Multi-Step",
                        icon: "üîó",
                        keywords: ["sequential", "workflow", "steps"],
                      },
                      {
                        id: "log-settings",
                        label: "Logs",
                        icon: "üìã",
                        keywords: ["history", "tracking", "records"],
                      },
                      {
                        id: "dashboard-features",
                        label: "Dashboard",
                        icon: "üéõÔ∏è",
                        keywords: ["pages", "custom", "views"],
                      },
                      {
                        id: "channels",
                        label: "Channels",
                        icon: "üì∫",
                        keywords: ["pool", "personal", "discord channels"],
                      },
                      {
                        id: "reactions",
                        label: "Reactions",
                        icon: "‚≠ê",
                        keywords: ["emoji", "assignment", "custom"],
                      },
                      {
                        id: "categories",
                        label: "Categories",
                        icon: "üè∑Ô∏è",
                        keywords: ["tags", "labels", "types"],
                      },
                      {
                        id: "filters",
                        label: "Quick Filters",
                        icon: "üéØ",
                        keywords: ["search", "find", "sorting"],
                      },
                    ].filter((section) => {
                      const searchLower = sidebarSearch.toLowerCase();
                      return (
                        section.label.toLowerCase().includes(searchLower) ||
                        section.id.toLowerCase().includes(searchLower) ||
                        section.keywords.some((keyword) =>
                          keyword.includes(searchLower),
                        )
                      );
                    }).length === 0 && (
                      <div className="text-center py-4 text-gray-400 text-sm">
                        No settings found for "{sidebarSearch}"
                      </div>
                    )}
                </nav>
              </div>

              {/* Content Area */}
              <div className="glass rounded-2xl p-6">
                {/* Appearance Section */}
                {activeSection === "appearance" && (
                  <div>
                    <h2 className="text-3xl font-bold text-white mb-6">
                      üé® Appearance Settings
                    </h2>

                    {/* Dark Mode Toggle */}
                    <div className="section-card">
                      <div className="flex items-center justify-between mb-4">
                        <div>
                          <h3 className="text-xl font-bold text-white mb-1">
                            Dark Mode
                          </h3>
                          <p className="text-gray-300 text-sm">
                            Switch between light and dark themes
                          </p>
                        </div>
                        <button
                          onClick={() => setDarkMode(!darkMode)}
                          className={`px-6 py-3 rounded-lg font-bold transition-all ${
                            darkMode
                              ? "bg-gray-800 text-white"
                              : "bg-yellow-500 text-gray-900"
                          }`}
                        >
                          {darkMode ? "üåô Dark Mode" : "‚òÄÔ∏è Light Mode"}
                        </button>
                      </div>
                    </div>

                    {/* Gradient Colors */}
                    {!darkMode && (
                      <div className="section-card">
                        <h3 className="text-xl font-bold text-white mb-4">
                          Background Gradient
                        </h3>
                        <div className="grid grid-cols-1 md:grid-cols-2 gap-4">
                          <div>
                            <label className="block text-white mb-2 font-medium">
                              Start Color
                            </label>
                            <div className="flex gap-3 items-center">
                              <input
                                type="color"
                                value={gradientStart}
                                onChange={(e) =>
                                  setGradientStart(e.target.value)
                                }
                              />
                              <input
                                type="text"
                                value={gradientStart}
                                onChange={(e) =>
                                  setGradientStart(e.target.value)
                                }
                                className="flex-1 px-4 py-2 bg-white bg-opacity-20 text-white rounded-lg border border-white border-opacity-30"
                              />
                            </div>
                          </div>
                          <div>
                            <label className="block text-white mb-2 font-medium">
                              End Color
                            </label>
                            <div className="flex gap-3 items-center">
                              <input
                                type="color"
                                value={gradientEnd}
                                onChange={(e) => setGradientEnd(e.target.value)}
                              />
                              <input
                                type="text"
                                value={gradientEnd}
                                onChange={(e) => setGradientEnd(e.target.value)}
                                className="flex-1 px-4 py-2 bg-white bg-opacity-20 text-white rounded-lg border border-white border-opacity-30"
                              />
                            </div>
                          </div>
                        </div>
                        <button
                          onClick={() => {
                            setGradientStart("#667eea");
                            setGradientEnd("#764ba2");
                          }}
                          className="mt-4 px-4 py-2 bg-gray-600 hover:bg-gray-700 text-white rounded-lg"
                        >
                          Reset to Default
                        </button>
                      </div>
                    )}

                    {/* Text Color Controls */}
                    <div className="section-card">
                      <h3 className="text-xl font-bold text-white mb-4">
                        Text & Contrast Settings
                      </h3>
                      <p className="text-gray-300 mb-4">
                        Customize text colors and brightness for better
                        readability
                      </p>

                      <div className="space-y-4">
                        {/* Text Brightness */}
                        <div>
                          <label className="block text-white font-medium mb-2">
                            Text Brightness
                          </label>
                          <p className="text-gray-300 text-sm mb-3">
                            Adjust overall text brightness (Tailwind gray scale)
                          </p>
                          <select
                            value={textBrightness}
                            onChange={(e) => setTextBrightness(e.target.value)}
                            className="w-full px-4 py-2 bg-white bg-opacity-20 text-white rounded-lg border border-white border-opacity-30"
                          >
                            <option
                              value="50"
                              style={{ background: "#1f2937" }}
                            >
                              gray-50 (Lightest)
                            </option>
                            <option
                              value="100"
                              style={{ background: "#1f2937" }}
                            >
                              gray-100 (Very Light)
                            </option>
                            <option
                              value="200"
                              style={{ background: "#1f2937" }}
                            >
                              gray-200 (Light - Default)
                            </option>
                            <option
                              value="300"
                              style={{ background: "#1f2937" }}
                            >
                              gray-300 (Medium)
                            </option>
                            <option
                              value="400"
                              style={{ background: "#1f2937" }}
                            >
                              gray-400 (Darker)
                            </option>
                          </select>
                        </div>

                        {/* Heading Color */}
                        <div>
                          <label className="block text-white font-medium mb-2">
                            Heading Color
                          </label>
                          <p className="text-gray-300 text-sm mb-3">
                            Color for main headings and titles
                          </p>
                          <div className="flex gap-3 items-center">
                            <input
                              type="color"
                              value={headingColor}
                              onChange={(e) => setHeadingColor(e.target.value)}
                            />
                            <input
                              type="text"
                              value={headingColor}
                              onChange={(e) => setHeadingColor(e.target.value)}
                              className="flex-1 px-4 py-2 bg-white bg-opacity-20 text-white rounded-lg border border-white border-opacity-30"
                              placeholder="#ffffff"
                            />
                            <button
                              onClick={() => setHeadingColor("#ffffff")}
                              className="px-4 py-2 bg-gray-600 hover:bg-gray-700 text-white rounded-lg"
                            >
                              Reset
                            </button>
                          </div>
                        </div>

                        {/* Label Color */}
                        <div>
                          <label className="block text-white font-medium mb-2">
                            Label Color
                          </label>
                          <p className="text-gray-300 text-sm mb-3">
                            Color for labels and helper text
                          </p>
                          <div className="flex gap-3 items-center">
                            <input
                              type="color"
                              value={labelColor}
                              onChange={(e) => setLabelColor(e.target.value)}
                            />
                            <input
                              type="text"
                              value={labelColor}
                              onChange={(e) => setLabelColor(e.target.value)}
                              className="flex-1 px-4 py-2 bg-white bg-opacity-20 text-white rounded-lg border border-white border-opacity-30"
                              placeholder="#d1d5db"
                            />
                            <button
                              onClick={() => setLabelColor("#d1d5db")}
                              className="px-4 py-2 bg-gray-600 hover:bg-gray-700 text-white rounded-lg"
                            >
                              Reset
                            </button>
                          </div>
                        </div>
                      </div>
                    </div>

                    {/* Link to Categories */}
                    <div className="section-card bg-purple-600 bg-opacity-20 border-purple-400 border-opacity-40">
                      <div className="flex items-center justify-between">
                        <div>
                          <h3 className="text-xl font-bold text-white mb-1">
                            üè∑Ô∏è Category Colors
                          </h3>
                          <p className="text-gray-200 text-sm">
                            Looking to change category appearances?
                          </p>
                        </div>
                        <button
                          onClick={() => setActiveSection("categories")}
                          className="px-6 py-3 bg-purple-600 hover:bg-purple-700 text-white rounded-lg font-bold transition-all"
                        >
                          Go to Categories ‚Üí
                        </button>
                      </div>
                    </div>

                    <button
                      onClick={saveConfig}
                      className="save-button px-6 py-3 text-white rounded-lg font-bold"
                    >
                      üíæ Save Appearance Settings
                    </button>
                  </div>
                )}

                {/* Bot Config Section */}
                {activeSection === "bot-config" && (
                  <div>
                    <h2 className="text-3xl font-bold text-white mb-6">
                      üîÑ Bot Configuration
                    </h2>

                    {/* API Settings */}
                    <Accordion
                      title="API Settings"
                      icon="üîå"
                      defaultOpen={true}
                    >
                      <div className="space-y-4">
                        <div>
                          <label className="block text-white mb-2 font-medium">
                            Bot API URL
                          </label>
                          <input
                            type="text"
                            value={apiUrl}
                            onChange={(e) => setApiUrl(e.target.value)}
                            className="w-full px-4 py-3 bg-white bg-opacity-20 text-white rounded-lg border border-white border-opacity-30"
                            placeholder="https://your-bot-api.com"
                          />
                        </div>
                      </div>
                    </Accordion>

                    {/* Auto-Sync Settings */}
                    <Accordion
                      title="Auto-Sync Settings"
                      icon="üîÑ"
                      defaultOpen={false}
                    >
                      <div className="space-y-4">
                        <div className="flex items-center justify-between">
                          <div>
                            <p className="text-white font-medium">
                              Enable Auto-Sync
                            </p>
                            <p className="text-gray-300 text-sm">
                              Automatically sync with Discord bot
                            </p>
                          </div>
                          <button
                            onClick={() => setAutoSync(!autoSync)}
                            className={`px-6 py-3 rounded-lg font-bold transition-all ${
                              autoSync
                                ? "bg-green-600 text-white"
                                : "bg-gray-600 text-white"
                            }`}
                          >
                            {autoSync ? "‚úÖ Enabled" : "‚ùå Disabled"}
                          </button>
                        </div>

                        {autoSync && (
                          <div>
                            <label className="block text-white mb-2 font-medium">
                              Sync Interval (seconds): {syncInterval}s
                            </label>
                            <input
                              type="range"
                              min="10"
                              max="120"
                              step="5"
                              value={syncInterval}
                              onChange={(e) =>
                                setSyncInterval(parseInt(e.target.value))
                              }
                              className="w-full"
                            />
                            <div className="flex justify-between text-gray-300 text-sm mt-1">
                              <span>10s (Fast)</span>
                              <span>120s (Slow)</span>
                            </div>
                          </div>
                        )}
                      </div>
                    </Accordion>

                    {/* Bot Messages */}
                    <Accordion
                      title="Bot Messages"
                      icon="üí¨"
                      defaultOpen={false}
                    >
                      <p className="text-gray-300 mb-4">
                        Customize Discord notification messages sent by the bot.
                        Use placeholders like {"{taskNumber}"}, {"{from}"},{" "}
                        {"{to}"}, {"{userName}"}, etc.
                      </p>

                      {/* Sync Button */}
                      <div className="mb-4 p-4 bg-gradient-to-r from-blue-600 to-purple-600 rounded-lg">
                        <div className="flex items-center justify-between">
                          <div>
                            <h4 className="text-white font-bold mb-1">
                              üì° Sync to Bot
                            </h4>
                            <p className="text-gray-200 text-sm">
                              Push these message templates to your Discord bot
                            </p>
                          </div>
                          <button
                            onClick={saveToAPI}
                            disabled={loading}
                            className="px-6 py-3 bg-white text-blue-600 font-bold rounded-lg hover:bg-gray-100 transition-all disabled:opacity-50"
                          >
                            {loading ? "‚è≥ Syncing..." : "üöÄ Sync Now"}
                          </button>
                        </div>
                      </div>

                      <div className="space-y-4">
                        {Object.entries(botMessages).map(([key, value]) => (
                          <div
                            key={key}
                            className="bg-white bg-opacity-5 p-4 rounded-lg"
                          >
                            <div className="flex items-center justify-between mb-2">
                              <label className="text-white font-medium">
                                {key.replace(/([A-Z])/g, " $1").trim()}
                              </label>
                              <button
                                onClick={() =>
                                  setEditingMessage(
                                    editingMessage === key ? null : key,
                                  )
                                }
                                className="px-3 py-1 bg-blue-600 hover:bg-blue-700 text-white rounded text-sm"
                              >
                                {editingMessage === key ? "Cancel" : "Edit"}
                              </button>
                            </div>
                            {editingMessage === key ? (
                              <div className="space-y-2">
                                <textarea
                                  value={value}
                                  onChange={(e) =>
                                    setBotMessages({
                                      ...botMessages,
                                      [key]: e.target.value,
                                    })
                                  }
                                  className="w-full px-3 py-2 bg-white bg-opacity-20 text-white rounded-lg border border-white border-opacity-30"
                                  rows="3"
                                />
                                <button
                                  onClick={() => setEditingMessage(null)}
                                  className="px-4 py-2 bg-green-600 hover:bg-green-700 text-white rounded-lg text-sm"
                                >
                                  ‚úì Save
                                </button>
                              </div>
                            ) : (
                              <pre className="text-gray-300 text-sm whitespace-pre-wrap font-mono">
                                {value}
                              </pre>
                            )}
                          </div>
                        ))}

                        {/* Add New Message */}
                        <div className="bg-blue-900 bg-opacity-30 p-4 rounded-lg">
                          <h4 className="text-white font-bold mb-3">
                            ‚ûï Add Custom Message
                          </h4>
                          <div className="space-y-3">
                            <input
                              type="text"
                              value={newMessageKey}
                              onChange={(e) => setNewMessageKey(e.target.value)}
                              placeholder="Message key (e.g., taskAssigned)"
                              className="w-full px-3 py-2 bg-white bg-opacity-20 text-white rounded-lg border border-white border-opacity-30"
                            />
                            <textarea
                              value={newMessageValue}
                              onChange={(e) =>
                                setNewMessageValue(e.target.value)
                              }
                              placeholder="Message template with {placeholders}"
                              className="w-full px-3 py-2 bg-white bg-opacity-20 text-white rounded-lg border border-white border-opacity-30"
                              rows="2"
                            />
                            <button
                              onClick={() => {
                                if (newMessageKey && newMessageValue) {
                                  setBotMessages({
                                    ...botMessages,
                                    [newMessageKey]: newMessageValue,
                                  });
                                  setNewMessageKey("");
                                  setNewMessageValue("");
                                  showNotification("Message added!", "success");
                                }
                              }}
                              className="px-4 py-2 bg-green-600 hover:bg-green-700 text-white rounded-lg"
                            >
                              ‚ûï Add Message
                            </button>
                          </div>
                        </div>
                      </div>
                    </Accordion>

                    {/* Users & Permissions (React Settings) - Moved from Users tab */}
                    <Accordion
                      title="Users & Permissions (React Settings)"
                      icon="‚≠ê"
                      defaultOpen={false}
                    >
                      <p className="text-gray-300 mb-4">
                        Configure which users can use reaction-based features
                      </p>

                      <div className="space-y-6">
                        {/* Authorized Users (üìå reaction) */}
                        <div className="bg-purple-900 bg-opacity-20 p-4 rounded-lg">
                          <h4 className="text-lg font-bold text-white mb-3">
                            üìå Authorized Users (Can create tasks with üìå)
                          </h4>
                          <p className="text-gray-300 text-sm mb-4">
                            These users can pin messages to create tasks
                          </p>
                          <div className="space-y-2">
                            {authorizedUsers.map((user, idx) => (
                              <div key={idx} className="user-item">
                                <span className="text-white">
                                  {user.name || user}
                                </span>
                                <button
                                  onClick={() =>
                                    setAuthorizedUsers(
                                      authorizedUsers.filter(
                                        (_, i) => i !== idx,
                                      ),
                                    )
                                  }
                                  className="text-red-400 hover:text-red-300"
                                >
                                  Remove
                                </button>
                              </div>
                            ))}
                          </div>
                          <div className="mt-4 flex gap-2">
                            <select
                              value={newUserName}
                              onChange={(e) => setNewUserName(e.target.value)}
                              className="flex-1 px-3 py-2 bg-white bg-opacity-20 text-white rounded-lg"
                            >
                              <option value="">Select user...</option>
                              {teamMembers.map((member) => (
                                <option
                                  key={member.discordId}
                                  value={member.name}
                                >
                                  {member.name}
                                </option>
                              ))}
                            </select>
                            <button
                              onClick={() => {
                                if (
                                  newUserName &&
                                  !authorizedUsers.find(
                                    (u) => u === newUserName,
                                  )
                                ) {
                                  setAuthorizedUsers([
                                    ...authorizedUsers,
                                    newUserName,
                                  ]);
                                  setNewUserName("");
                                }
                              }}
                              className="px-4 py-2 bg-green-600 hover:bg-green-700 text-white rounded-lg"
                            >
                              Add
                            </button>
                          </div>
                        </div>

                        {/* Campfire Users (üî• reaction) */}
                        <div className="bg-orange-900 bg-opacity-20 p-4 rounded-lg">
                          <h4 className="text-lg font-bold text-white mb-3">
                            üî• Campfire Users (Can create campfire tasks)
                          </h4>
                          <p className="text-gray-300 text-sm mb-4">
                            Special permission for urgent campfire tasks
                          </p>
                          <div className="space-y-2">
                            {campfireUsers.map((user, idx) => (
                              <div key={idx} className="user-item">
                                <span className="text-white">
                                  {user.name || user}
                                </span>
                                <button
                                  onClick={() =>
                                    setCampfireUsers(
                                      campfireUsers.filter((_, i) => i !== idx),
                                    )
                                  }
                                  className="text-red-400 hover:text-red-300"
                                >
                                  Remove
                                </button>
                              </div>
                            ))}
                          </div>
                          <div className="mt-4 flex gap-2">
                            <select
                              value={newUserName}
                              onChange={(e) => setNewUserName(e.target.value)}
                              className="flex-1 px-3 py-2 bg-white bg-opacity-20 text-white rounded-lg"
                            >
                              <option value="">Select user...</option>
                              {teamMembers.map((member) => (
                                <option
                                  key={member.discordId}
                                  value={member.name}
                                >
                                  {member.name}
                                </option>
                              ))}
                            </select>
                            <button
                              onClick={() => {
                                if (
                                  newUserName &&
                                  !campfireUsers.find((u) => u === newUserName)
                                ) {
                                  setCampfireUsers([
                                    ...campfireUsers,
                                    newUserName,
                                  ]);
                                  setNewUserName("");
                                }
                              }}
                              className="px-4 py-2 bg-green-600 hover:bg-green-700 text-white rounded-lg"
                            >
                              Add
                            </button>
                          </div>
                        </div>
                      </div>
                    </Accordion>

                    <button
                      onClick={saveConfig}
                      className="save-button px-6 py-3 text-white rounded-lg font-bold mt-6"
                    >
                      üíæ Save Bot Configuration
                    </button>
                  </div>
                )}

                {/* Team Management Section */}
                {activeSection === "team-management" && (
                  <div>
                    <h2 className="text-3xl font-bold text-white mb-6">
                      üë• Team Management
                    </h2>
                    <p className="text-gray-300 mb-6">
                      Add or remove team members. Members appear in all
                      dropdowns (permissions, reactions, user filters, etc.)
                    </p>

                    {/* Current Team Members */}
                    <div className="section-card mb-6">
                      <h3 className="text-xl font-bold text-white mb-4">
                        Current Team Members ({teamMembers.length})
                      </h3>
                      <p className="text-gray-300 mb-4 text-sm">
                        These team members appear in all dropdowns throughout
                        the system
                      </p>

                      <div className="space-y-2 mb-4">
                        {teamMembers.map((member, index) => (
                          <div key={member.discordId} className="user-item">
                            <div className="flex items-center gap-3">
                              <div className="text-gray-400 font-mono text-sm w-8">
                                #{index + 1}
                              </div>
                              <div>
                                <div className="text-white font-medium">
                                  {member.name}
                                </div>
                                <div className="text-gray-400 text-xs">
                                  Discord ID: {member.discordId}
                                </div>
                              </div>
                            </div>
                            <button
                              onClick={() => removeTeamMember(member.discordId)}
                              className="delete-button px-3 py-1 text-white rounded text-sm"
                              title="Remove from team (offboard)"
                            >
                              üóëÔ∏è Remove
                            </button>
                          </div>
                        ))}
                      </div>
                    </div>

                    {/* Add New Team Member (Onboarding) */}
                    <div className="section-card mb-6">
                      <h3 className="text-xl font-bold text-white mb-4">
                        ‚ûï Add New Team Member (Onboarding)
                      </h3>
                      <p className="text-gray-300 mb-4 text-sm">
                        Add a new team member to make them available throughout
                        the system
                      </p>

                      <div className="grid grid-cols-1 md:grid-cols-3 gap-4">
                        <div>
                          <label className="block text-sm font-medium text-gray-300 mb-2">
                            Full Name
                          </label>
                          <input
                            type="text"
                            placeholder="e.g., John Smith"
                            value={newMemberName}
                            onChange={(e) => setNewMemberName(e.target.value)}
                            className="w-full px-4 py-2 bg-white bg-opacity-20 text-white rounded-lg border border-white border-opacity-30 focus:outline-none focus:border-opacity-60"
                          />
                        </div>

                        <div>
                          <label className="block text-sm font-medium text-gray-300 mb-2">
                            Discord User ID
                            <a
                              href="https://support.discord.com/hc/en-us/articles/206346498-Where-can-I-find-my-User-Server-Message-ID"
                              target="_blank"
                              className="text-blue-400 hover:text-blue-300 text-xs ml-2"
                            >
                              (How to find?)
                            </a>
                          </label>
                          <input
                            type="text"
                            placeholder="e.g., 220326831524544513"
                            value={newMemberDiscordId}
                            onChange={(e) =>
                              setNewMemberDiscordId(e.target.value)
                            }
                            className="w-full px-4 py-2 bg-white bg-opacity-20 text-white rounded-lg border border-white border-opacity-30 focus:outline-none focus:border-opacity-60"
                          />
                        </div>

                        <div className="flex items-end">
                          <button
                            onClick={addTeamMember}
                            disabled={!newMemberName || !newMemberDiscordId}
                            className="w-full save-button px-4 py-2 text-white rounded-lg font-medium disabled:opacity-50 disabled:cursor-not-allowed"
                          >
                            ‚ûï Add Team Member
                          </button>
                        </div>
                      </div>
                    </div>

                    {/* Info Box */}
                    <div className="section-card bg-blue-900 bg-opacity-20 border-blue-500 border-opacity-30">
                      <h4 className="text-blue-300 font-semibold mb-2">
                        ‚ÑπÔ∏è What This Does
                      </h4>
                      <div className="text-gray-300 text-sm space-y-2">
                        <p>
                          <strong>When you add a team member:</strong>
                        </p>
                        <ul className="list-disc list-inside ml-2 space-y-1">
                          <li>
                            They appear in all user dropdowns (permissions,
                            reactions, filters)
                          </li>
                          <li>
                            You can assign them permissions in Advanced
                            Permissions tab
                          </li>
                          <li>
                            You can assign reactions to them in Custom Reactions
                            tab
                          </li>
                          <li>
                            They appear in the Dashboard user filter dropdown
                          </li>
                        </ul>
                        <p className="mt-3">
                          <strong>When you remove a team member:</strong>
                        </p>
                        <ul className="list-disc list-inside ml-2 space-y-1">
                          <li>They're removed from all dropdowns</li>
                          <li>Their permissions are deleted</li>
                          <li>Their reaction assignments are removed</li>
                          <li className="text-yellow-300">
                            ‚ö†Ô∏è This cannot be undone!
                          </li>
                        </ul>
                      </div>
                    </div>

                    <div className="flex gap-3">
                      <button
                        onClick={() => {
                          localStorage.setItem(
                            "bottyotty-team-members",
                            JSON.stringify(teamMembers),
                          );
                          showNotification("‚úÖ Team members saved!", "success");
                        }}
                        className="save-button px-6 py-3 text-white rounded-lg font-bold"
                      >
                        üíæ Save Team List
                      </button>
                    </div>
                  </div>
                )}

                {/* Users & Permissions Section */}
                {activeSection === "users" && (
                  <div>
                    <h2 className="text-3xl font-bold text-white mb-6">
                      üë• Users & Permissions
                    </h2>

                    {/* Authorized Users (Pin Reaction) */}
                    <div className="section-card">
                      <h3 className="text-xl font-bold text-white mb-4">
                        üìå Authorized Users (Pin Reaction)
                      </h3>
                      <p className="text-gray-300 mb-4">
                        Users who can use üìå reaction to create tasks
                      </p>

                      <div className="space-y-2 mb-4">
                        {authorizedUsers.map((user) => (
                          <div key={user.id} className="user-item">
                            <div>
                              <span className="text-white font-medium">
                                {user.name}
                              </span>
                              <span className="text-gray-400 text-sm ml-2">
                                ID: {user.id}
                              </span>
                            </div>
                            <button
                              onClick={() => removeAuthorizedUser(user.id)}
                              className="delete-button px-3 py-1 text-white rounded text-sm"
                            >
                              Remove
                            </button>
                          </div>
                        ))}
                      </div>

                      <div className="grid grid-cols-1 md:grid-cols-3 gap-3">
                        <input
                          type="text"
                          placeholder="User ID"
                          value={newUserId}
                          onChange={(e) => setNewUserId(e.target.value)}
                          className="px-4 py-2 bg-white bg-opacity-20 text-white rounded-lg border border-white border-opacity-30"
                        />
                        <input
                          type="text"
                          placeholder="Name (optional)"
                          value={newUserName}
                          onChange={(e) => setNewUserName(e.target.value)}
                          className="px-4 py-2 bg-white bg-opacity-20 text-white rounded-lg border border-white border-opacity-30"
                        />
                        <button
                          onClick={addAuthorizedUser}
                          className="save-button px-4 py-2 text-white rounded-lg font-medium"
                        >
                          + Add User
                        </button>
                      </div>
                    </div>

                    {/* Campfire Users */}
                    <div className="section-card">
                      <h3 className="text-xl font-bold text-white mb-4">
                        üî• Campfire Users
                      </h3>
                      <p className="text-gray-300 mb-4">
                        Users who can use üî• reaction for private tasks
                      </p>

                      <div className="space-y-2 mb-4">
                        {campfireUsers.map((user) => (
                          <div key={user.id} className="user-item">
                            <div>
                              <span className="text-white font-medium">
                                {user.name}
                              </span>
                              <span className="text-gray-400 text-sm ml-2">
                                ID: {user.id}
                              </span>
                            </div>
                            <button
                              onClick={() => removeCampfireUser(user.id)}
                              className="delete-button px-3 py-1 text-white rounded text-sm"
                            >
                              Remove
                            </button>
                          </div>
                        ))}
                      </div>

                      <div className="grid grid-cols-1 md:grid-cols-3 gap-3">
                        <input
                          type="text"
                          placeholder="User ID"
                          value={newUserId}
                          onChange={(e) => setNewUserId(e.target.value)}
                          className="px-4 py-2 bg-white bg-opacity-20 text-white rounded-lg border border-white border-opacity-30"
                        />
                        <input
                          type="text"
                          placeholder="Name (optional)"
                          value={newUserName}
                          onChange={(e) => setNewUserName(e.target.value)}
                          className="px-4 py-2 bg-white bg-opacity-20 text-white rounded-lg border border-white border-opacity-30"
                        />
                        <button
                          onClick={addCampfireUser}
                          className="save-button px-4 py-2 text-white rounded-lg font-medium"
                        >
                          + Add User
                        </button>
                      </div>
                    </div>

                    <div className="flex gap-3">
                      <button
                        onClick={saveConfig}
                        className="save-button px-6 py-3 text-white rounded-lg font-bold"
                      >
                        üíæ Save Locally
                      </button>
                      <button
                        onClick={saveToAPI}
                        disabled={loading}
                        className="save-button px-6 py-3 text-white rounded-lg font-bold disabled:opacity-50"
                      >
                        {loading ? "‚è≥ Saving to Bot..." : "üöÄ Save to Bot"}
                      </button>
                    </div>
                  </div>
                )}

                {/* Users & Permissions Section */}
                {activeSection === "users-permissions" && (
                  <div>
                    <h2 className="text-3xl font-bold text-white mb-6">
                      üîê Users & Permissions
                    </h2>
                    <p className="text-gray-300 mb-6">
                      Configure departments, roles, and detailed permissions for
                      team members
                    </p>

                    {/* Departments & Roles Management */}
                    <Accordion
                      title="Departments & Roles"
                      icon="üè¢"
                      defaultOpen={false}
                    >
                      <div className="space-y-6">
                        {/* Departments */}
                        <div className="bg-blue-900 bg-opacity-20 p-4 rounded-lg">
                          <h4 className="text-lg font-bold text-white mb-3">
                            üè¢ Departments
                          </h4>
                          <div className="flex flex-wrap gap-2 mb-3">
                            {departments.map((dept) => (
                              <div
                                key={dept}
                                className="px-4 py-2 bg-blue-600 text-white rounded-lg flex items-center gap-2"
                              >
                                <span>{dept}</span>
                                <button
                                  onClick={() => {
                                    if (
                                      confirm(`Remove "${dept}" department?`)
                                    ) {
                                      setDepartments(
                                        departments.filter((d) => d !== dept),
                                      );
                                    }
                                  }}
                                  className="hover:text-red-300"
                                >
                                  √ó
                                </button>
                              </div>
                            ))}
                          </div>
                          <div className="flex gap-2">
                            <input
                              type="text"
                              value={newDepartment}
                              onChange={(e) => setNewDepartment(e.target.value)}
                              placeholder="New department name"
                              className="flex-1 px-4 py-2 bg-white bg-opacity-20 text-white rounded-lg border border-white border-opacity-30"
                            />
                            <button
                              onClick={() => {
                                if (
                                  newDepartment.trim() &&
                                  !departments.includes(newDepartment.trim())
                                ) {
                                  setDepartments([
                                    ...departments,
                                    newDepartment.trim(),
                                  ]);
                                  setNewDepartment("");
                                }
                              }}
                              className="px-4 py-2 bg-green-600 hover:bg-green-700 text-white rounded-lg"
                            >
                              ‚ûï Add
                            </button>
                          </div>
                        </div>

                        {/* Roles */}
                        <div className="bg-purple-900 bg-opacity-20 p-4 rounded-lg">
                          <h4 className="text-lg font-bold text-white mb-3">
                            üëî Roles
                          </h4>
                          <div className="flex flex-wrap gap-2 mb-3">
                            {roles.map((role) => (
                              <div
                                key={role}
                                className="px-4 py-2 bg-purple-600 text-white rounded-lg flex items-center gap-2"
                              >
                                <span>{role}</span>
                                <button
                                  onClick={() => {
                                    if (confirm(`Remove "${role}" role?`)) {
                                      setRoles(roles.filter((r) => r !== role));
                                    }
                                  }}
                                  className="hover:text-red-300"
                                >
                                  √ó
                                </button>
                              </div>
                            ))}
                          </div>
                          <div className="flex gap-2">
                            <input
                              type="text"
                              value={newRole}
                              onChange={(e) => setNewRole(e.target.value)}
                              placeholder="New role name"
                              className="flex-1 px-4 py-2 bg-white bg-opacity-20 text-white rounded-lg border border-white border-opacity-30"
                            />
                            <button
                              onClick={() => {
                                if (
                                  newRole.trim() &&
                                  !roles.includes(newRole.trim())
                                ) {
                                  setRoles([...roles, newRole.trim()]);
                                  setNewRole("");
                                }
                              }}
                              className="px-4 py-2 bg-green-600 hover:bg-green-700 text-white rounded-lg"
                            >
                              ‚ûï Add
                            </button>
                          </div>
                        </div>

                        {/* Department Permissions */}
                        <div className="bg-green-900 bg-opacity-20 p-4 rounded-lg">
                          <h4 className="text-lg font-bold text-white mb-3">
                            üéØ Department-Wide Permissions
                          </h4>
                          <p className="text-gray-300 text-sm mb-4">
                            Set default permissions for entire departments.
                            Individual user permissions can override these.
                          </p>

                          <div className="mb-4">
                            <label className="block text-white font-medium mb-2">
                              Select Department
                            </label>
                            <select
                              value={selectedDepartment}
                              onChange={(e) =>
                                setSelectedDepartment(e.target.value)
                              }
                              className="w-full px-4 py-2 bg-white bg-opacity-20 text-white rounded-lg border border-white border-opacity-30"
                            >
                              {departments.map((dept) => (
                                <option key={dept} value={dept}>
                                  {dept}
                                </option>
                              ))}
                            </select>
                          </div>

                          <div className="grid grid-cols-2 md:grid-cols-3 gap-2">
                            {[
                              "canDeleteOwnTasks",
                              "canDeletePoolTasks",
                              "canViewTeamActivity",
                              "canBulkImport",
                              "canDeletePresets",
                            ].map((perm) => (
                              <label
                                key={perm}
                                className="flex items-center gap-2 p-2 bg-white bg-opacity-10 rounded cursor-pointer"
                              >
                                <input
                                  type="checkbox"
                                  checked={
                                    departmentPermissions[selectedDepartment]?.[
                                      perm
                                    ] || false
                                  }
                                  onChange={(e) => {
                                    setDepartmentPermissions({
                                      ...departmentPermissions,
                                      [selectedDepartment]: {
                                        ...departmentPermissions[
                                          selectedDepartment
                                        ],
                                        [perm]: e.target.checked,
                                      },
                                    });
                                  }}
                                  className="w-4 h-4"
                                />
                                <span className="text-white text-sm">
                                  {perm.replace(/([A-Z])/g, " $1").trim()}
                                </span>
                              </label>
                            ))}
                          </div>
                        </div>
                      </div>
                    </Accordion>

                    {/* User Selector - MOVED TO TOP */}
                    <Accordion
                      title="Individual User Configuration"
                      icon="üë§"
                      defaultOpen={true}
                    >
                      <div className="mb-4">
                        <label className="block text-sm font-medium text-gray-300 mb-2">
                          Select User to Configure
                        </label>
                        <select
                          value={selectedPermissionUser}
                          onChange={(e) =>
                            setSelectedPermissionUser(e.target.value)
                          }
                          className="w-full px-4 py-3 bg-white bg-opacity-20 text-white rounded-lg border border-white border-opacity-30 focus:outline-none focus:border-opacity-60"
                        >
                          {teamMembers.map((member) => (
                            <option
                              key={member.discordId}
                              value={member.name}
                              className="bg-gray-800"
                            >
                              {member.name} (ID: {member.discordId})
                            </option>
                          ))}
                        </select>
                      </div>

                      {/* Assign Department & Role */}
                      <div className="grid grid-cols-2 gap-4 mb-4">
                        <div>
                          <label className="block text-white font-medium mb-2">
                            Department
                          </label>
                          <select
                            value={
                              userConfigs[selectedPermissionUser]?.department ||
                              ""
                            }
                            onChange={(e) =>
                              setUserConfigs({
                                ...userConfigs,
                                [selectedPermissionUser]: {
                                  ...userConfigs[selectedPermissionUser],
                                  department: e.target.value,
                                },
                              })
                            }
                            className="w-full px-4 py-2 bg-white bg-opacity-20 text-white rounded-lg border border-white border-opacity-30"
                          >
                            <option value="">None</option>
                            {departments.map((dept) => (
                              <option key={dept} value={dept}>
                                {dept}
                              </option>
                            ))}
                          </select>
                        </div>
                        <div>
                          <label className="block text-white font-medium mb-2">
                            Role
                          </label>
                          <select
                            value={
                              userConfigs[selectedPermissionUser]?.role || ""
                            }
                            onChange={(e) =>
                              setUserConfigs({
                                ...userConfigs,
                                [selectedPermissionUser]: {
                                  ...userConfigs[selectedPermissionUser],
                                  role: e.target.value,
                                },
                              })
                            }
                            className="w-full px-4 py-2 bg-white bg-opacity-20 text-white rounded-lg border border-white border-opacity-30"
                          >
                            <option value="">None</option>
                            {roles.map((role) => (
                              <option key={role} value={role}>
                                {role}
                              </option>
                            ))}
                          </select>
                        </div>
                      </div>
                    </Accordion>

                    {/* General Template Section */}
                    <div className="section-card mb-8 bg-gradient-to-r from-purple-900 to-blue-900 bg-opacity-30 border-2 border-purple-500 border-opacity-50">
                      <h3 className="text-2xl font-bold text-white mb-3">
                        üéØ General Permission Template
                      </h3>
                      <p className="text-gray-200 mb-4">
                        Create a template with default permissions that you can
                        apply to all users or specific users. This is useful for
                        setting baseline permissions, then customizing
                        individual users as needed.
                      </p>

                      {/* Template Permissions Quick Config */}
                      <div className="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-3 mb-4">
                        <label className="flex items-center gap-2 p-3 bg-white bg-opacity-10 rounded-lg cursor-pointer hover:bg-opacity-20 transition-all">
                          <input
                            type="checkbox"
                            checked={
                              generalTemplate.canViewTeamActivity || false
                            }
                            onChange={(e) =>
                              setGeneralTemplate({
                                ...generalTemplate,
                                canViewTeamActivity: e.target.checked,
                              })
                            }
                            className="w-4 h-4"
                          />
                          <span className="text-white text-sm">
                            üë• Team Activity View
                          </span>
                        </label>

                        <label className="flex items-center gap-2 p-3 bg-white bg-opacity-10 rounded-lg cursor-pointer hover:bg-opacity-20 transition-all">
                          <input
                            type="checkbox"
                            checked={generalTemplate.isAdmin || false}
                            onChange={(e) =>
                              setGeneralTemplate({
                                ...generalTemplate,
                                isAdmin: e.target.checked,
                              })
                            }
                            className="w-4 h-4"
                          />
                          <span className="text-white text-sm">
                            ‚öôÔ∏è Admin Access
                          </span>
                        </label>

                        <label className="flex items-center gap-2 p-3 bg-white bg-opacity-10 rounded-lg cursor-pointer hover:bg-opacity-20 transition-all">
                          <input
                            type="checkbox"
                            checked={generalTemplate.canDeleteOwnTasks ?? true}
                            onChange={(e) =>
                              setGeneralTemplate({
                                ...generalTemplate,
                                canDeleteOwnTasks: e.target.checked,
                              })
                            }
                            className="w-4 h-4"
                          />
                          <span className="text-white text-sm">
                            ‚úÖ Delete Own Tasks
                          </span>
                        </label>

                        <label className="flex items-center gap-2 p-3 bg-white bg-opacity-10 rounded-lg cursor-pointer hover:bg-opacity-20 transition-all">
                          <input
                            type="checkbox"
                            checked={
                              generalTemplate.canDeletePoolTasks || false
                            }
                            onChange={(e) =>
                              setGeneralTemplate({
                                ...generalTemplate,
                                canDeletePoolTasks: e.target.checked,
                              })
                            }
                            className="w-4 h-4"
                          />
                          <span className="text-white text-sm">
                            üèä Delete Pool Tasks
                          </span>
                        </label>

                        <label className="flex items-center gap-2 p-3 bg-white bg-opacity-10 rounded-lg cursor-pointer hover:bg-opacity-20 transition-all">
                          <input
                            type="checkbox"
                            checked={
                              generalTemplate.canDeleteOthersTasks || false
                            }
                            onChange={(e) =>
                              setGeneralTemplate({
                                ...generalTemplate,
                                canDeleteOthersTasks: e.target.checked,
                              })
                            }
                            className="w-4 h-4"
                          />
                          <span className="text-white text-sm">
                            üë§ Delete Other's Tasks
                          </span>
                        </label>

                        <label className="flex items-center gap-2 p-3 bg-red-900 bg-opacity-20 rounded-lg cursor-pointer hover:bg-opacity-30 transition-all border border-red-500 border-opacity-50">
                          <input
                            type="checkbox"
                            checked={generalTemplate.canDeleteAllTasks || false}
                            onChange={(e) =>
                              setGeneralTemplate({
                                ...generalTemplate,
                                canDeleteAllTasks: e.target.checked,
                              })
                            }
                            className="w-4 h-4"
                          />
                          <span className="text-white text-sm">
                            üö® Delete ALL Tasks
                          </span>
                        </label>

                        <label className="flex items-center gap-2 p-3 bg-white bg-opacity-10 rounded-lg cursor-pointer hover:bg-opacity-20 transition-all">
                          <input
                            type="checkbox"
                            checked={generalTemplate.canViewAllTrash || false}
                            onChange={(e) =>
                              setGeneralTemplate({
                                ...generalTemplate,
                                canViewAllTrash: e.target.checked,
                              })
                            }
                            className="w-4 h-4"
                          />
                          <span className="text-white text-sm">
                            üóëÔ∏è View All Trash
                          </span>
                        </label>

                        <label className="flex items-center gap-2 p-3 bg-white bg-opacity-10 rounded-lg cursor-pointer hover:bg-opacity-20 transition-all">
                          <input
                            type="checkbox"
                            checked={
                              generalTemplate.canViewAllCompleted || false
                            }
                            onChange={(e) =>
                              setGeneralTemplate({
                                ...generalTemplate,
                                canViewAllCompleted: e.target.checked,
                              })
                            }
                            className="w-4 h-4"
                          />
                          <span className="text-white text-sm">
                            ‚úÖ View All Completed
                          </span>
                        </label>

                        <label className="flex items-center gap-2 p-3 bg-white bg-opacity-10 rounded-lg cursor-pointer hover:bg-opacity-20 transition-all">
                          <input
                            type="checkbox"
                            checked={generalTemplate.canBulkImport || false}
                            onChange={(e) =>
                              setGeneralTemplate({
                                ...generalTemplate,
                                canBulkImport: e.target.checked,
                              })
                            }
                            className="w-4 h-4"
                          />
                          <span className="text-white text-sm">
                            üöÄ Quick Launch Access
                          </span>
                        </label>

                        <label className="flex items-center gap-2 p-3 bg-white bg-opacity-10 rounded-lg cursor-pointer hover:bg-opacity-20 transition-all">
                          <input
                            type="checkbox"
                            checked={generalTemplate.canDeletePresets || false}
                            onChange={(e) =>
                              setGeneralTemplate({
                                ...generalTemplate,
                                canDeletePresets: e.target.checked,
                              })
                            }
                            className="w-4 h-4"
                          />
                          <span className="text-white text-sm">
                            üóëÔ∏è Delete Quick Launch Presets
                          </span>
                        </label>

                        <label className="flex items-center gap-2 p-3 bg-white bg-opacity-10 rounded-lg cursor-pointer hover:bg-opacity-20 transition-all">
                          <input
                            type="checkbox"
                            checked={generalTemplate.canViewAnalytics || false}
                            onChange={(e) =>
                              setGeneralTemplate({
                                ...generalTemplate,
                                canViewAnalytics: e.target.checked,
                              })
                            }
                            className="w-4 h-4"
                          />
                          <span className="text-white text-sm">
                            üìä Access Reports Page
                          </span>
                        </label>

                        <label className="flex items-center gap-2 p-3 bg-white bg-opacity-10 rounded-lg cursor-pointer hover:bg-opacity-20 transition-all">
                          <input
                            type="checkbox"
                            checked={
                              generalTemplate.canViewTransferMetrics || false
                            }
                            onChange={(e) =>
                              setGeneralTemplate({
                                ...generalTemplate,
                                canViewTransferMetrics: e.target.checked,
                              })
                            }
                            className="w-4 h-4"
                          />
                          <span className="text-white text-sm">
                            üîÑ View Transfer Metrics
                          </span>
                        </label>

                        <label className="flex items-center gap-2 p-3 bg-white bg-opacity-10 rounded-lg cursor-pointer hover:bg-opacity-20 transition-all">
                          <input
                            type="checkbox"
                            checked={
                              generalTemplate.canViewStatusMetrics || false
                            }
                            onChange={(e) =>
                              setGeneralTemplate({
                                ...generalTemplate,
                                canViewStatusMetrics: e.target.checked,
                              })
                            }
                            className="w-4 h-4"
                          />
                          <span className="text-white text-sm">
                            üÜò View Status Tracking
                          </span>
                        </label>

                        <label className="flex items-center gap-2 p-3 bg-white bg-opacity-10 rounded-lg cursor-pointer hover:bg-opacity-20 transition-all">
                          <input
                            type="checkbox"
                            checked={
                              generalTemplate.canViewEscalations || false
                            }
                            onChange={(e) =>
                              setGeneralTemplate({
                                ...generalTemplate,
                                canViewEscalations: e.target.checked,
                              })
                            }
                            className="w-4 h-4"
                          />
                          <span className="text-white text-sm">
                            ‚è∞ View Escalation Reports
                          </span>
                        </label>

                        <label className="flex items-center gap-2 p-3 bg-white bg-opacity-10 rounded-lg cursor-pointer hover:bg-opacity-20 transition-all">
                          <input
                            type="checkbox"
                            checked={
                              generalTemplate.canViewTeamReports || false
                            }
                            onChange={(e) =>
                              setGeneralTemplate({
                                ...generalTemplate,
                                canViewTeamReports: e.target.checked,
                              })
                            }
                            className="w-4 h-4"
                          />
                          <span className="text-white text-sm">
                            üë• View Team Reports
                          </span>
                        </label>

                        <label className="flex items-center gap-2 p-3 bg-white bg-opacity-10 rounded-lg cursor-pointer hover:bg-opacity-20 transition-all">
                          <input
                            type="checkbox"
                            checked={generalTemplate.canExportReports || false}
                            onChange={(e) =>
                              setGeneralTemplate({
                                ...generalTemplate,
                                canExportReports: e.target.checked,
                              })
                            }
                            className="w-4 h-4"
                          />
                          <span className="text-white text-sm">
                            üì• Export Reports
                          </span>
                        </label>

                        <label className="flex items-center gap-2 p-3 bg-white bg-opacity-10 rounded-lg cursor-pointer hover:bg-opacity-20 transition-all">
                          <input
                            type="checkbox"
                            checked={
                              generalTemplate.canViewPerformanceMetrics || false
                            }
                            onChange={(e) =>
                              setGeneralTemplate({
                                ...generalTemplate,
                                canViewPerformanceMetrics: e.target.checked,
                              })
                            }
                            className="w-4 h-4"
                          />
                          <span className="text-white text-sm">
                            ‚è±Ô∏è View Performance Metrics
                          </span>
                        </label>

                        <label className="flex items-center gap-2 p-3 bg-white bg-opacity-10 rounded-lg cursor-pointer hover:bg-opacity-20 transition-all">
                          <input
                            type="checkbox"
                            checked={
                              generalTemplate.canViewPoolAnalytics || false
                            }
                            onChange={(e) =>
                              setGeneralTemplate({
                                ...generalTemplate,
                                canViewPoolAnalytics: e.target.checked,
                              })
                            }
                            className="w-4 h-4"
                          />
                          <span className="text-white text-sm">
                            üèä View Pool Analytics
                          </span>
                        </label>

                        <label className="flex items-center gap-2 p-3 bg-white bg-opacity-10 rounded-lg cursor-pointer hover:bg-opacity-20 transition-all">
                          <input
                            type="checkbox"
                            checked={
                              generalTemplate.canViewSkillPriority || false
                            }
                            onChange={(e) =>
                              setGeneralTemplate({
                                ...generalTemplate,
                                canViewSkillPriority: e.target.checked,
                              })
                            }
                            className="w-4 h-4"
                          />
                          <span className="text-white text-sm">
                            üéØ View Skills & Priority
                          </span>
                        </label>

                        <label className="flex items-center gap-2 p-3 bg-white bg-opacity-10 rounded-lg cursor-pointer hover:bg-opacity-20 transition-all">
                          <input
                            type="checkbox"
                            checked={generalTemplate.canViewTrends || false}
                            onChange={(e) =>
                              setGeneralTemplate({
                                ...generalTemplate,
                                canViewTrends: e.target.checked,
                              })
                            }
                            className="w-4 h-4"
                          />
                          <span className="text-white text-sm">
                            üìà View Trends & Patterns
                          </span>
                        </label>
                      </div>

                      {/* Action Buttons */}
                      <div className="flex flex-wrap gap-3">
                        <button
                          onClick={saveGeneralTemplate}
                          className="px-4 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded-lg font-medium transition-all"
                        >
                          üíæ Save Template
                        </button>
                        <button
                          onClick={applyTemplateToAll}
                          className="px-4 py-2 bg-purple-600 hover:bg-purple-700 text-white rounded-lg font-bold transition-all"
                        >
                          üéØ Apply to ALL Team Members ({teamMembers.length})
                        </button>
                        <button
                          onClick={() =>
                            applyTemplateToUser(selectedPermissionUser)
                          }
                          className="px-4 py-2 bg-green-600 hover:bg-green-700 text-white rounded-lg font-medium transition-all"
                        >
                          ‚ú® Apply to {selectedPermissionUser}
                        </button>
                      </div>

                      <div className="mt-4 bg-blue-900 bg-opacity-20 p-3 rounded-lg border border-blue-500 border-opacity-30">
                        <p className="text-blue-200 text-sm">
                          <strong>üí° How to use:</strong>
                          <br />
                          1. Configure the permissions you want as defaults
                          <br />
                          2. Click "Save Template" to save this configuration
                          <br />
                          3. Click "Apply to ALL" to apply to everyone, OR
                          <br />
                          4. Select a user below and click "Apply to [User]" for
                          individual application
                          <br />
                          5. After applying, you can still customize individual
                          users below
                        </p>
                      </div>
                    </div>

                    {/* Tab Visibility */}
                    <div className="section-card mb-6">
                      <h3 className="text-xl font-bold text-white mb-3">
                        üì± Visible Tabs
                      </h3>
                      <p className="text-gray-300 mb-4 text-sm">
                        Control which tabs {selectedPermissionUser} can see in
                        the dashboard
                      </p>
                      <div className="grid grid-cols-1 md:grid-cols-2 gap-3">
                        {[
                          {
                            id: "incoming",
                            label: "üì• Incoming",
                            description: "View incoming task requests",
                          },
                          {
                            id: "my-tasks",
                            label: "üìã My Tasks",
                            description: "Personal tasks",
                          },
                          {
                            id: "assigned-out",
                            label: "üì§ Assigned Out",
                            description: "Tasks assigned to others",
                          },
                          {
                            id: "pool",
                            label: "üèä Pool",
                            description: "Unassigned task pool",
                          },
                          {
                            id: "team",
                            label: "üéØ Team Requests",
                            description: "Team-wide requests",
                          },
                          {
                            id: "campfire",
                            label: "üî• Campfire",
                            description: "Special private channel",
                          },
                          {
                            id: "mentions",
                            label: "üí¨ Mentions",
                            description: "@mentions, replies, and role pings",
                          },
                          {
                            id: "future-tasks",
                            label: "üìÖ Future Tasks",
                            description: "Recurring task management",
                          },
                          {
                            id: "calendar",
                            label: "üìÜ Calendar",
                            description: "Calendar view",
                          },
                        ].map((tab) => (
                          <label
                            key={tab.id}
                            className="flex items-start gap-3 p-3 bg-white bg-opacity-10 rounded-lg cursor-pointer hover:bg-opacity-20 transition-all"
                          >
                            <input
                              type="checkbox"
                              checked={
                                userConfigs[
                                  selectedPermissionUser
                                ]?.visibleTabs?.includes(tab.id) || false
                              }
                              onChange={(e) => {
                                const currentConfig = userConfigs[
                                  selectedPermissionUser
                                ] || { ...DEFAULT_USER_CONFIG };
                                const visibleTabs =
                                  currentConfig.visibleTabs || [];
                                const newTabs = e.target.checked
                                  ? [...visibleTabs, tab.id]
                                  : visibleTabs.filter((t) => t !== tab.id);
                                setUserConfigs({
                                  ...userConfigs,
                                  [selectedPermissionUser]: {
                                    ...currentConfig,
                                    visibleTabs: newTabs,
                                  },
                                });
                              }}
                              className="mt-1 w-5 h-5 text-blue-600 bg-gray-600 border-gray-500 rounded focus:ring-blue-500"
                            />
                            <div className="flex-1">
                              <div className="text-white font-semibold">
                                {tab.label}
                              </div>
                              <div className="text-gray-400 text-sm">
                                {tab.description}
                              </div>
                            </div>
                          </label>
                        ))}
                      </div>
                    </div>

                    {/* Permissions */}
                    <div className="section-card mb-6">
                      <h3 className="text-xl font-bold text-white mb-3">
                        üîê Permissions
                      </h3>
                      <p className="text-gray-300 mb-4 text-sm">
                        Grant special permissions to {selectedPermissionUser}
                      </p>
                      <div className="space-y-3">
                        <label className="flex items-center gap-3 p-3 bg-white bg-opacity-10 rounded-lg cursor-pointer hover:bg-opacity-20 transition-all">
                          <input
                            type="checkbox"
                            checked={
                              userConfigs[selectedPermissionUser]
                                ?.canViewTeamActivity || false
                            }
                            onChange={(e) => {
                              const currentConfig = userConfigs[
                                selectedPermissionUser
                              ] || { ...DEFAULT_USER_CONFIG };
                              setUserConfigs({
                                ...userConfigs,
                                [selectedPermissionUser]: {
                                  ...currentConfig,
                                  canViewTeamActivity: e.target.checked,
                                },
                              });
                            }}
                            className="w-5 h-5 text-blue-600 bg-gray-600 border-gray-500 rounded focus:ring-blue-500"
                          />
                          <div className="flex-1">
                            <div className="text-white font-semibold">
                              üë• Team Activity View
                            </div>
                            <div className="text-gray-400 text-sm">
                              Can view all task assignments across the entire
                              team
                            </div>
                          </div>
                        </label>

                        <label className="flex items-center gap-3 p-3 bg-white bg-opacity-10 rounded-lg cursor-pointer hover:bg-opacity-20 transition-all">
                          <input
                            type="checkbox"
                            checked={
                              userConfigs[selectedPermissionUser]?.isAdmin ||
                              false
                            }
                            onChange={(e) => {
                              const currentConfig = userConfigs[
                                selectedPermissionUser
                              ] || { ...DEFAULT_USER_CONFIG };
                              setUserConfigs({
                                ...userConfigs,
                                [selectedPermissionUser]: {
                                  ...currentConfig,
                                  isAdmin: e.target.checked,
                                },
                              });
                            }}
                            className="w-5 h-5 text-blue-600 bg-gray-600 border-gray-500 rounded focus:ring-blue-500"
                          />
                          <div className="flex-1">
                            <div className="text-white font-semibold">
                              ‚öôÔ∏è Admin Access
                            </div>
                            <div className="text-gray-400 text-sm">
                              Can access admin panel and manage settings
                            </div>
                          </div>
                        </label>
                      </div>
                    </div>

                    {/* Delete Permissions */}
                    <div className="section-card mb-6">
                      <h3 className="text-xl font-bold text-white mb-3">
                        üóëÔ∏è Delete Permissions
                      </h3>
                      <p className="text-gray-300 mb-4 text-sm">
                        Control what {selectedPermissionUser} can delete
                      </p>
                      <div className="space-y-3">
                        <label className="flex items-center gap-3 p-3 bg-white bg-opacity-10 rounded-lg cursor-pointer hover:bg-opacity-20 transition-all">
                          <input
                            type="checkbox"
                            checked={
                              userConfigs[selectedPermissionUser]
                                ?.canDeleteOwnTasks ?? true
                            }
                            onChange={(e) => {
                              const currentConfig = userConfigs[
                                selectedPermissionUser
                              ] || { ...DEFAULT_USER_CONFIG };
                              setUserConfigs({
                                ...userConfigs,
                                [selectedPermissionUser]: {
                                  ...currentConfig,
                                  canDeleteOwnTasks: e.target.checked,
                                },
                              });
                            }}
                            className="w-5 h-5 text-blue-600 bg-gray-600 border-gray-500 rounded focus:ring-blue-500"
                          />
                          <div className="flex-1">
                            <div className="text-white font-semibold">
                              ‚úÖ Can Delete Own Tasks
                            </div>
                            <div className="text-gray-400 text-sm">
                              Can delete tasks they created or are assigned to
                              them
                            </div>
                          </div>
                        </label>

                        <label className="flex items-center gap-3 p-3 bg-white bg-opacity-10 rounded-lg cursor-pointer hover:bg-opacity-20 transition-all">
                          <input
                            type="checkbox"
                            checked={
                              userConfigs[selectedPermissionUser]
                                ?.canDeletePoolTasks || false
                            }
                            onChange={(e) => {
                              const currentConfig = userConfigs[
                                selectedPermissionUser
                              ] || { ...DEFAULT_USER_CONFIG };
                              setUserConfigs({
                                ...userConfigs,
                                [selectedPermissionUser]: {
                                  ...currentConfig,
                                  canDeletePoolTasks: e.target.checked,
                                },
                              });
                            }}
                            className="w-5 h-5 text-blue-600 bg-gray-600 border-gray-500 rounded focus:ring-blue-500"
                          />
                          <div className="flex-1">
                            <div className="text-white font-semibold">
                              üèä Can Delete Pool Tasks
                            </div>
                            <div className="text-gray-400 text-sm">
                              Can delete unassigned tasks from pool channels
                              (managers/leads)
                            </div>
                          </div>
                        </label>

                        <label className="flex items-center gap-3 p-3 bg-white bg-opacity-10 rounded-lg cursor-pointer hover:bg-opacity-20 transition-all">
                          <input
                            type="checkbox"
                            checked={
                              userConfigs[selectedPermissionUser]
                                ?.canDeleteOthersTasks || false
                            }
                            onChange={(e) => {
                              const currentConfig = userConfigs[
                                selectedPermissionUser
                              ] || { ...DEFAULT_USER_CONFIG };
                              setUserConfigs({
                                ...userConfigs,
                                [selectedPermissionUser]: {
                                  ...currentConfig,
                                  canDeleteOthersTasks: e.target.checked,
                                },
                              });
                            }}
                            className="w-5 h-5 text-blue-600 bg-gray-600 border-gray-500 rounded focus:ring-blue-500"
                          />
                          <div className="flex-1">
                            <div className="text-white font-semibold">
                              üë§ Can Delete Other's Tasks
                            </div>
                            <div className="text-gray-400 text-sm">
                              Can delete tasks assigned to other team members
                            </div>
                          </div>
                        </label>

                        <label className="flex items-center gap-3 p-3 bg-red-900 bg-opacity-20 rounded-lg cursor-pointer hover:bg-opacity-30 transition-all border border-red-500 border-opacity-30">
                          <input
                            type="checkbox"
                            checked={
                              userConfigs[selectedPermissionUser]
                                ?.canDeleteAllTasks || false
                            }
                            onChange={(e) => {
                              const currentConfig = userConfigs[
                                selectedPermissionUser
                              ] || { ...DEFAULT_USER_CONFIG };
                              setUserConfigs({
                                ...userConfigs,
                                [selectedPermissionUser]: {
                                  ...currentConfig,
                                  canDeleteAllTasks: e.target.checked,
                                },
                              });
                            }}
                            className="w-5 h-5 text-red-600 bg-gray-600 border-gray-500 rounded focus:ring-red-500"
                          />
                          <div className="flex-1">
                            <div className="text-white font-semibold">
                              üö® Can Delete ALL Tasks
                            </div>
                            <div className="text-gray-400 text-sm">
                              ‚ö†Ô∏è Super admin - can delete ANY task from anywhere
                              (use carefully!)
                            </div>
                          </div>
                        </label>
                      </div>
                    </div>

                    {/* Trash & Completed Visibility */}
                    <div className="section-card mb-6">
                      <h3 className="text-xl font-bold text-white mb-3">
                        üëÅÔ∏è Trash & Completed Visibility
                      </h3>
                      <p className="text-gray-300 mb-4 text-sm">
                        Control what {selectedPermissionUser} can see in Trash
                        and Completed tabs
                      </p>
                      <div className="space-y-3">
                        <label className="flex items-center gap-3 p-3 bg-white bg-opacity-10 rounded-lg cursor-pointer hover:bg-opacity-20 transition-all">
                          <input
                            type="checkbox"
                            checked={
                              userConfigs[selectedPermissionUser]
                                ?.canViewAllTrash || false
                            }
                            onChange={(e) => {
                              const currentConfig = userConfigs[
                                selectedPermissionUser
                              ] || { ...DEFAULT_USER_CONFIG };
                              setUserConfigs({
                                ...userConfigs,
                                [selectedPermissionUser]: {
                                  ...currentConfig,
                                  canViewAllTrash: e.target.checked,
                                },
                              });
                            }}
                            className="w-5 h-5 text-blue-600 bg-gray-600 border-gray-500 rounded focus:ring-blue-500"
                          />
                          <div className="flex-1">
                            <div className="text-white font-semibold">
                              üóëÔ∏è Can View All Trash
                            </div>
                            <div className="text-gray-400 text-sm">
                              Can see everyone's deleted tasks (shows who
                              deleted each task)
                            </div>
                          </div>
                        </label>

                        <label className="flex items-center gap-3 p-3 bg-white bg-opacity-10 rounded-lg cursor-pointer hover:bg-opacity-20 transition-all">
                          <input
                            type="checkbox"
                            checked={
                              userConfigs[selectedPermissionUser]
                                ?.canViewAllCompleted || false
                            }
                            onChange={(e) => {
                              const currentConfig = userConfigs[
                                selectedPermissionUser
                              ] || { ...DEFAULT_USER_CONFIG };
                              setUserConfigs({
                                ...userConfigs,
                                [selectedPermissionUser]: {
                                  ...currentConfig,
                                  canViewAllCompleted: e.target.checked,
                                },
                              });
                            }}
                            className="w-5 h-5 text-blue-600 bg-gray-600 border-gray-500 rounded focus:ring-blue-500"
                          />
                          <div className="flex-1">
                            <div className="text-white font-semibold">
                              ‚úÖ Can View All Completed
                            </div>
                            <div className="text-gray-400 text-sm">
                              Can see everyone's completed tasks (shows who
                              completed each task)
                            </div>
                          </div>
                        </label>

                        <label className="flex items-center gap-3 p-3 bg-white bg-opacity-10 rounded-lg cursor-pointer hover:bg-opacity-20 transition-all">
                          <input
                            type="checkbox"
                            checked={
                              userConfigs[selectedPermissionUser]
                                ?.canBulkImport || false
                            }
                            onChange={(e) => {
                              const currentConfig = userConfigs[
                                selectedPermissionUser
                              ] || { ...DEFAULT_USER_CONFIG };
                              setUserConfigs({
                                ...userConfigs,
                                [selectedPermissionUser]: {
                                  ...currentConfig,
                                  canBulkImport: e.target.checked,
                                },
                              });
                            }}
                            className="w-5 h-5 text-blue-600 bg-gray-600 border-gray-500 rounded focus:ring-blue-500"
                          />
                          <div className="flex-1">
                            <div className="text-white font-semibold">
                              üöÄ Quick Launch Access
                            </div>
                            <div className="text-gray-400 text-sm">
                              Can access Quick Launch for bulk task imports from
                              CRM
                            </div>
                          </div>
                        </label>

                        <label className="flex items-center gap-3 p-3 bg-white bg-opacity-10 rounded-lg cursor-pointer hover:bg-opacity-20 transition-all">
                          <input
                            type="checkbox"
                            checked={
                              userConfigs[selectedPermissionUser]
                                ?.canDeletePresets || false
                            }
                            onChange={(e) => {
                              const currentConfig = userConfigs[
                                selectedPermissionUser
                              ] || { ...DEFAULT_USER_CONFIG };
                              setUserConfigs({
                                ...userConfigs,
                                [selectedPermissionUser]: {
                                  ...currentConfig,
                                  canDeletePresets: e.target.checked,
                                },
                              });
                            }}
                            className="w-5 h-5 text-blue-600 bg-gray-600 border-gray-500 rounded focus:ring-blue-500"
                          />
                          <div className="flex-1">
                            <div className="text-white font-semibold">
                              üóëÔ∏è Can Delete Quick Launch Presets
                            </div>
                            <div className="text-gray-400 text-sm">
                              Can delete column mapping presets in Quick Launch
                              (admins always have this)
                            </div>
                          </div>
                        </label>

                        <div className="bg-blue-900 bg-opacity-20 p-3 rounded-lg border border-blue-500 border-opacity-30">
                          <p className="text-blue-300 text-sm">
                            <strong>‚ÑπÔ∏è How this works:</strong>
                            <br />
                            <span className="text-gray-300">
                              ‚Ä¢ Regular users only see their own trash/completed
                              <br />
                              ‚Ä¢ Users with these permissions see EVERYONE's
                              trash/completed
                              <br />‚Ä¢ Each task shows "Deleted by [Name]" or
                              "Completed by [Name]"
                            </span>
                          </p>
                        </div>
                      </div>
                    </div>

                    {/* Reports & Analytics Permissions */}
                    <div className="section-card mb-6">
                      <h3 className="text-xl font-bold text-white mb-3">
                        üìä Reports & Analytics Access
                      </h3>
                      <p className="text-gray-300 mb-4 text-sm">
                        Control what reports and analytics{" "}
                        {selectedPermissionUser} can view
                      </p>
                      <div className="space-y-3">
                        <label className="flex items-center gap-3 p-3 bg-white bg-opacity-10 rounded-lg cursor-pointer hover:bg-opacity-20 transition-all">
                          <input
                            type="checkbox"
                            checked={
                              userConfigs[selectedPermissionUser]
                                ?.canViewAnalytics || false
                            }
                            onChange={(e) => {
                              const currentConfig = userConfigs[
                                selectedPermissionUser
                              ] || { ...DEFAULT_USER_CONFIG };
                              setUserConfigs({
                                ...userConfigs,
                                [selectedPermissionUser]: {
                                  ...currentConfig,
                                  canViewAnalytics: e.target.checked,
                                },
                              });
                            }}
                            className="w-5 h-5 text-blue-600 bg-gray-600 border-gray-500 rounded focus:ring-blue-500"
                          />
                          <div className="flex-1">
                            <div className="text-white font-semibold">
                              üìä Access Reports Page
                            </div>
                            <div className="text-gray-400 text-sm">
                              Base permission - required to access Reports &
                              Analytics page
                            </div>
                          </div>
                        </label>

                        <label className="flex items-center gap-3 p-3 bg-white bg-opacity-10 rounded-lg cursor-pointer hover:bg-opacity-20 transition-all">
                          <input
                            type="checkbox"
                            checked={
                              userConfigs[selectedPermissionUser]
                                ?.canViewTransferMetrics || false
                            }
                            onChange={(e) => {
                              const currentConfig = userConfigs[
                                selectedPermissionUser
                              ] || { ...DEFAULT_USER_CONFIG };
                              setUserConfigs({
                                ...userConfigs,
                                [selectedPermissionUser]: {
                                  ...currentConfig,
                                  canViewTransferMetrics: e.target.checked,
                                },
                              });
                            }}
                            className="w-5 h-5 text-blue-600 bg-gray-600 border-gray-500 rounded focus:ring-blue-500"
                          />
                          <div className="flex-1">
                            <div className="text-white font-semibold">
                              üîÑ View Transfer Metrics
                            </div>
                            <div className="text-gray-400 text-sm">
                              Can view transfer request accept/deny rates and
                              trends
                            </div>
                          </div>
                        </label>

                        <label className="flex items-center gap-3 p-3 bg-white bg-opacity-10 rounded-lg cursor-pointer hover:bg-opacity-20 transition-all">
                          <input
                            type="checkbox"
                            checked={
                              userConfigs[selectedPermissionUser]
                                ?.canViewStatusMetrics || false
                            }
                            onChange={(e) => {
                              const currentConfig = userConfigs[
                                selectedPermissionUser
                              ] || { ...DEFAULT_USER_CONFIG };
                              setUserConfigs({
                                ...userConfigs,
                                [selectedPermissionUser]: {
                                  ...currentConfig,
                                  canViewStatusMetrics: e.target.checked,
                                },
                              });
                            }}
                            className="w-5 h-5 text-blue-600 bg-gray-600 border-gray-500 rounded focus:ring-blue-500"
                          />
                          <div className="flex-1">
                            <div className="text-white font-semibold">
                              üÜò View Status Tracking
                            </div>
                            <div className="text-gray-400 text-sm">
                              Can view swamped/busy status frequency and trends
                            </div>
                          </div>
                        </label>

                        <label className="flex items-center gap-3 p-3 bg-white bg-opacity-10 rounded-lg cursor-pointer hover:bg-opacity-20 transition-all">
                          <input
                            type="checkbox"
                            checked={
                              userConfigs[selectedPermissionUser]
                                ?.canViewEscalations || false
                            }
                            onChange={(e) => {
                              const currentConfig = userConfigs[
                                selectedPermissionUser
                              ] || { ...DEFAULT_USER_CONFIG };
                              setUserConfigs({
                                ...userConfigs,
                                [selectedPermissionUser]: {
                                  ...currentConfig,
                                  canViewEscalations: e.target.checked,
                                },
                              });
                            }}
                            className="w-5 h-5 text-blue-600 bg-gray-600 border-gray-500 rounded focus:ring-blue-500"
                          />
                          <div className="flex-1">
                            <div className="text-white font-semibold">
                              ‚è∞ View Escalation Reports
                            </div>
                            <div className="text-gray-400 text-sm">
                              Can view task escalations and response time
                              metrics
                            </div>
                          </div>
                        </label>

                        <label className="flex items-center gap-3 p-3 bg-white bg-opacity-10 rounded-lg cursor-pointer hover:bg-opacity-20 transition-all">
                          <input
                            type="checkbox"
                            checked={
                              userConfigs[selectedPermissionUser]
                                ?.canViewTeamReports || false
                            }
                            onChange={(e) => {
                              const currentConfig = userConfigs[
                                selectedPermissionUser
                              ] || { ...DEFAULT_USER_CONFIG };
                              setUserConfigs({
                                ...userConfigs,
                                [selectedPermissionUser]: {
                                  ...currentConfig,
                                  canViewTeamReports: e.target.checked,
                                },
                              });
                            }}
                            className="w-5 h-5 text-blue-600 bg-gray-600 border-gray-500 rounded focus:ring-blue-500"
                          />
                          <div className="flex-1">
                            <div className="text-white font-semibold">
                              üë• View Team Reports
                            </div>
                            <div className="text-gray-400 text-sm">
                              Can view individual team member performance and
                              workload
                            </div>
                          </div>
                        </label>

                        <label className="flex items-center gap-3 p-3 bg-white bg-opacity-10 rounded-lg cursor-pointer hover:bg-opacity-20 transition-all">
                          <input
                            type="checkbox"
                            checked={
                              userConfigs[selectedPermissionUser]
                                ?.canExportReports || false
                            }
                            onChange={(e) => {
                              const currentConfig = userConfigs[
                                selectedPermissionUser
                              ] || { ...DEFAULT_USER_CONFIG };
                              setUserConfigs({
                                ...userConfigs,
                                [selectedPermissionUser]: {
                                  ...currentConfig,
                                  canExportReports: e.target.checked,
                                },
                              });
                            }}
                            className="w-5 h-5 text-blue-600 bg-gray-600 border-gray-500 rounded focus:ring-blue-500"
                          />
                          <div className="flex-1">
                            <div className="text-white font-semibold">
                              üì• Export Reports
                            </div>
                            <div className="text-gray-400 text-sm">
                              Can export reports and analytics data to CSV/PDF
                            </div>
                          </div>
                        </label>

                        <label className="flex items-center gap-3 p-3 bg-white bg-opacity-10 rounded-lg cursor-pointer hover:bg-opacity-20 transition-all">
                          <input
                            type="checkbox"
                            checked={
                              userConfigs[selectedPermissionUser]
                                ?.canViewPerformanceMetrics || false
                            }
                            onChange={(e) => {
                              const currentConfig = userConfigs[
                                selectedPermissionUser
                              ] || { ...DEFAULT_USER_CONFIG };
                              setUserConfigs({
                                ...userConfigs,
                                [selectedPermissionUser]: {
                                  ...currentConfig,
                                  canViewPerformanceMetrics: e.target.checked,
                                },
                              });
                            }}
                            className="w-5 h-5 text-blue-600 bg-gray-600 border-gray-500 rounded focus:ring-blue-500"
                          />
                          <div className="flex-1">
                            <div className="text-white font-semibold">
                              ‚è±Ô∏è View Performance Metrics
                            </div>
                            <div className="text-gray-400 text-sm">
                              Can view task completion time and response time
                              analytics
                            </div>
                          </div>
                        </label>

                        <label className="flex items-center gap-3 p-3 bg-white bg-opacity-10 rounded-lg cursor-pointer hover:bg-opacity-20 transition-all">
                          <input
                            type="checkbox"
                            checked={
                              userConfigs[selectedPermissionUser]
                                ?.canViewPoolAnalytics || false
                            }
                            onChange={(e) => {
                              const currentConfig = userConfigs[
                                selectedPermissionUser
                              ] || { ...DEFAULT_USER_CONFIG };
                              setUserConfigs({
                                ...userConfigs,
                                [selectedPermissionUser]: {
                                  ...currentConfig,
                                  canViewPoolAnalytics: e.target.checked,
                                },
                              });
                            }}
                            className="w-5 h-5 text-blue-600 bg-gray-600 border-gray-500 rounded focus:ring-blue-500"
                          />
                          <div className="flex-1">
                            <div className="text-white font-semibold">
                              üèä View Pool Analytics
                            </div>
                            <div className="text-gray-400 text-sm">
                              Can view pool task claim rates and wait time
                              metrics
                            </div>
                          </div>
                        </label>

                        <label className="flex items-center gap-3 p-3 bg-white bg-opacity-10 rounded-lg cursor-pointer hover:bg-opacity-20 transition-all">
                          <input
                            type="checkbox"
                            checked={
                              userConfigs[selectedPermissionUser]
                                ?.canViewSkillPriority || false
                            }
                            onChange={(e) => {
                              const currentConfig = userConfigs[
                                selectedPermissionUser
                              ] || { ...DEFAULT_USER_CONFIG };
                              setUserConfigs({
                                ...userConfigs,
                                [selectedPermissionUser]: {
                                  ...currentConfig,
                                  canViewSkillPriority: e.target.checked,
                                },
                              });
                            }}
                            className="w-5 h-5 text-blue-600 bg-gray-600 border-gray-500 rounded focus:ring-blue-500"
                          />
                          <div className="flex-1">
                            <div className="text-white font-semibold">
                              üéØ View Skills & Priority
                            </div>
                            <div className="text-gray-400 text-sm">
                              Can view skill matching effectiveness and priority
                              distribution
                            </div>
                          </div>
                        </label>

                        <label className="flex items-center gap-3 p-3 bg-white bg-opacity-10 rounded-lg cursor-pointer hover:bg-opacity-20 transition-all">
                          <input
                            type="checkbox"
                            checked={
                              userConfigs[selectedPermissionUser]
                                ?.canViewTrends || false
                            }
                            onChange={(e) => {
                              const currentConfig = userConfigs[
                                selectedPermissionUser
                              ] || { ...DEFAULT_USER_CONFIG };
                              setUserConfigs({
                                ...userConfigs,
                                [selectedPermissionUser]: {
                                  ...currentConfig,
                                  canViewTrends: e.target.checked,
                                },
                              });
                            }}
                            className="w-5 h-5 text-blue-600 bg-gray-600 border-gray-500 rounded focus:ring-blue-500"
                          />
                          <div className="flex-1">
                            <div className="text-white font-semibold">
                              üìà View Trends & Patterns
                            </div>
                            <div className="text-gray-400 text-sm">
                              Can view overdue trends, help requests, and
                              assignment patterns
                            </div>
                          </div>
                        </label>

                        <div className="bg-emerald-900 bg-opacity-20 p-3 rounded-lg border border-emerald-500 border-opacity-30">
                          <p className="text-emerald-300 text-sm">
                            <strong>‚ÑπÔ∏è Note:</strong>
                            <br />
                            <span className="text-gray-300">
                              ‚Ä¢ Admins automatically have access to all reports
                              <br />
                              ‚Ä¢ Managers automatically have team reports access
                              <br />‚Ä¢ Base "Access Reports Page" permission
                              required for all sections
                            </span>
                          </p>
                        </div>
                      </div>
                    </div>

                    {/* Special Channels */}
                    <div className="section-card mb-6">
                      <h3 className="text-xl font-bold text-white mb-3">
                        üéØ Special Channels
                      </h3>
                      <p className="text-gray-300 mb-4 text-sm">
                        Configure special Discord channels for{" "}
                        {selectedPermissionUser}
                      </p>
                      <div className="space-y-3">
                        <div>
                          <label className="block text-sm font-medium text-gray-300 mb-2">
                            üî• Campfire Channel ID
                          </label>
                          <input
                            type="text"
                            value={
                              userConfigs[selectedPermissionUser]
                                ?.campfireChannel || ""
                            }
                            onChange={(e) => {
                              const currentConfig = userConfigs[
                                selectedPermissionUser
                              ] || { ...DEFAULT_USER_CONFIG };
                              setUserConfigs({
                                ...userConfigs,
                                [selectedPermissionUser]: {
                                  ...currentConfig,
                                  campfireChannel: e.target.value || null,
                                },
                              });
                            }}
                            placeholder="Discord channel ID for private campfire tasks"
                            className="w-full px-4 py-3 bg-white bg-opacity-20 text-white rounded-lg border border-white border-opacity-30 focus:outline-none focus:border-opacity-60 placeholder-gray-400"
                          />
                        </div>

                        <div>
                          <label className="block text-sm font-medium text-gray-300 mb-2">
                            üì∏ Photo Tasks Channel ID
                          </label>
                          <input
                            type="text"
                            value={
                              userConfigs[selectedPermissionUser]
                                ?.photoTasksChannel || ""
                            }
                            onChange={(e) => {
                              const currentConfig = userConfigs[
                                selectedPermissionUser
                              ] || { ...DEFAULT_USER_CONFIG };
                              setUserConfigs({
                                ...userConfigs,
                                [selectedPermissionUser]: {
                                  ...currentConfig,
                                  photoTasksChannel: e.target.value || null,
                                },
                              });
                            }}
                            placeholder="Discord channel ID for photo-related tasks"
                            className="w-full px-4 py-3 bg-white bg-opacity-20 text-white rounded-lg border border-white border-opacity-30 focus:outline-none focus:border-opacity-60 placeholder-gray-400"
                          />
                        </div>
                      </div>
                    </div>

                    {/* Save Buttons */}
                    <div className="flex gap-3">
                      <button
                        onClick={saveUserPermissions}
                        className="save-button px-6 py-3 text-white rounded-lg font-bold"
                      >
                        üíæ Save User Permissions
                      </button>
                      <button
                        onClick={async () => {
                          saveUserPermissions(); // Save locally first
                          await saveToAPI(); // Then sync to bot
                        }}
                        disabled={loading}
                        className="save-button px-6 py-3 text-white rounded-lg font-bold disabled:opacity-50"
                      >
                        {loading ? "‚è≥ Saving to Bot..." : "üöÄ Save to Bot"}
                      </button>
                    </div>
                  </div>
                )}

                {/* Channels Section */}
                {activeSection === "channels" && (
                  <div>
                    <h2 className="text-3xl font-bold text-white mb-6">
                      üì∫ Channel Configuration
                    </h2>

                    {/* Pool Channels */}
                    <div className="section-card">
                      <h3 className="text-xl font-bold text-white mb-4">
                        üèä Pool Channels
                      </h3>
                      <p className="text-gray-300 mb-4">
                        Shared task pools for teams
                      </p>

                      <div className="space-y-2 mb-4">
                        {poolChannels.map((channel) => (
                          <div key={channel.id} className="user-item">
                            <div>
                              <span className="text-white font-medium">
                                {channel.name}
                              </span>
                              <span className="text-gray-400 text-sm ml-2">
                                ID: {channel.id}
                              </span>
                            </div>
                            <button
                              onClick={() => removePoolChannel(channel.id)}
                              className="delete-button px-3 py-1 text-white rounded text-sm"
                            >
                              Remove
                            </button>
                          </div>
                        ))}
                      </div>

                      <div className="grid grid-cols-1 md:grid-cols-3 gap-3">
                        <input
                          type="text"
                          placeholder="Channel Name"
                          value={newChannelName}
                          onChange={(e) => setNewChannelName(e.target.value)}
                          className="px-4 py-2 bg-white bg-opacity-20 text-white rounded-lg border border-white border-opacity-30"
                        />
                        <input
                          type="text"
                          placeholder="Channel ID"
                          value={newChannelId}
                          onChange={(e) => setNewChannelId(e.target.value)}
                          className="px-4 py-2 bg-white bg-opacity-20 text-white rounded-lg border border-white border-opacity-30"
                        />
                        <button
                          onClick={addPoolChannel}
                          className="save-button px-4 py-2 text-white rounded-lg font-medium"
                        >
                          + Add Pool
                        </button>
                      </div>
                    </div>

                    {/* Personal Channels */}
                    <div className="section-card">
                      <h3 className="text-xl font-bold text-white mb-4">
                        üë§ Personal Assignment Channels
                      </h3>
                      <p className="text-gray-300 mb-4">
                        Individual task channels for team members
                      </p>

                      <div className="space-y-2 mb-4 max-h-96 overflow-y-auto">
                        {personalChannels.map((channel) => (
                          <div key={channel.id} className="user-item">
                            <div>
                              <span className="text-white font-medium">
                                {channel.name}
                              </span>
                              <span className="text-gray-400 text-sm ml-2">
                                ID: {channel.id}
                              </span>
                            </div>
                            <button
                              onClick={() => removePersonalChannel(channel.id)}
                              className="delete-button px-3 py-1 text-white rounded text-sm"
                            >
                              Remove
                            </button>
                          </div>
                        ))}
                      </div>

                      <div className="grid grid-cols-1 md:grid-cols-3 gap-3">
                        <input
                          type="text"
                          placeholder="User Name"
                          value={newChannelName}
                          onChange={(e) => setNewChannelName(e.target.value)}
                          className="px-4 py-2 bg-white bg-opacity-20 text-white rounded-lg border border-white border-opacity-30"
                        />
                        <input
                          type="text"
                          placeholder="Channel ID"
                          value={newChannelId}
                          onChange={(e) => setNewChannelId(e.target.value)}
                          className="px-4 py-2 bg-white bg-opacity-20 text-white rounded-lg border border-white border-opacity-30"
                        />
                        <button
                          onClick={addPersonalChannel}
                          className="save-button px-4 py-2 text-white rounded-lg font-medium"
                        >
                          + Add Channel
                        </button>
                      </div>
                    </div>

                    <div className="flex gap-3">
                      <button
                        onClick={saveConfig}
                        className="save-button px-6 py-3 text-white rounded-lg font-bold"
                      >
                        üíæ Save Locally
                      </button>
                      <button
                        onClick={saveToAPI}
                        disabled={loading}
                        className="save-button px-6 py-3 text-white rounded-lg font-bold disabled:opacity-50"
                      >
                        {loading ? "‚è≥ Saving to Bot..." : "üöÄ Save to Bot"}
                      </button>
                    </div>
                  </div>
                )}

                {/* Custom Reactions Section */}
                {activeSection === "reactions" && (
                  <div>
                    <h2 className="text-3xl font-bold text-white mb-6">
                      ‚≠ê Custom Reaction Auto-Assignment
                    </h2>
                    <p className="text-gray-300 mb-4">
                      Configure emoji reactions that work{" "}
                      <strong className="text-blue-300">server-wide</strong> (in
                      any Discord channel). When someone reacts with the emoji,
                      the task automatically assigns to the specified user and
                      routes to their channel.
                    </p>

                    <div className="section-card">
                      <h3 className="text-xl font-bold text-white mb-4">
                        Current Reaction Assignments
                      </h3>
                      <p className="text-gray-300 mb-4 text-sm">
                        üåê These reactions work in{" "}
                        <strong>ALL Discord channels</strong>. The "Channel"
                        shows where tasks get routed.
                      </p>

                      <div className="space-y-2 mb-4">
                        {reactionAssignments.length === 0 ? (
                          <div className="text-gray-400 italic text-sm">
                            No custom reactions configured yet. Add one below!
                          </div>
                        ) : (
                          reactionAssignments.map((reaction) => (
                            <div key={reaction.emoji} className="user-item">
                              <div className="flex items-center gap-4">
                                <span className="text-3xl">
                                  {reaction.emoji}
                                </span>
                                <div>
                                  <div className="text-white font-medium">
                                    {reaction.user}
                                  </div>
                                  <div className="text-gray-400 text-xs">
                                    ID: {reaction.userId} ‚Üí Channel:{" "}
                                    {reaction.channelId || "Default"}
                                    {reaction.description && (
                                      <span className="ml-2">
                                        | {reaction.description}
                                      </span>
                                    )}
                                  </div>
                                </div>
                              </div>
                              <button
                                onClick={() =>
                                  removeReactionAssignment(reaction.emoji)
                                }
                                className="delete-button px-3 py-1 text-white rounded text-sm"
                              >
                                Remove
                              </button>
                            </div>
                          ))
                        )}
                      </div>

                      {/* Add New Reaction */}
                      <div className="bg-white bg-opacity-5 p-4 rounded-lg border border-white border-opacity-20">
                        <h4 className="text-white font-semibold mb-3">
                          ‚ûï Add New Reaction Assignment
                        </h4>

                        <div className="grid grid-cols-1 md:grid-cols-2 gap-4 mb-3">
                          {/* Emoji Input */}
                          <div>
                            <label className="block text-sm font-medium text-gray-300 mb-2">
                              Emoji Reaction
                            </label>
                            <input
                              type="text"
                              placeholder="üìÖ (paste emoji here)"
                              value={newReactionEmoji}
                              onChange={(e) =>
                                setNewReactionEmoji(e.target.value)
                              }
                              className="w-full px-4 py-2 bg-white bg-opacity-20 text-white rounded-lg border border-white border-opacity-30 focus:outline-none focus:border-opacity-60 text-2xl text-center"
                            />
                          </div>

                          {/* User Dropdown */}
                          <div>
                            <label className="block text-sm font-medium text-gray-300 mb-2">
                              Assign To User
                            </label>
                            <select
                              value={newReactionUser}
                              onChange={(e) => {
                                setNewReactionUser(e.target.value);
                                // Auto-fill user ID when user is selected
                                const member = TEAM_MEMBERS.find(
                                  (m) => m.name === e.target.value,
                                );
                                if (member) {
                                  setNewReactionUserId(member.discordId);
                                }
                              }}
                              className="w-full px-4 py-2 bg-white bg-opacity-20 text-white rounded-lg border border-white border-opacity-30 focus:outline-none focus:border-opacity-60"
                            >
                              <option value="" className="bg-gray-800">
                                -- Select User --
                              </option>
                              {TEAM_MEMBERS.map((member) => (
                                <option
                                  key={member.discordId}
                                  value={member.name}
                                  className="bg-gray-800"
                                >
                                  {member.name}
                                </option>
                              ))}
                            </select>
                          </div>
                        </div>

                        <div className="grid grid-cols-1 md:grid-cols-2 gap-4 mb-3">
                          {/* Channel Dropdown */}
                          <div>
                            <label className="block text-sm font-medium text-gray-300 mb-2">
                              Task Destination Channel (Optional)
                              <span className="block text-xs text-gray-400 mt-1">
                                Where should the task be routed? (Reaction works
                                server-wide)
                              </span>
                            </label>
                            <select
                              value={newReactionChannelId}
                              onChange={(e) =>
                                setNewReactionChannelId(e.target.value)
                              }
                              className="w-full px-4 py-2 bg-white bg-opacity-20 text-white rounded-lg border border-white border-opacity-30 focus:outline-none focus:border-opacity-60"
                            >
                              <option value="" className="bg-gray-800">
                                üåê Default Channel (Reaction works everywhere)
                              </option>
                              <optgroup
                                label="Pool Channels"
                                className="bg-gray-800"
                              >
                                {poolChannels.map((channel) => (
                                  <option
                                    key={channel.id}
                                    value={channel.id}
                                    className="bg-gray-800"
                                  >
                                    {channel.name}
                                  </option>
                                ))}
                              </optgroup>
                              <optgroup
                                label="Personal Channels"
                                className="bg-gray-800"
                              >
                                {personalChannels.map((channel) => (
                                  <option
                                    key={channel.id}
                                    value={channel.id}
                                    className="bg-gray-800"
                                  >
                                    {channel.name}
                                  </option>
                                ))}
                              </optgroup>
                              <option value="custom" className="bg-gray-800">
                                ‚úèÔ∏è Enter Custom Channel ID
                              </option>
                            </select>
                          </div>

                          {/* Description */}
                          <div>
                            <label className="block text-sm font-medium text-gray-300 mb-2">
                              Description (Optional)
                            </label>
                            <input
                              type="text"
                              placeholder="e.g., 'Scheduling tasks for calendar'"
                              value={
                                newReactionUser
                                  ? `${newReactionEmoji} ‚Üí ${newReactionUser}'s tasks`
                                  : ""
                              }
                              disabled
                              className="w-full px-4 py-2 bg-white bg-opacity-10 text-gray-400 rounded-lg border border-white border-opacity-20"
                            />
                          </div>
                        </div>

                        {/* Custom Channel ID Input (only shows if 'custom' selected) */}
                        {newReactionChannelId === "custom" && (
                          <div className="mb-3">
                            <label className="block text-sm font-medium text-gray-300 mb-2">
                              Custom Channel ID
                            </label>
                            <input
                              type="text"
                              placeholder="1234567890123456789"
                              onChange={(e) =>
                                setNewReactionChannelId(e.target.value)
                              }
                              className="w-full px-4 py-2 bg-white bg-opacity-20 text-white rounded-lg border border-white border-opacity-30 focus:outline-none focus:border-opacity-60"
                            />
                          </div>
                        )}

                        {/* Hidden User ID (auto-filled) */}
                        {newReactionUserId && (
                          <div className="text-xs text-gray-400 mb-3">
                            User Discord ID: {newReactionUserId}
                          </div>
                        )}

                        <button
                          onClick={addReactionAssignment}
                          disabled={!newReactionEmoji || !newReactionUser}
                          className="save-button px-6 py-2 text-white rounded-lg font-medium disabled:opacity-50 disabled:cursor-not-allowed"
                        >
                          ‚ûï Add Reaction Assignment
                        </button>
                      </div>
                    </div>

                    {/* Example Section */}
                    <div className="section-card bg-blue-900 bg-opacity-20 border-blue-500 border-opacity-30">
                      <h4 className="text-blue-300 font-semibold mb-2">
                        üí° Example Use Cases
                      </h4>

                      <div className="text-gray-300 text-sm space-y-3">
                        <div>
                          <strong className="text-white">
                            üìÖ Presley gets calendar tasks (with special
                            routing):
                          </strong>
                          <br />
                          1. Emoji: üìÖ
                          <br />
                          2. Assign To: Presley
                          <br />
                          3. Destination: "Scheduling Channel"
                          <br />
                          4. Save ‚Üí Anyone reacts üìÖ{" "}
                          <strong className="text-blue-300">
                            in ANY Discord channel
                          </strong>{" "}
                          ‚Üí assigns to Presley ‚Üí routes to scheduling channel!
                        </div>

                        <div className="border-t border-blue-500 border-opacity-30 pt-3">
                          <strong className="text-white">
                            üé® Dakota gets design tasks (server-wide, default
                            routing):
                          </strong>
                          <br />
                          1. Emoji: üé®
                          <br />
                          2. Assign To: Dakota
                          <br />
                          3. Destination: Leave blank (default)
                          <br />
                          4. Save ‚Üí Anyone reacts üé®{" "}
                          <strong className="text-blue-300">
                            anywhere in Discord
                          </strong>{" "}
                          ‚Üí assigns to Dakota ‚Üí goes to default channel!
                        </div>
                      </div>
                    </div>

                    <div className="flex gap-3">
                      <button
                        onClick={saveConfig}
                        className="save-button px-6 py-3 text-white rounded-lg font-bold"
                      >
                        üíæ Save Locally
                      </button>
                      <button
                        onClick={saveToAPI}
                        disabled={loading}
                        className="save-button px-6 py-3 text-white rounded-lg font-bold disabled:opacity-50"
                      >
                        {loading ? "‚è≥ Saving to Bot..." : "üöÄ Save to Bot"}
                      </button>
                    </div>
                  </div>
                )}

                {/* Categories Section */}
                {activeSection === "categories" && (
                  <div>
                    <h2 className="text-3xl font-bold text-white mb-6">
                      üè∑Ô∏è Task Categories
                    </h2>

                    <div className="section-card">
                      <h3 className="text-xl font-bold text-white mb-4">
                        Manage Categories
                      </h3>
                      <p className="text-gray-300 mb-4">
                        Add or remove task categories
                      </p>

                      <div className="space-y-2 mb-4">
                        {categories.map((category) => (
                          <div key={category} className="user-item">
                            <span className="text-white font-medium">
                              {category}
                            </span>
                            {!["General"].includes(category) && (
                              <button
                                onClick={() => removeCategory(category)}
                                className="delete-button px-3 py-1 text-white rounded text-sm"
                              >
                                Remove
                              </button>
                            )}
                          </div>
                        ))}
                      </div>

                      <div className="flex gap-3">
                        <input
                          type="text"
                          placeholder="New Category Name"
                          value={newCategory}
                          onChange={(e) => setNewCategory(e.target.value)}
                          className="flex-1 px-4 py-2 bg-white bg-opacity-20 text-white rounded-lg border border-white border-opacity-30"
                        />
                        <button
                          onClick={addCategory}
                          className="save-button px-4 py-2 text-white rounded-lg font-medium"
                        >
                          + Add Category
                        </button>
                      </div>
                    </div>

                    {/* Category Colors */}
                    <div className="section-card">
                      <h3 className="text-xl font-bold text-white mb-4">
                        Category Colors
                      </h3>
                      <p className="text-gray-300 mb-4">
                        Customize the appearance of each category
                      </p>
                      <div className="space-y-3">
                        {categories.map((category) => (
                          <div key={category} className="user-item">
                            <div className="flex-1">
                              <span className="text-white font-medium">
                                {category}
                              </span>
                            </div>
                            <div className="flex gap-2 items-center">
                              <div className="flex gap-2">
                                <div>
                                  <label className="text-xs text-gray-300">
                                    BG
                                  </label>
                                  <input
                                    type="color"
                                    value={
                                      categoryColors[category]?.bg || "#f3f4f6"
                                    }
                                    onChange={(e) =>
                                      updateCategoryColor(
                                        category,
                                        "bg",
                                        e.target.value,
                                      )
                                    }
                                    className="block"
                                    style={{ width: "40px", height: "30px" }}
                                  />
                                </div>
                                <div>
                                  <label className="text-xs text-gray-300">
                                    Text
                                  </label>
                                  <input
                                    type="color"
                                    value={
                                      categoryColors[category]?.text ||
                                      "#374151"
                                    }
                                    onChange={(e) =>
                                      updateCategoryColor(
                                        category,
                                        "text",
                                        e.target.value,
                                      )
                                    }
                                    className="block"
                                    style={{ width: "40px", height: "30px" }}
                                  />
                                </div>
                                <div>
                                  <label className="text-xs text-gray-300">
                                    Border
                                  </label>
                                  <input
                                    type="color"
                                    value={
                                      categoryColors[category]?.border ||
                                      "#9ca3af"
                                    }
                                    onChange={(e) =>
                                      updateCategoryColor(
                                        category,
                                        "border",
                                        e.target.value,
                                      )
                                    }
                                    className="block"
                                    style={{ width: "40px", height: "30px" }}
                                  />
                                </div>
                              </div>
                            </div>
                          </div>
                        ))}
                      </div>
                    </div>

                    <button
                      onClick={saveConfig}
                      className="save-button px-6 py-3 text-white rounded-lg font-bold"
                    >
                      üíæ Save Categories
                    </button>
                  </div>
                )}

                {/* Quick Filters Section */}
                {activeSection === "filters" && (
                  <div>
                    <h2 className="text-3xl font-bold text-white mb-6">
                      üéØ Quick Filter Configuration
                    </h2>

                    <div className="section-card">
                      <h3 className="text-xl font-bold text-white mb-4">
                        Available Quick Filters
                      </h3>
                      <p className="text-gray-300 mb-4">
                        Enable or disable quick filter buttons in the dashboard
                      </p>

                      <div className="space-y-2">
                        {quickFilters.map((filter) => (
                          <div key={filter.id} className="user-item">
                            <span className="text-white font-medium">
                              {filter.label}
                            </span>
                            <button
                              onClick={() => {
                                setQuickFilters(
                                  quickFilters.map((f) =>
                                    f.id === filter.id
                                      ? { ...f, enabled: !f.enabled }
                                      : f,
                                  ),
                                );
                              }}
                              className={`px-4 py-2 rounded-lg font-medium ${
                                filter.enabled
                                  ? "bg-green-600 text-white"
                                  : "bg-gray-600 text-white"
                              }`}
                            >
                              {filter.enabled ? "‚úÖ Enabled" : "‚ùå Disabled"}
                            </button>
                          </div>
                        ))}
                      </div>
                    </div>

                    <button
                      onClick={saveConfig}
                      className="save-button px-6 py-3 text-white rounded-lg font-bold"
                    >
                      üíæ Save Filter Settings
                    </button>
                  </div>
                )}

                {/* Skills Management Section */}
                {activeSection === "skills-management" && (
                  <div>
                    <h2 className="text-3xl font-bold text-white mb-6">
                      üéØ Skills Management
                    </h2>
                    <p className="text-gray-300 mb-6">
                      Manage user skills and link them to task categories.
                      Skills help route tasks to the right people.
                    </p>

                    <Accordion
                      title="Available Skills"
                      icon="üéì"
                      defaultOpen={true}
                    >
                      <div className="space-y-4">
                        <div className="grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-2">
                          {availableSkills.map((skill) => (
                            <div
                              key={skill}
                              className="bg-blue-900 bg-opacity-30 px-4 py-2 rounded-lg text-white flex items-center justify-between"
                            >
                              <span>{skill}</span>
                              <button
                                onClick={() => {
                                  if (confirm(`Remove "${skill}" skill?`)) {
                                    setAvailableSkills(
                                      availableSkills.filter(
                                        (s) => s !== skill,
                                      ),
                                    );
                                  }
                                }}
                                className="text-red-400 hover:text-red-300 ml-2"
                              >
                                √ó
                              </button>
                            </div>
                          ))}
                        </div>
                        <div className="flex gap-2">
                          <input
                            type="text"
                            placeholder="New skill name"
                            className="flex-1 px-4 py-2 bg-white bg-opacity-20 text-white rounded-lg border border-white border-opacity-30"
                            onKeyPress={(e) => {
                              if (e.key === "Enter" && e.target.value.trim()) {
                                if (
                                  !availableSkills.includes(
                                    e.target.value.trim(),
                                  )
                                ) {
                                  setAvailableSkills([
                                    ...availableSkills,
                                    e.target.value.trim(),
                                  ]);
                                  e.target.value = "";
                                }
                              }
                            }}
                          />
                          <button
                            onClick={(e) => {
                              const input = e.target.previousElementSibling;
                              if (
                                input.value.trim() &&
                                !availableSkills.includes(input.value.trim())
                              ) {
                                setAvailableSkills([
                                  ...availableSkills,
                                  input.value.trim(),
                                ]);
                                input.value = "";
                              }
                            }}
                            className="px-4 py-2 bg-green-600 hover:bg-green-700 text-white rounded-lg"
                          >
                            ‚ûï Add Skill
                          </button>
                        </div>
                      </div>
                    </Accordion>

                    <Accordion
                      title="Skill-Category Links"
                      icon="üîó"
                      defaultOpen={false}
                    >
                      <p className="text-gray-300 mb-4">
                        Link skills to categories. When a task is created in a
                        category, users with matching skills will be notified.
                      </p>
                      <div className="space-y-4">
                        {categories.map((category) => (
                          <div
                            key={category}
                            className="bg-white bg-opacity-5 p-4 rounded-lg"
                          >
                            <h4 className="text-white font-bold mb-2">
                              üìÇ {category}
                            </h4>
                            <div className="flex flex-wrap gap-2 mb-2">
                              {(skillCategoryLinks[category] || []).map(
                                (skill) => (
                                  <span
                                    key={skill}
                                    className="px-3 py-1 bg-blue-600 text-white rounded-full text-sm flex items-center gap-1"
                                  >
                                    {skill}
                                    <button
                                      onClick={() => {
                                        setSkillCategoryLinks({
                                          ...skillCategoryLinks,
                                          [category]: (
                                            skillCategoryLinks[category] || []
                                          ).filter((s) => s !== skill),
                                        });
                                      }}
                                      className="hover:text-red-300"
                                    >
                                      √ó
                                    </button>
                                  </span>
                                ),
                              )}
                            </div>
                            <select
                              className="w-full px-3 py-2 bg-white bg-opacity-20 text-white rounded-lg"
                              onChange={(e) => {
                                if (e.target.value) {
                                  const current =
                                    skillCategoryLinks[category] || [];
                                  if (!current.includes(e.target.value)) {
                                    setSkillCategoryLinks({
                                      ...skillCategoryLinks,
                                      [category]: [...current, e.target.value],
                                    });
                                  }
                                  e.target.value = "";
                                }
                              }}
                            >
                              <option value="">
                                + Add skill to this category
                              </option>
                              {availableSkills.map((skill) => (
                                <option key={skill} value={skill}>
                                  {skill}
                                </option>
                              ))}
                            </select>
                          </div>
                        ))}
                      </div>
                    </Accordion>

                    <button
                      onClick={saveConfig}
                      className="save-button px-6 py-3 text-white rounded-lg font-bold mt-6"
                    >
                      üíæ Save Skills Configuration
                    </button>
                  </div>
                )}

                {/* Inactivity Settings Section */}
                {activeSection === "inactivity-settings" && (
                  <div>
                    <h2 className="text-3xl font-bold text-white mb-6">
                      ‚è∞ Inactivity & Alert Settings
                    </h2>
                    <p className="text-gray-300 mb-6">
                      Configure automatic alerts and escalations for untouched
                      tasks.
                    </p>

                    <Accordion
                      title="Alert System Settings"
                      icon="‚öôÔ∏è"
                      defaultOpen={true}
                    >
                      <div className="space-y-4">
                        <div className="flex items-center justify-between bg-white bg-opacity-5 p-4 rounded-lg">
                          <div>
                            <p className="text-white font-medium">
                              Enable Alert System
                            </p>
                            <p className="text-gray-300 text-sm">
                              Automatically alert users about stagnant tasks
                            </p>
                          </div>
                          <button
                            onClick={() =>
                              setInactivitySettings({
                                ...inactivitySettings,
                                enabled: !inactivitySettings.enabled,
                              })
                            }
                            className={`px-6 py-3 rounded-lg font-bold transition-all ${
                              inactivitySettings.enabled
                                ? "bg-green-600 text-white"
                                : "bg-gray-600 text-white"
                            }`}
                          >
                            {inactivitySettings.enabled
                              ? "‚úÖ Enabled"
                              : "‚ùå Disabled"}
                          </button>
                        </div>

                        {inactivitySettings.enabled && (
                          <div className="bg-white bg-opacity-5 p-4 rounded-lg">
                            <label className="block text-white font-medium mb-2">
                              Check Interval: {inactivitySettings.checkInterval}{" "}
                              minutes
                            </label>
                            <p className="text-gray-300 text-sm mb-3">
                              How often to check for stagnant tasks
                            </p>
                            <input
                              type="range"
                              min="15"
                              max="120"
                              step="15"
                              value={inactivitySettings.checkInterval}
                              onChange={(e) =>
                                setInactivitySettings({
                                  ...inactivitySettings,
                                  checkInterval: parseInt(e.target.value),
                                })
                              }
                              className="w-full"
                            />
                            <div className="flex justify-between text-gray-300 text-sm mt-1">
                              <span>15 min (Frequent)</span>
                              <span>120 min (Infrequent)</span>
                            </div>
                          </div>
                        )}
                      </div>
                    </Accordion>

                    <Accordion
                      title="Regular User Alert Timing"
                      icon="üë§"
                      defaultOpen={false}
                    >
                      <p className="text-gray-300 mb-4">
                        Alert timing for regular users (non-admins)
                      </p>
                      <div className="space-y-4">
                        <div>
                          <label className="block text-white font-medium mb-2">
                            First Alert:{" "}
                            {inactivitySettings.regularUser.firstAlert} hours
                          </label>
                          <p className="text-gray-300 text-sm mb-2">
                            Alert user if task hasn't been touched
                          </p>
                          <input
                            type="number"
                            value={inactivitySettings.regularUser.firstAlert}
                            onChange={(e) =>
                              setInactivitySettings({
                                ...inactivitySettings,
                                regularUser: {
                                  ...inactivitySettings.regularUser,
                                  firstAlert: parseInt(e.target.value) || 24,
                                },
                              })
                            }
                            className="w-full px-4 py-2 bg-white bg-opacity-20 text-white rounded-lg border border-white border-opacity-30"
                          />
                        </div>

                        <div>
                          <label className="block text-white font-medium mb-2">
                            Manager Escalation:{" "}
                            {inactivitySettings.regularUser.managerEscalation}{" "}
                            hours
                          </label>
                          <p className="text-gray-300 text-sm mb-2">
                            Notify managers if still no activity
                          </p>
                          <input
                            type="number"
                            value={
                              inactivitySettings.regularUser.managerEscalation
                            }
                            onChange={(e) =>
                              setInactivitySettings({
                                ...inactivitySettings,
                                regularUser: {
                                  ...inactivitySettings.regularUser,
                                  managerEscalation:
                                    parseInt(e.target.value) || 48,
                                },
                              })
                            }
                            className="w-full px-4 py-2 bg-white bg-opacity-20 text-white rounded-lg border border-white border-opacity-30"
                          />
                        </div>

                        <div>
                          <label className="block text-white font-medium mb-2">
                            Pool Release:{" "}
                            {inactivitySettings.regularUser.poolRelease} hours
                          </label>
                          <p className="text-gray-300 text-sm mb-2">
                            Release task to pool if still untouched
                          </p>
                          <input
                            type="number"
                            value={inactivitySettings.regularUser.poolRelease}
                            onChange={(e) =>
                              setInactivitySettings({
                                ...inactivitySettings,
                                regularUser: {
                                  ...inactivitySettings.regularUser,
                                  poolRelease: parseInt(e.target.value) || 72,
                                },
                              })
                            }
                            className="w-full px-4 py-2 bg-white bg-opacity-20 text-white rounded-lg border border-white border-opacity-30"
                          />
                        </div>
                      </div>
                    </Accordion>

                    <Accordion
                      title="Admin/Manager Alert Timing"
                      icon="üëë"
                      defaultOpen={false}
                    >
                      <p className="text-gray-300 mb-4">
                        Extended alert timing for admins and managers
                      </p>
                      <div className="space-y-4">
                        <div>
                          <label className="block text-white font-medium mb-2">
                            First Alert: {inactivitySettings.admin.firstAlert}{" "}
                            hours
                          </label>
                          <input
                            type="number"
                            value={inactivitySettings.admin.firstAlert}
                            onChange={(e) =>
                              setInactivitySettings({
                                ...inactivitySettings,
                                admin: {
                                  ...inactivitySettings.admin,
                                  firstAlert: parseInt(e.target.value) || 48,
                                },
                              })
                            }
                            className="w-full px-4 py-2 bg-white bg-opacity-20 text-white rounded-lg border border-white border-opacity-30"
                          />
                        </div>

                        <div>
                          <label className="block text-white font-medium mb-2">
                            Manager Escalation:{" "}
                            {inactivitySettings.admin.managerEscalation} hours
                          </label>
                          <input
                            type="number"
                            value={inactivitySettings.admin.managerEscalation}
                            onChange={(e) =>
                              setInactivitySettings({
                                ...inactivitySettings,
                                admin: {
                                  ...inactivitySettings.admin,
                                  managerEscalation:
                                    parseInt(e.target.value) || 96,
                                },
                              })
                            }
                            className="w-full px-4 py-2 bg-white bg-opacity-20 text-white rounded-lg border border-white border-opacity-30"
                          />
                        </div>

                        <div>
                          <label className="block text-white font-medium mb-2">
                            Pool Release: {inactivitySettings.admin.poolRelease}{" "}
                            hours
                          </label>
                          <input
                            type="number"
                            value={inactivitySettings.admin.poolRelease}
                            onChange={(e) =>
                              setInactivitySettings({
                                ...inactivitySettings,
                                admin: {
                                  ...inactivitySettings.admin,
                                  poolRelease: parseInt(e.target.value) || 144,
                                },
                              })
                            }
                            className="w-full px-4 py-2 bg-white bg-opacity-20 text-white rounded-lg border border-white border-opacity-30"
                          />
                        </div>
                      </div>
                    </Accordion>

                    <button
                      onClick={saveConfig}
                      className="save-button px-6 py-3 text-white rounded-lg font-bold mt-6"
                    >
                      üíæ Save Inactivity Settings
                    </button>
                  </div>
                )}

                {/* Discord ID Configuration Section */}
                {activeSection === "discord-config" && (
                  <div>
                    <h2 className="text-3xl font-bold text-white mb-6">
                      üÜî Discord ID Configuration
                    </h2>
                    <p className="text-gray-300 mb-6">
                      Configure Discord IDs for threads, channels, and users to
                      make referencing easier throughout the system.
                    </p>

                    <Accordion
                      title="üìù Thread IDs"
                      defaultOpen={true}
                      icon="üìù"
                    >
                      <div className="bg-white bg-opacity-5 p-4 rounded-lg mb-4">
                        <p className="text-gray-300 text-sm mb-4">
                          Add named references to Discord threads for easy
                          lookup
                        </p>
                        <div className="grid grid-cols-2 gap-4 mb-4">
                          <input
                            type="text"
                            placeholder="Thread name (e.g., 'Collections Thread')"
                            id="newThreadName"
                            className="px-4 py-2 bg-white bg-opacity-20 text-white rounded-lg border border-white border-opacity-30"
                          />
                          <input
                            type="text"
                            placeholder="Thread ID"
                            id="newThreadId"
                            className="px-4 py-2 bg-white bg-opacity-20 text-white rounded-lg border border-white border-opacity-30"
                          />
                        </div>
                        <button
                          onClick={() => {
                            const name = document
                              .getElementById("newThreadName")
                              .value.trim();
                            const id = document
                              .getElementById("newThreadId")
                              .value.trim();
                            if (name && id) {
                              setDiscordConfig({
                                ...discordConfig,
                                threads: {
                                  ...discordConfig.threads,
                                  [name]: id,
                                },
                              });
                              document.getElementById("newThreadName").value =
                                "";
                              document.getElementById("newThreadId").value = "";
                              showNotification(
                                `Thread "${name}" added!`,
                                "success",
                              );
                            }
                          }}
                          className="save-button px-4 py-2 text-white rounded-lg font-bold"
                        >
                          ‚ûï Add Thread
                        </button>

                        <div className="mt-4 space-y-2">
                          {Object.entries(discordConfig.threads || {}).map(
                            ([name, id]) => (
                              <div key={name} className="user-item">
                                <div>
                                  <p className="text-white font-bold">{name}</p>
                                  <p className="text-gray-400 text-sm">{id}</p>
                                </div>
                                <button
                                  onClick={() => {
                                    const newThreads = {
                                      ...discordConfig.threads,
                                    };
                                    delete newThreads[name];
                                    setDiscordConfig({
                                      ...discordConfig,
                                      threads: newThreads,
                                    });
                                    showNotification(
                                      `Thread "${name}" removed`,
                                      "success",
                                    );
                                  }}
                                  className="delete-button px-3 py-1 text-white rounded text-sm"
                                >
                                  üóëÔ∏è
                                </button>
                              </div>
                            ),
                          )}
                        </div>
                      </div>
                    </Accordion>

                    <Accordion
                      title="üì∫ Channel IDs"
                      defaultOpen={false}
                      icon="üì∫"
                    >
                      <div className="bg-white bg-opacity-5 p-4 rounded-lg mb-4">
                        <p className="text-gray-300 text-sm mb-4">
                          Add named references to Discord channels
                        </p>
                        <div className="grid grid-cols-2 gap-4 mb-4">
                          <input
                            type="text"
                            placeholder="Channel name (e.g., 'Sales Channel')"
                            id="newChannelName"
                            className="px-4 py-2 bg-white bg-opacity-20 text-white rounded-lg border border-white border-opacity-30"
                          />
                          <input
                            type="text"
                            placeholder="Channel ID"
                            id="newChannelId"
                            className="px-4 py-2 bg-white bg-opacity-20 text-white rounded-lg border border-white border-opacity-30"
                          />
                        </div>
                        <button
                          onClick={() => {
                            const name = document
                              .getElementById("newChannelName")
                              .value.trim();
                            const id = document
                              .getElementById("newChannelId")
                              .value.trim();
                            if (name && id) {
                              setDiscordConfig({
                                ...discordConfig,
                                channels: {
                                  ...discordConfig.channels,
                                  [name]: id,
                                },
                              });
                              document.getElementById("newChannelName").value =
                                "";
                              document.getElementById("newChannelId").value =
                                "";
                              showNotification(
                                `Channel "${name}" added!`,
                                "success",
                              );
                            }
                          }}
                          className="save-button px-4 py-2 text-white rounded-lg font-bold"
                        >
                          ‚ûï Add Channel
                        </button>

                        <div className="mt-4 space-y-2">
                          {Object.entries(discordConfig.channels || {}).map(
                            ([name, id]) => (
                              <div key={name} className="user-item">
                                <div>
                                  <p className="text-white font-bold">{name}</p>
                                  <p className="text-gray-400 text-sm">{id}</p>
                                </div>
                                <button
                                  onClick={() => {
                                    const newChannels = {
                                      ...discordConfig.channels,
                                    };
                                    delete newChannels[name];
                                    setDiscordConfig({
                                      ...discordConfig,
                                      channels: newChannels,
                                    });
                                    showNotification(
                                      `Channel "${name}" removed`,
                                      "success",
                                    );
                                  }}
                                  className="delete-button px-3 py-1 text-white rounded text-sm"
                                >
                                  üóëÔ∏è
                                </button>
                              </div>
                            ),
                          )}
                        </div>
                      </div>
                    </Accordion>

                    <Accordion
                      title="üë§ User IDs"
                      defaultOpen={false}
                      icon="üë§"
                    >
                      <div className="bg-white bg-opacity-5 p-4 rounded-lg mb-4">
                        <p className="text-gray-300 text-sm mb-4">
                          Add custom user ID references (beyond team members)
                        </p>
                        <div className="grid grid-cols-2 gap-4 mb-4">
                          <input
                            type="text"
                            placeholder="User name"
                            id="newUserName"
                            className="px-4 py-2 bg-white bg-opacity-20 text-white rounded-lg border border-white border-opacity-30"
                          />
                          <input
                            type="text"
                            placeholder="User ID"
                            id="newUserId"
                            className="px-4 py-2 bg-white bg-opacity-20 text-white rounded-lg border border-white border-opacity-30"
                          />
                        </div>
                        <button
                          onClick={() => {
                            const name = document
                              .getElementById("newUserName")
                              .value.trim();
                            const id = document
                              .getElementById("newUserId")
                              .value.trim();
                            if (name && id) {
                              setDiscordConfig({
                                ...discordConfig,
                                users: { ...discordConfig.users, [name]: id },
                              });
                              document.getElementById("newUserName").value = "";
                              document.getElementById("newUserId").value = "";
                              showNotification(
                                `User "${name}" added!`,
                                "success",
                              );
                            }
                          }}
                          className="save-button px-4 py-2 text-white rounded-lg font-bold"
                        >
                          ‚ûï Add User
                        </button>

                        <div className="mt-4 space-y-2">
                          {Object.entries(discordConfig.users || {}).map(
                            ([name, id]) => (
                              <div key={name} className="user-item">
                                <div>
                                  <p className="text-white font-bold">{name}</p>
                                  <p className="text-gray-400 text-sm">{id}</p>
                                </div>
                                <button
                                  onClick={() => {
                                    const newUsers = { ...discordConfig.users };
                                    delete newUsers[name];
                                    setDiscordConfig({
                                      ...discordConfig,
                                      users: newUsers,
                                    });
                                    showNotification(
                                      `User "${name}" removed`,
                                      "success",
                                    );
                                  }}
                                  className="delete-button px-3 py-1 text-white rounded text-sm"
                                >
                                  üóëÔ∏è
                                </button>
                              </div>
                            ),
                          )}
                        </div>
                      </div>
                    </Accordion>

                    <div className="flex gap-3 mt-6">
                      <button
                        onClick={saveConfig}
                        className="save-button px-6 py-3 text-white rounded-lg font-bold"
                      >
                        üíæ Save Discord Config
                      </button>
                      <button
                        onClick={saveToAPI}
                        disabled={loading}
                        className="save-button px-6 py-3 text-white rounded-lg font-bold disabled:opacity-50"
                      >
                        {loading ? "‚è≥ Saving to Bot..." : "üöÄ Save to Bot"}
                      </button>
                    </div>
                  </div>
                )}

                {/* Priority & Time Limits Section */}
                {activeSection === "priority-settings" && (
                  <div>
                    <h2 className="text-3xl font-bold text-white mb-6">
                      ‚ö° Priority & Time Limits
                    </h2>
                    <p className="text-gray-300 mb-6">
                      Configure time limits for each priority level and
                      automatic escalation thresholds.
                    </p>

                    {["urgent", "high", "medium", "low"].map((priority) => (
                      <Accordion
                        key={priority}
                        title={`${priority.charAt(0).toUpperCase() + priority.slice(1)} Priority`}
                        defaultOpen={priority === "urgent"}
                        icon={
                          priority === "urgent"
                            ? "üî¥"
                            : priority === "high"
                              ? "üü†"
                              : priority === "medium"
                                ? "üü°"
                                : "üü¢"
                        }
                      >
                        <div className="grid grid-cols-2 gap-6">
                          <div>
                            <label className="block text-white font-medium mb-2">
                              Expected Completion Time:{" "}
                              {priorityTimeLimits[priority].hours} hours
                            </label>
                            <p className="text-gray-300 text-sm mb-3">
                              How long tasks should take to complete
                            </p>
                            <input
                              type="number"
                              value={priorityTimeLimits[priority].hours}
                              onChange={(e) =>
                                setPriorityTimeLimits({
                                  ...priorityTimeLimits,
                                  [priority]: {
                                    ...priorityTimeLimits[priority],
                                    hours: parseInt(e.target.value) || 1,
                                  },
                                })
                              }
                              className="w-full px-4 py-2 bg-white bg-opacity-20 text-white rounded-lg border border-white border-opacity-30"
                              min="1"
                            />
                          </div>

                          <div>
                            <label className="block text-white font-medium mb-2">
                              Escalate After:{" "}
                              {priorityTimeLimits[priority].escalateAfter} hours
                            </label>
                            <p className="text-gray-300 text-sm mb-3">
                              Alert managers if task exceeds this time
                            </p>
                            <input
                              type="number"
                              value={priorityTimeLimits[priority].escalateAfter}
                              onChange={(e) =>
                                setPriorityTimeLimits({
                                  ...priorityTimeLimits,
                                  [priority]: {
                                    ...priorityTimeLimits[priority],
                                    escalateAfter:
                                      parseInt(e.target.value) || 1,
                                  },
                                })
                              }
                              className="w-full px-4 py-2 bg-white bg-opacity-20 text-white rounded-lg border border-white border-opacity-30"
                              min="1"
                            />
                          </div>
                        </div>

                        <div className="mt-4 bg-blue-900 bg-opacity-20 p-4 rounded-lg">
                          <p className="text-blue-200 text-sm">
                            <strong>‚ÑπÔ∏è Summary:</strong>{" "}
                            {priority.charAt(0).toUpperCase() +
                              priority.slice(1)}{" "}
                            priority tasks should be completed within{" "}
                            <strong>
                              {priorityTimeLimits[priority].hours}
                            </strong>{" "}
                            hours. If still active after{" "}
                            <strong>
                              {priorityTimeLimits[priority].escalateAfter}
                            </strong>{" "}
                            hours, managers will be notified.
                          </p>
                        </div>
                      </Accordion>
                    ))}

                    <div className="flex gap-3 mt-6">
                      <button
                        onClick={saveConfig}
                        className="save-button px-6 py-3 text-white rounded-lg font-bold"
                      >
                        üíæ Save Priority Settings
                      </button>
                      <button
                        onClick={saveToAPI}
                        disabled={loading}
                        className="save-button px-6 py-3 text-white rounded-lg font-bold disabled:opacity-50"
                      >
                        {loading ? "‚è≥ Saving to Bot..." : "üöÄ Save to Bot"}
                      </button>
                    </div>
                  </div>
                )}

                {/* Multi-Step Task Settings Section */}
                {activeSection === "multi-step-tasks" && (
                  <div>
                    <h2 className="text-3xl font-bold text-white mb-6">
                      üîó Multi-Step Task Settings
                    </h2>
                    <p className="text-gray-300 mb-6">
                      Configure multi-step task workflows where tasks can be
                      passed between team members with updates.
                    </p>

                    <Accordion
                      title="‚öôÔ∏è General Settings"
                      defaultOpen={true}
                      icon="‚öôÔ∏è"
                    >
                      <div className="space-y-4">
                        <div className="bg-white bg-opacity-5 p-4 rounded-lg">
                          <div className="flex items-center justify-between mb-4">
                            <div>
                              <h4 className="text-white font-bold mb-1">
                                Enable Multi-Step Tasks
                              </h4>
                              <p className="text-gray-300 text-sm">
                                Allow tasks to be passed between team members
                              </p>
                            </div>
                            <button
                              onClick={() =>
                                setMultiStepTaskSettings({
                                  ...multiStepTaskSettings,
                                  enabled: !multiStepTaskSettings.enabled,
                                })
                              }
                              className={`px-6 py-3 rounded-lg font-bold transition-all ${
                                multiStepTaskSettings.enabled
                                  ? "bg-green-600 text-white"
                                  : "bg-gray-600 text-white"
                              }`}
                            >
                              {multiStepTaskSettings.enabled
                                ? "‚úÖ Enabled"
                                : "‚ùå Disabled"}
                            </button>
                          </div>

                          {multiStepTaskSettings.enabled && (
                            <div className="bg-blue-900 bg-opacity-20 p-4 rounded-lg mt-4">
                              <p className="text-blue-200 text-sm">
                                <strong>üí° Example:</strong> Kiger has a
                                customer question ‚Üí assigns to Presley ‚Üí she
                                fills in what she knows but it's a sales issue ‚Üí
                                sends it on to Sales team
                              </p>
                            </div>
                          )}
                        </div>

                        {multiStepTaskSettings.enabled && (
                          <>
                            <div>
                              <label className="block text-white font-medium mb-2">
                                Max Steps Per Task:{" "}
                                {multiStepTaskSettings.maxSteps}
                              </label>
                              <p className="text-gray-300 text-sm mb-3">
                                Maximum number of people a task can be passed to
                              </p>
                              <input
                                type="range"
                                min="2"
                                max="10"
                                value={multiStepTaskSettings.maxSteps}
                                onChange={(e) =>
                                  setMultiStepTaskSettings({
                                    ...multiStepTaskSettings,
                                    maxSteps: parseInt(e.target.value),
                                  })
                                }
                                className="w-full"
                              />
                              <div className="flex justify-between text-gray-300 text-sm mt-1">
                                <span>2</span>
                                <span>10</span>
                              </div>
                            </div>

                            <div className="bg-white bg-opacity-5 p-4 rounded-lg">
                              <label className="flex items-center cursor-pointer">
                                <input
                                  type="checkbox"
                                  checked={multiStepTaskSettings.requireNotes}
                                  onChange={(e) =>
                                    setMultiStepTaskSettings({
                                      ...multiStepTaskSettings,
                                      requireNotes: e.target.checked,
                                    })
                                  }
                                  className="w-5 h-5 mr-3"
                                />
                                <div>
                                  <p className="text-white font-bold">
                                    Require Notes on Handoff
                                  </p>
                                  <p className="text-gray-300 text-sm">
                                    Force users to add notes when passing task
                                    to next person
                                  </p>
                                </div>
                              </label>
                            </div>

                            <div className="bg-white bg-opacity-5 p-4 rounded-lg">
                              <label className="flex items-center cursor-pointer">
                                <input
                                  type="checkbox"
                                  checked={
                                    multiStepTaskSettings.notifyNextPerson
                                  }
                                  onChange={(e) =>
                                    setMultiStepTaskSettings({
                                      ...multiStepTaskSettings,
                                      notifyNextPerson: e.target.checked,
                                    })
                                  }
                                  className="w-5 h-5 mr-3"
                                />
                                <div>
                                  <p className="text-white font-bold">
                                    Notify Next Person
                                  </p>
                                  <p className="text-gray-300 text-sm">
                                    Send Discord notification when task is
                                    passed to them
                                  </p>
                                </div>
                              </label>
                            </div>

                            <div className="bg-white bg-opacity-5 p-4 rounded-lg">
                              <label className="flex items-center cursor-pointer">
                                <input
                                  type="checkbox"
                                  checked={multiStepTaskSettings.allowSkipSteps}
                                  onChange={(e) =>
                                    setMultiStepTaskSettings({
                                      ...multiStepTaskSettings,
                                      allowSkipSteps: e.target.checked,
                                    })
                                  }
                                  className="w-5 h-5 mr-3"
                                />
                                <div>
                                  <p className="text-white font-bold">
                                    Allow Skip Steps
                                  </p>
                                  <p className="text-gray-300 text-sm">
                                    Allow users to mark their step as complete
                                    and pass back to original creator
                                  </p>
                                </div>
                              </label>
                            </div>
                          </>
                        )}
                      </div>
                    </Accordion>

                    {multiStepTaskSettings.enabled && (
                      <Accordion
                        title="üéØ Priority Restrictions"
                        defaultOpen={false}
                        icon="üéØ"
                      >
                        <div className="bg-white bg-opacity-5 p-4 rounded-lg">
                          <p className="text-gray-300 text-sm mb-4">
                            Select which priority levels can use multi-step
                            workflow
                          </p>

                          <div className="space-y-3">
                            {["urgent", "high", "medium", "low"].map(
                              (priority) => {
                                const isChecked =
                                  multiStepTaskSettings.allowedPriorities.includes(
                                    priority,
                                  );
                                const icon =
                                  priority === "urgent"
                                    ? "üî¥"
                                    : priority === "high"
                                      ? "üü†"
                                      : priority === "medium"
                                        ? "üü°"
                                        : "üü¢";

                                return (
                                  <div
                                    key={priority}
                                    className="bg-white bg-opacity-10 p-3 rounded-lg"
                                  >
                                    <label className="flex items-center cursor-pointer">
                                      <input
                                        type="checkbox"
                                        checked={isChecked}
                                        onChange={(e) => {
                                          if (e.target.checked) {
                                            setMultiStepTaskSettings({
                                              ...multiStepTaskSettings,
                                              allowedPriorities: [
                                                ...multiStepTaskSettings.allowedPriorities,
                                                priority,
                                              ],
                                            });
                                          } else {
                                            setMultiStepTaskSettings({
                                              ...multiStepTaskSettings,
                                              allowedPriorities:
                                                multiStepTaskSettings.allowedPriorities.filter(
                                                  (p) => p !== priority,
                                                ),
                                            });
                                          }
                                        }}
                                        className="w-5 h-5 mr-3"
                                      />
                                      <div className="flex items-center gap-2">
                                        <span>{icon}</span>
                                        <span className="text-white font-bold">
                                          {priority.charAt(0).toUpperCase() +
                                            priority.slice(1)}{" "}
                                          Priority
                                        </span>
                                      </div>
                                    </label>
                                  </div>
                                );
                              },
                            )}
                          </div>

                          <div className="mt-4 bg-yellow-900 bg-opacity-20 p-4 rounded-lg">
                            <p className="text-yellow-200 text-sm">
                              <strong>‚ö†Ô∏è Recommended:</strong> Only allow
                              multi-step for Medium and Low priority tasks.
                              Urgent and High priority should be completed
                              quickly by one person.
                            </p>
                          </div>
                        </div>
                      </Accordion>
                    )}

                    <div className="flex gap-3 mt-6">
                      <button
                        onClick={saveConfig}
                        className="save-button px-6 py-3 text-white rounded-lg font-bold"
                      >
                        üíæ Save Multi-Step Settings
                      </button>
                      <button
                        onClick={saveToAPI}
                        disabled={loading}
                        className="save-button px-6 py-3 text-white rounded-lg font-bold disabled:opacity-50"
                      >
                        {loading ? "‚è≥ Saving to Bot..." : "üöÄ Save to Bot"}
                      </button>
                    </div>
                  </div>
                )}

                {/* Log Settings Section */}
                {activeSection === "log-settings" && (
                  <div>
                    <h2 className="text-3xl font-bold text-white mb-6">
                      üìã Log & Visibility Settings
                    </h2>
                    <p className="text-gray-300 mb-6">
                      Control who can see logs and what types of logs are
                      tracked.
                    </p>

                    <Accordion
                      title="üëÅÔ∏è Log Visibility"
                      defaultOpen={true}
                      icon="üëÅÔ∏è"
                    >
                      <div className="space-y-4">
                        <div>
                          <label className="block text-white font-medium mb-2">
                            Who Can View Logs
                          </label>
                          <p className="text-gray-300 text-sm mb-3">
                            Control who has access to view task activity logs
                          </p>
                          <select
                            value={logVisibilitySettings.whoCanViewLogs}
                            onChange={(e) =>
                              setLogVisibilitySettings({
                                ...logVisibilitySettings,
                                whoCanViewLogs: e.target.value,
                              })
                            }
                            className="w-full px-4 py-2 bg-white bg-opacity-20 text-white rounded-lg border border-white border-opacity-30"
                          >
                            <option
                              value="admins"
                              style={{ background: "#667eea" }}
                            >
                              Admins Only
                            </option>
                            <option
                              value="managers"
                              style={{ background: "#667eea" }}
                            >
                              Managers & Admins
                            </option>
                            <option
                              value="everyone"
                              style={{ background: "#667eea" }}
                            >
                              Everyone
                            </option>
                          </select>
                        </div>

                        <div>
                          <label className="block text-white font-medium mb-2">
                            Log Retention:{" "}
                            {logVisibilitySettings.logRetentionDays} days
                          </label>
                          <p className="text-gray-300 text-sm mb-3">
                            How long to keep logs before automatic deletion
                          </p>
                          <input
                            type="number"
                            value={logVisibilitySettings.logRetentionDays}
                            onChange={(e) =>
                              setLogVisibilitySettings({
                                ...logVisibilitySettings,
                                logRetentionDays:
                                  parseInt(e.target.value) || 30,
                              })
                            }
                            className="w-full px-4 py-2 bg-white bg-opacity-20 text-white rounded-lg border border-white border-opacity-30"
                            min="7"
                            max="365"
                          />
                        </div>
                      </div>
                    </Accordion>

                    <Accordion
                      title="üìù Log Types"
                      defaultOpen={false}
                      icon="üìù"
                    >
                      <div className="space-y-3">
                        {[
                          {
                            key: "showTaskCreationLogs",
                            label: "Task Creation",
                            icon: "‚ûï",
                            desc: "Log when tasks are created",
                          },
                          {
                            key: "showTaskCompletionLogs",
                            label: "Task Completion",
                            icon: "‚úÖ",
                            desc: "Log when tasks are completed",
                          },
                          {
                            key: "showTaskTransferLogs",
                            label: "Task Transfers",
                            icon: "üîÑ",
                            desc: "Log when tasks are transferred between users",
                          },
                          {
                            key: "showTaskEscalationLogs",
                            label: "Task Escalations",
                            icon: "‚è∞",
                            desc: "Log when tasks are escalated to managers",
                          },
                        ].map(({ key, label, icon, desc }) => (
                          <div
                            key={key}
                            className="bg-white bg-opacity-5 p-4 rounded-lg"
                          >
                            <label className="flex items-center cursor-pointer">
                              <input
                                type="checkbox"
                                checked={logVisibilitySettings[key]}
                                onChange={(e) =>
                                  setLogVisibilitySettings({
                                    ...logVisibilitySettings,
                                    [key]: e.target.checked,
                                  })
                                }
                                className="w-5 h-5 mr-3"
                              />
                              <div>
                                <p className="text-white font-bold flex items-center gap-2">
                                  <span>{icon}</span>
                                  <span>{label}</span>
                                </p>
                                <p className="text-gray-300 text-sm">{desc}</p>
                              </div>
                            </label>
                          </div>
                        ))}
                      </div>
                    </Accordion>

                    <div className="flex gap-3 mt-6">
                      <button
                        onClick={saveConfig}
                        className="save-button px-6 py-3 text-white rounded-lg font-bold"
                      >
                        üíæ Save Log Settings
                      </button>
                      <button
                        onClick={saveToAPI}
                        disabled={loading}
                        className="save-button px-6 py-3 text-white rounded-lg font-bold disabled:opacity-50"
                      >
                        {loading ? "‚è≥ Saving to Bot..." : "üöÄ Save to Bot"}
                      </button>
                    </div>
                  </div>
                )}

                {/* Dashboard Features Section */}
                {activeSection === "dashboard-features" && (
                  <div>
                    <h2 className="text-3xl font-bold text-white mb-6">
                      üéõÔ∏è Dashboard Features
                    </h2>
                    <p className="text-gray-300 mb-6">
                      Create custom dashboard pages/tabs with specific rules and
                      behaviors. These can be integrated into the bot with
                      proper permissions.
                    </p>

                    <Accordion
                      title="Custom Pages"
                      icon="üìÑ"
                      defaultOpen={true}
                    >
                      <div className="space-y-4">
                        {customPages.length === 0 ? (
                          <p className="text-gray-300 text-center py-8">
                            No custom pages yet. Create one below!
                          </p>
                        ) : (
                          customPages.map((page, idx) => (
                            <div
                              key={idx}
                              className="bg-white bg-opacity-5 p-4 rounded-lg"
                            >
                              <div className="flex items-start justify-between mb-2">
                                <div className="flex-1">
                                  <h4 className="text-white font-bold text-lg">
                                    {page.name}
                                  </h4>
                                  <p className="text-gray-300 text-sm mt-1">
                                    {page.description}
                                  </p>
                                </div>
                                <button
                                  onClick={() => {
                                    if (
                                      confirm(`Delete "${page.name}" page?`)
                                    ) {
                                      setCustomPages(
                                        customPages.filter((_, i) => i !== idx),
                                      );
                                    }
                                  }}
                                  className="delete-button px-3 py-1 text-white rounded-lg text-sm ml-4"
                                >
                                  üóëÔ∏è Delete
                                </button>
                              </div>
                              <div className="mt-3 bg-gray-900 bg-opacity-50 p-3 rounded">
                                <p className="text-xs text-gray-400 mb-1">
                                  Rules & Behavior:
                                </p>
                                <pre className="text-gray-300 text-xs whitespace-pre-wrap">
                                  {page.rules}
                                </pre>
                              </div>
                              <div className="mt-3 flex gap-2">
                                <button className="px-3 py-1 bg-purple-600 hover:bg-purple-700 text-white rounded text-sm">
                                  üîÑ Send to Bot for Integration
                                </button>
                                <button className="px-3 py-1 bg-blue-600 hover:bg-blue-700 text-white rounded text-sm">
                                  üìù Edit
                                </button>
                              </div>
                            </div>
                          ))
                        )}
                      </div>
                    </Accordion>

                    <Accordion
                      title="Create New Page"
                      icon="‚ûï"
                      defaultOpen={true}
                    >
                      <div className="space-y-4">
                        <div>
                          <label className="block text-white font-medium mb-2">
                            Page Name
                          </label>
                          <input
                            type="text"
                            value={newPageName}
                            onChange={(e) => setNewPageName(e.target.value)}
                            placeholder="e.g., 'Priority Tasks', 'Urgent Only', 'Design Queue'"
                            className="w-full px-4 py-2 bg-white bg-opacity-20 text-white rounded-lg border border-white border-opacity-30"
                          />
                        </div>

                        <div>
                          <label className="block text-white font-medium mb-2">
                            Description
                          </label>
                          <textarea
                            value={newPageDescription}
                            onChange={(e) =>
                              setNewPageDescription(e.target.value)
                            }
                            placeholder="What is this page for? Who should use it?"
                            className="w-full px-4 py-2 bg-white bg-opacity-20 text-white rounded-lg border border-white border-opacity-30"
                            rows="2"
                          />
                        </div>

                        <div>
                          <label className="block text-white font-medium mb-2">
                            Rules & Behavior
                          </label>
                          <p className="text-gray-300 text-sm mb-2">
                            Define how this page behaves. Examples:
                          </p>
                          <ul className="text-gray-400 text-xs mb-3 list-disc list-inside space-y-1">
                            <li>Show only tasks with priority = "urgent"</li>
                            <li>Filter by category = "Design"</li>
                            <li>
                              Display tasks assigned to current user's
                              department
                            </li>
                            <li>Auto-refresh every 30 seconds</li>
                            <li>Restricted to users with role = "Manager"</li>
                          </ul>
                          <textarea
                            value={newPageRules}
                            onChange={(e) => setNewPageRules(e.target.value)}
                            placeholder="Enter rules, one per line..."
                            className="w-full px-4 py-2 bg-white bg-opacity-20 text-white rounded-lg border border-white border-opacity-30 font-mono text-sm"
                            rows="6"
                          />
                        </div>

                        <button
                          onClick={() => {
                            if (
                              newPageName &&
                              newPageDescription &&
                              newPageRules
                            ) {
                              setCustomPages([
                                ...customPages,
                                {
                                  name: newPageName,
                                  description: newPageDescription,
                                  rules: newPageRules,
                                  createdAt: new Date().toISOString(),
                                },
                              ]);
                              setNewPageName("");
                              setNewPageDescription("");
                              setNewPageRules("");
                              showNotification(
                                "Custom page created!",
                                "success",
                              );
                            } else {
                              showNotification(
                                "Please fill all fields",
                                "error",
                              );
                            }
                          }}
                          className="save-button px-6 py-3 text-white rounded-lg font-bold w-full"
                        >
                          ‚ú® Create Custom Page
                        </button>
                      </div>
                    </Accordion>

                    <button
                      onClick={saveConfig}
                      className="save-button px-6 py-3 text-white rounded-lg font-bold mt-6"
                    >
                      üíæ Save Dashboard Features
                    </button>
                  </div>
                )}
              </div>
            </div>

            {/* Footer */}
            <div className="glass rounded-xl p-4 mt-6 text-center">
              <p className="text-white text-opacity-80 text-sm">
                üí° Tip: Changes are saved locally. Use "Save to Bot" to sync
                with your Discord bot's database.
              </p>
            </div>

            {/* Toast Notification */}
            {toastMessage && (
              <div className="toast-notification">
                <div className="flex items-center gap-2">
                  <span className="text-lg">‚ú®</span>
                  <p className="font-medium">{toastMessage}</p>
                </div>
              </div>
            )}

            {/* Refresh Overlay */}
            {isRefreshing && <div className="refresh-overlay" />}

            {/* Standard Notifications */}
            {notification && (
              <div className={`notification ${notification.type}`}>
                {notification.message}
              </div>
            )}
          </div>
        );
      }

      ReactDOM.render(<App />, document.getElementById("root"));
    </script>
  </body>
</html>
