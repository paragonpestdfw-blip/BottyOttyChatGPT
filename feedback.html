<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>BottyOtty - Customer Feedback Tracker</title>
    <script crossorigin src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
      @import url("https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800;900&display=swap");
      * { font-family: "Inter", sans-serif; }
      body { background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); min-height: 100vh; }
      .glass { background: rgba(255, 255, 255, 0.1); backdrop-filter: blur(10px); border: 1px solid rgba(255, 255, 255, 0.2); }
    </style>
  </head>
  <body>
    <div id="root"></div>
    <script type="text/babel">
      const { useState, useEffect } = React;
      const STORAGE_KEY = "bottyotty-feedback";

      function FeedbackTracker() {
        const [feedback, setFeedback] = useState(() => JSON.parse(localStorage.getItem(STORAGE_KEY) || "[]"));
        const [showAdd, setShowAdd] = useState(false);
        const [form, setForm] = useState({ customer: "", rating: 5, category: "service", comment: "", date: new Date().toISOString().split('T')[0], technician: "", followUpNeeded: false });

        useEffect(() => { localStorage.setItem(STORAGE_KEY, JSON.stringify(feedback)); }, [feedback]);

        const addFeedback = () => {
          if (!form.customer) return alert("Customer name required");
          setFeedback([...feedback, { ...form, id: Date.now() }]);
          setForm({ customer: "", rating: 5, category: "service", comment: "", date: new Date().toISOString().split('T')[0], technician: "", followUpNeeded: false });
          setShowAdd(false);
        };

        const avgRating = feedback.length > 0 ? (feedback.reduce((sum, f) => sum + f.rating, 0) / feedback.length).toFixed(1) : 0;
        const fiveStars = feedback.filter(f => f.rating === 5).length;
        const needsFollowUp = feedback.filter(f => f.followUpNeeded).length;

        return (
          <div className="min-h-screen p-8">
            <div className="glass rounded-2xl p-6 mb-6">
              <div className="flex items-center justify-between">
                <div className="flex items-center gap-4">
                  <img src="/mnt/user-data/uploads/Botty_Otty_Logo.png" alt="Logo" className="w-16 h-16" onError={e => e.target.style.display='none'} />
                  <div>
                    <h1 className="text-4xl font-bold text-white">‚≠ê Customer Feedback Tracker</h1>
                    <p className="text-gray-200 text-sm">Monitor ratings, reviews & satisfaction</p>
                  </div>
                </div>
                <div className="flex gap-2">
                  <a href="dashboard.html" className="px-4 py-2 bg-white bg-opacity-20 hover:bg-opacity-30 text-white rounded-lg text-sm font-medium">üè† Dashboard</a>
                  <a href="admin.html" className="px-4 py-2 bg-white bg-opacity-20 hover:bg-opacity-30 text-white rounded-lg text-sm font-medium">‚öôÔ∏è Admin</a>
                </div>
              </div>
            </div>

            <div className="grid grid-cols-4 gap-4 mb-6">
              <div className="glass rounded-xl p-6 text-center">
                <p className="text-gray-300 text-sm mb-2">Total Feedback</p>
                <p className="text-5xl font-bold text-white">{feedback.length}</p>
              </div>
              <div className="glass rounded-xl p-6 text-center">
                <p className="text-gray-300 text-sm mb-2">Average Rating</p>
                <p className="text-5xl font-bold text-yellow-400">{avgRating} ‚≠ê</p>
              </div>
              <div className="glass rounded-xl p-6 text-center">
                <p className="text-gray-300 text-sm mb-2">5-Star Reviews</p>
                <p className="text-5xl font-bold text-green-400">{fiveStars}</p>
              </div>
              <div className="glass rounded-xl p-6 text-center">
                <p className="text-gray-300 text-sm mb-2">Needs Follow-Up</p>
                <p className="text-5xl font-bold text-red-400">{needsFollowUp}</p>
              </div>
            </div>

            <button onClick={() => setShowAdd(true)} className="w-full mb-6 px-6 py-4 bg-blue-600 hover:bg-blue-700 text-white rounded-xl font-bold text-lg">
              ‚ûï Add Feedback
            </button>

            <div className="glass rounded-2xl p-6">
              <h2 className="text-2xl font-bold text-white mb-4">Recent Feedback</h2>
              <div className="space-y-3 max-h-96 overflow-y-auto">
                {feedback.slice().reverse().map(f => (
                  <div key={f.id} className={\`p-4 rounded-lg \${f.rating >= 4 ? 'bg-green-900 bg-opacity-30' : f.rating >= 3 ? 'bg-yellow-900 bg-opacity-30' : 'bg-red-900 bg-opacity-30'}\`}>
                    <div className="flex justify-between items-start mb-2">
                      <div>
                        <span className="text-white font-bold">{f.customer}</span>
                        <span className="text-yellow-400 ml-2">{"‚≠ê".repeat(f.rating)}</span>
                      </div>
                      <span className="text-gray-300 text-xs">{f.date}</span>
                    </div>
                    <p className="text-gray-200 text-sm mb-2">{f.comment}</p>
                    <div className="flex justify-between text-xs">
                      <span className="text-gray-400">üë§ {f.technician} | üìÇ {f.category}</span>
                      {f.followUpNeeded && <span className="bg-red-500 text-white px-2 py-1 rounded">Follow-Up Needed</span>}
                    </div>
                  </div>
                ))}
              </div>
            </div>

            {showAdd && (
              <div className="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4">
                <div className="glass rounded-2xl p-6 max-w-2xl w-full">
                  <h3 className="text-2xl font-bold text-white mb-6">Add Customer Feedback</h3>
                  <div className="space-y-4">
                    <input placeholder="Customer Name *" value={form.customer} onChange={e => setForm({...form, customer: e.target.value})} className="w-full px-4 py-2 bg-white bg-opacity-20 text-white rounded-lg border border-white border-opacity-30" />
                    <div>
                      <label className="block text-white mb-2">Rating</label>
                      <input type="range" min="1" max="5" value={form.rating} onChange={e => setForm({...form, rating: parseInt(e.target.value)})} className="w-full" />
                      <p className="text-center text-yellow-400 text-2xl mt-2">{"‚≠ê".repeat(form.rating)}</p>
                    </div>
                    <select value={form.category} onChange={e => setForm({...form, category: e.target.value})} className="w-full px-4 py-2 bg-white bg-opacity-20 text-white rounded-lg border border-white border-opacity-30">
                      <option value="service">Service Quality</option>
                      <option value="communication">Communication</option>
                      <option value="timeliness">Timeliness</option>
                      <option value="professionalism">Professionalism</option>
                      <option value="pricing">Pricing</option>
                    </select>
                    <textarea placeholder="Comments" value={form.comment} onChange={e => setForm({...form, comment: e.target.value})} className="w-full px-4 py-2 bg-white bg-opacity-20 text-white rounded-lg border border-white border-opacity-30" rows="4" />
                    <input placeholder="Technician Name" value={form.technician} onChange={e => setForm({...form, technician: e.target.value})} className="w-full px-4 py-2 bg-white bg-opacity-20 text-white rounded-lg border border-white border-opacity-30" />
                    <input type="date" value={form.date} onChange={e => setForm({...form, date: e.target.value})} className="w-full px-4 py-2 bg-white bg-opacity-20 text-white rounded-lg border border-white border-opacity-30" />
                    <label className="flex items-center gap-2 text-white">
                      <input type="checkbox" checked={form.followUpNeeded} onChange={e => setForm({...form, followUpNeeded: e.target.checked})} />
                      <span>Follow-up Needed</span>
                    </label>
                    <div className="flex gap-2">
                      <button onClick={addFeedback} className="flex-1 px-6 py-3 bg-blue-600 hover:bg-blue-700 text-white rounded-lg font-bold">Save Feedback</button>
                      <button onClick={() => setShowAdd(false)} className="flex-1 px-6 py-3 bg-gray-600 hover:bg-gray-700 text-white rounded-lg font-bold">Cancel</button>
                    </div>
                  </div>
                </div>
              </div>
            )}
          </div>
        );
      }

      ReactDOM.createRoot(document.getElementById("root")).render(<FeedbackTracker />);
    </script>
  </body>
</html>
